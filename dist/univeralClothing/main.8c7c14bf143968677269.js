(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.i)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.g)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.e)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.h)(Object(r.h)([],Object(r.g)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.g)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=Object(r.i)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=Object(r.g)(h.value,2),f=d[1];u===this.normalizeInstanceIdentifier(d[0])&&f.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return c},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("/6Yf"),o=n("qOnz"),s=n("mrSG"),a=n("q/0M"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),d=l("sessionStorage"),f=new a.b("@firebase/database"),p=(e=1,function(){return e++}),m=function(t){var e=Object(o.F)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},g=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=g.apply(null,i):n+="object"==typeof i?Object(o.G)(i):i,n+=" "}return n},y=null,b=!0,v=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(f.logLevel=a.a.VERBOSE,y=f.log.bind(f),e&&d.set("logging_enabled",!0)):"function"==typeof t?y=t:(y=null,d.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===b&&(b=!1,null===y&&!0===d.get("logging_enabled")&&v(!0)),y){var n=g.apply(null,t);y(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(s.h)([t],Object(s.g)(e)))}},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+g.apply(void 0,Object(s.h)([],Object(s.g)(t)));f.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+g.apply(void 0,Object(s.h)([],Object(s.g)(t)));throw f.error(n),new Error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+g.apply(void 0,Object(s.h)([],Object(s.g)(t)));f.warn(n)},O=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",x="[MAX_NAME]",I=function(t,e){if(t===e)return 0;if(t===T||e===x)return-1;if(e===T||t===x)return 1;var n=L(t),r=L(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},k=function(t,e){return t===e?0:t<e?-1:1},A=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.G)(e))},R=function(t){if("object"!=typeof t||null===t)return Object(o.G)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.G)(e[i]),r+=":",r+=R(t[e[i]]);return r+"}"},j=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function N(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var P=function(t){var e,n,r,i,s;Object(o.d)(!O(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},D=new RegExp("^-?(0*)\\d{1,10}$"),L=function(t){if(D.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},M=function(t){try{t()}catch(e){setTimeout(function(){throw E("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},F=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},V=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';E(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),q=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),U=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,B="websocket",H="long_polling",W=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function z(t,e,n){var r;if(Object(o.d)("string"==typeof e,"typeof type must == string"),Object(o.d)("object"==typeof n,"typeof params must == object"),e===B)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==H)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return N(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var K=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),$={},Q={};function G(t){var e=t.toString();return $[e]||($[e]=new K),$[e]}var Y=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&M(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Z="start",J="close",X=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=G(e),this.urlFn=function(t){return z(e,H,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Y(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.w)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new tt(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s.g)(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Z)n.id=o,n.password=a;else{if(i!==J)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s.g)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&U.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=j(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),tt=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.w)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),et="";function nt(t){et=t}var rt=null;"undefined"!=typeof MozWebSocket?rt=MozWebSocket:"undefined"!=typeof WebSocket&&(rt=WebSocket);var it=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=G(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.w)()&&"undefined"!=typeof location&&location.hostname&&U.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),z(t,B,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.w)()){var r={headers:{"User-Agent":"Firebase/5/"+et+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new rt(this.connURL,[],r)}else this.mySock=new rt(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==rt&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=j(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),ot=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[X,it]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=it&&it.isAvailable(),o=i&&!it.previouslyFailed();if(e.webSocketOnly&&(i||E("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[it];else{var a=this.transports_=[];try{for(var u=Object(s.i)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),st=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new ot(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=F(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=A("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?S("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&E("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),F(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),at=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ut=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(s.h)([],Object(s.g)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ct=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.u)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(s.d)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ut),lt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ht(){return new lt("")}function dt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ft(t){return t.pieces_.length-t.pieceNum_}function pt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new lt(t.pieces_,e)}function mt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function gt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function yt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new lt(e,0)}function bt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof lt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new lt(n,0)}function vt(t){return t.pieceNum_>=t.pieces_.length}function _t(t,e){var n=dt(t),r=dt(e);if(null===n)return e;if(n===r)return _t(pt(t),pt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function wt(t,e){for(var n=gt(t,0),r=gt(e,0),i=0;i<n.length&&i<r.length;i++){var o=I(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function St(t,e){if(ft(t)!==ft(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ct(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(ft(t)>ft(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Et=function(){return function(t,e){this.errorPrefix_=e,this.parts_=gt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.E)(this.parts_[n]);Ot(this)}}();function Ot(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Tt(t))}function Tt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var xt,It,kt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(s.d)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ut),At=1e3,Rt=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=At,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),kt.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&ct.getInstance().on("online",l.onOnline_,l),l}return Object(s.d)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.G)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();E("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):S("Unrecognized action received from server: "+Object(o.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=At),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.d)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new st(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){E(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&E(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.s)(this.interruptReasons_)&&(this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return R(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new lt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=Object(s.i)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,Object(s.i)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+et.replace(/\./g,"-")]=1,Object(o.u)()?t["framework.cordova"]=1:Object(o.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ct.getInstance().currentlyOnline();return Object(o.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(at),jt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Nt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new jt(T,t),r=new jt(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return jt.MIN},t}(),Pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.d)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return xt},set:function(t){xt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return I(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return jt.MIN},e.prototype.maxPost=function(){return new jt(x,xt)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new jt(t,xt)},e.prototype.toString=function(){return".key"},e}(Nt),Dt=new Pt,Lt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Mt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ft=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Mt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Mt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Mt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Lt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Lt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ft,t}();function qt(t,e){return I(t.name,e.name)}function Ut(t,e){return I(t,e)}var Bt,Ht,Wt,zt,Kt,$t=function(t){return"number"==typeof t?"number:"+P(t):"string:"+t},Qt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===It||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===It||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Gt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Qt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Bt},set:function(t){Bt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return vt(e)?this:".priority"===dt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=dt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===ft(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(pt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+$t(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?P(this.value_):this.value_,this.lazyHash_=m(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Yt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.d)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?I(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return jt.MIN},e.prototype.maxPost=function(){return new jt(x,new Gt("[PRIORITY-POST]",Wt))},e.prototype.makePost=function(t,e){var n=Ht(t);return new jt(e,new Gt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Nt)),Zt=Math.log(2),Jt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Zt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Xt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Mt(s,o.node,Mt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Mt(s,o.node,Mt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Mt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Mt.BLACK):(a(h,Mt.BLACK),a(h,Mt.RED))}return o}(new Jt(t.length));return new Vt(r||e,o)},te={},ee=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(te&&Yt,"ChildrenNode.ts has not been loaded"),zt=zt||new t({".priority":te},{".priority":Yt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==Dt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(jt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?Xt(i,e.getCompare()):te;var l=e.toString(),h=Object(s.a)({},this.indexSet_);h[l]=e;var d=Object(s.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.B)(this.indexes_,function(t,i){var s=Object(o.D)(r.indexSet_,i);if(Object(o.d)(s,"Missing index implementation for "+i),t===te){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(jt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Xt(a,s.getCompare())}return te}var l=n.get(e.name),h=t;return l&&(h=h.remove(new jt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.B)(this.indexes_,function(t){if(t===te)return t;var r=n.get(e.name);return r?t.remove(new jt(e.name,r)):t}),this.indexSet_)},t}(),ne=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Qt(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Kt||(Kt=new t(new Vt(Ut),null,ee.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Kt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Kt:e},t.prototype.getChild=function(t){var e=dt(t);return null===e?this:this.getImmediateChild(e).getChild(pt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new jt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Kt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=dt(t);if(null===n)return e;Object(o.d)(".priority"!==dt(t)||1===ft(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(pt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Yt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+$t(this.getPriority().val())+":"),this.forEachChild(Yt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":m(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new jt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new jt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new jt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,jt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,jt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===re?-1:0},t.prototype.withIndex=function(e){if(e===Dt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Dt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Yt),r=e.getIterator(Yt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Dt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),re=new(function(t){function e(){return t.call(this,new Vt(Ut),ne.EMPTY_NODE,ee.Default)||this}return Object(s.d)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ne.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ne));function ie(t,e){if(void 0===e&&(e=null),null===t)return ne.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Gt(t,ie(e));if(t instanceof Array){var n=ne.EMPTY_NODE;return N(t,function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=ie(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(ie(e))}var r=[],i=!1;if(N(t,function(t,e){if("."!==t.substring(0,1)){var n=ie(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new jt(t,n)))}}),0===r.length)return ne.EMPTY_NODE;var s=Xt(r,qt,function(t){return t.name},Ut);if(i){var a=Xt(r,Yt.getCompare());return new ne(s,ie(e),new ee({".priority":a},{".priority":Yt}))}return new ne(s,ie(e),ee.Default)}Object.defineProperties(jt,{MIN:{value:new jt(T,ne.EMPTY_NODE)},MAX:{value:new jt(x,re)}}),Pt.__EMPTY_NODE=ne.EMPTY_NODE,Gt.__childrenNodeConstructor=ne,It=re,Wt=re,Ht=ie;var oe,se,ae=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!vt(e)&&".priority"!==dt(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(s.d)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?I(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=ie(t),r=ne.EMPTY_NODE.updateChild(this.indexPath_,n);return new jt(e,r)},e.prototype.maxPost=function(){var t=ne.EMPTY_NODE.updateChild(this.indexPath_,re);return new jt(x,t)},e.prototype.toString=function(){return gt(this.indexPath_,0).join("/")},e}(Nt),ue=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.d)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?I(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return jt.MIN},e.prototype.maxPost=function(){return jt.MAX},e.prototype.makePost=function(t,e){var n=ie(t);return new jt(e,n)},e.prototype.toString=function(){return".value"},e}(Nt)),ce="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",le=(oe=0,se=[],function(t){var e,n=t===oe;oe=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=ce.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===se[e];e--)se[e]=0;se[e]++}else for(e=0;e<12;e++)se[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=ce.charAt(se[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),he=function(t){if("2147483647"===t)return"-";var e=L(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return x;var o=ce.charAt(ce.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},de=function(t){if("-2147483648"===t)return T;var e=L(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=ce.charAt(ce.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function fe(t){return{type:"value",snapshotNode:t}}function pe(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function me(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ge(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ye=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(me(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(pe(e,n)):s.trackChildChange(ge(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Yt,function(t,r){e.hasChild(t)||n.trackChildChange(me(t,r))}),e.isLeafNode()||e.forEachChild(Yt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ge(e,r,i))}else n.trackChildChange(pe(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ne.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new ye(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new jt(e,n))||(n=ne.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ne.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ne.EMPTY_NODE);var i=this;return e.forEachChild(Yt,function(t,e){i.matches(new jt(t,e))||(r=r.updateImmediateChild(t,ne.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ve=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new jt(e,n))||(n=ne.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ne.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ne.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ne.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ne.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new jt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ge(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(me(e,d));var m=u.updateImmediateChild(e,ne.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(pe(f.name,f.node)),m.updateImmediateChild(f.name,f.node)):m}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(me(l.name,l.node)),i.trackChildChange(pe(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ne.EMPTY_NODE)):t},t}(),_e=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Yt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function we(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Se(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ce(t,e){var n=t.copy();return n.index_=e,n}function Ee(t){var e,n={};return t.isDefault()||(t.index_===Yt?e="$priority":t.index_===ue?e="$value":t.index_===Dt?e="$key":(Object(o.d)(t.index_ instanceof ae,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.G)(e),t.startSet_&&(n.startAt=Object(o.G)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.G)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.G)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.G)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Oe(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Yt&&(e.i=t.index_.toString()),e}var Te=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(s.d)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Ee(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.D)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Ee(t._queryParams),r=t._path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.A)(u.responseText)}catch(e){E("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&E("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(at),xe=function(){function t(){this.rootNode_=ne.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Ie(){return{value:null,children:new Map}}function ke(t,e,n){if(vt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=dt(e);t.children.has(r)||t.children.set(r,Ie()),ke(t.children.get(r),e=pt(e),n)}}function Ae(t,e){if(vt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Yt,function(e,n){ke(t,new lt(e),n)}),Ae(t,e)}if(t.children.size>0){var r=dt(e);return e=pt(e),t.children.has(r)&&Ae(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Re(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Re(r,new lt(e.toString()+"/"+t),n)})}var je=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(s.a)({},t);return this.last_&&N(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Ne=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new je(t);var n=1e4+2e4*Math.random();F(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;N(e,function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),F(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Pe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function De(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Le,Me=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Pe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(vt(this.path)){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new lt(e));return new t(ht(),n,this.revert)}return Object(o.d)(dt(this.path)===e,"operationForChild called for unrelated child."),new t(pt(this.path),this.affectedTree,this.revert)},t}(),Fe=function(){function t(t,e){this.source=t,this.path=e,this.type=Pe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return vt(this.path)?new t(this.source,ht()):new t(this.source,pt(this.path))},t}(),Ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Pe.OVERWRITE}return t.prototype.operationForChild=function(e){return vt(this.path)?new t(this.source,ht(),this.snap.getImmediateChild(e)):new t(this.source,pt(this.path),this.snap)},t}(),qe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Pe.MERGE}return t.prototype.operationForChild=function(e){if(vt(this.path)){var n=this.children.subtree(new lt(e));return n.isEmpty()?null:n.value?new Ve(this.source,ht(),n.value):new t(this.source,ht(),n)}return Object(o.d)(dt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,pt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ue=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(vt(t))return this.isFullyInitialized()&&!this.filtered_;var e=dt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Be=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function He(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.e)("Should only compare child_ events.");var r=new jt(e.childName,e.snapshotNode),i=new jt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function We(t,e){return{eventCache:t,serverCache:e}}function ze(t,e,n,r){return We(new Ue(e,n,r),t.serverCache)}function Ke(t,e,n,r){return We(t.eventCache,new Ue(e,n,r))}function $e(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qe(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ge=function(){function t(t,e){void 0===e&&(Le||(Le=new Vt(k)),e=Le),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return N(e,function(t,e){n=n.set(new lt(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ht(),value:this.value};if(vt(t))return null;var n=dt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(pt(t),e);return null!=i?{path:bt(new lt(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(vt(e))return this;var n=dt(e),r=this.children.get(n);return null!==r?r.subtree(pt(e)):new t(null)},t.prototype.set=function(e,n){if(vt(e))return new t(n,this.children);var r=dt(e),i=(this.children.get(r)||new t(null)).set(pt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(vt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=dt(e),r=this.children.get(n);if(r){var i=r.remove(pt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(vt(t))return this.value;var e=dt(t),n=this.children.get(e);return n?n.get(pt(t)):null},t.prototype.setTree=function(e,n){if(vt(e))return n;var r,i=dt(e),o=(this.children.get(i)||new t(null)).setTree(pt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ht(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(bt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ht(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(vt(t))return null;var i=dt(t),o=this.children.get(i);return o?o.findOnPath_(pt(t),bt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ht(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(vt(e))return this;this.value&&r(n,this.value);var i=dt(e),o=this.children.get(i);return o?o.foreachOnPath_(pt(e),bt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ht(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(bt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Ye=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ge(null))},t}();function Ze(t,e,n){if(vt(e))return new Ye(new Ge(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=_t(i,e);return o=o.updateChild(s,n),new Ye(t.writeTree_.set(i,o))}var a=new Ge(n),u=t.writeTree_.setTree(e,a);return new Ye(u)}function Je(t,e,n){var r=t;return N(n,function(t,n){r=Ze(r,bt(e,t),n)}),r}function Xe(t,e){if(vt(e))return Ye.empty();var n=t.writeTree_.setTree(e,new Ge(null));return new Ye(n)}function tn(t,e){return null!=en(t,e)}function en(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(_t(n.path,e)):null}function nn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Yt,function(t,n){e.push(new jt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new jt(t,n.value))}),e}function rn(t,e){if(vt(e))return t;var n=en(t,e);return new Ye(null!=n?new Ge(n):t.writeTree_.subtree(e))}function on(t){return t.writeTree_.isEmpty()}function sn(t,e){return an(ht(),t.writeTree_,e)}function an(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.d)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=an(bt(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(bt(t,".priority"),r)),n}function un(t,e){return vn(e,t)}function cn(t,e){if(t.snap)return Ct(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Ct(bt(t.path,n),e))return!0;return!1}function ln(t){return t.visible}function hn(t,e,n){for(var r=Ye.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Ct(n,a)?r=Ze(r,u=_t(n,a),s.snap):Ct(a,n)&&(u=_t(a,n),r=Ze(r,ht(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if(Ct(n,a))r=Je(r,u=_t(n,a),s.children);else if(Ct(a,n))if(vt(u=_t(a,n)))r=Je(r,ht(),s.children);else{var c=Object(o.D)(s.children,dt(u));if(c){var l=c.getChild(pt(u));r=Ze(r,ht(),l)}}}}}return r}function dn(t,e,n,r,i){if(r||i){var o=rn(t.visibleWrites,e);return!i&&on(o)?n:i||null!=n||tn(o,ht())?sn(hn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Ct(t.path,e)||Ct(e,t.path))},e),n||ne.EMPTY_NODE):null}var s=en(t.visibleWrites,e);if(null!=s)return s;var a=rn(t.visibleWrites,e);return on(a)?n:null!=n||tn(a,ht())?sn(a,n||ne.EMPTY_NODE):null}function fn(t,e,n,r){return dn(t.writeTree,t.treePath,e,n,r)}function pn(t,e){return function(t,e,n){var r=ne.EMPTY_NODE,i=en(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Yt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=rn(t.visibleWrites,e);return n.forEachChild(Yt,function(t,e){var n=sn(rn(o,new lt(t)),e);r=r.updateImmediateChild(t,n)}),nn(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return nn(rn(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function mn(t,e,n,r){return function(t,e,n,r,i){Object(o.d)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=bt(e,n);if(tn(t.visibleWrites,s))return null;var a=rn(t.visibleWrites,s);return on(a)?i.getChild(n):sn(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function gn(t,e){return function(t,e){return en(t.visibleWrites,e)}(t.writeTree,bt(t.treePath,e))}function yn(t,e,n){return function(t,e,n,r){var i=bt(e,n),o=en(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?sn(rn(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function bn(t,e){return vn(bt(t.treePath,e),t.writeTree)}function vn(t,e){return{treePath:t,writeTree:e}}var _n=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ge(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,me(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,pe(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ge(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),wn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Sn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ue(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qe(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=rn(t.visibleWrites,e),c=en(u,ht());if(null!=c)a=c;else{if(null==n)return[];a=sn(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function Cn(t,e,n,r,i,s){var a=e.eventCache;if(null!=gn(r,n))return e;var u=void 0,c=void 0;if(vt(n))if(Object(o.d)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Qe(e),h=pn(r,l instanceof ne?l:ne.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=fn(r,Qe(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=dt(n);if(".priority"===f){Object(o.d)(1===ft(n),"Can't have a priority with additional path components");var p=a.getNode(),m=mn(r,n,p,c=e.serverCache.getNode());u=null!=m?t.filter.updatePriority(p,m):a.getNode()}else{var g=pt(n),y=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var b=mn(r,n,a.getNode(),c);y=null!=b?a.getNode().getImmediateChild(f).updateChild(g,b):a.getNode().getImmediateChild(f)}else y=yn(r,f,e.serverCache);u=null!=y?t.filter.updateChild(a.getNode(),f,y,g,i,s):a.getNode()}}return ze(e,u,a.isFullyInitialized()||vt(n),t.filter.filtersNodes())}function En(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(vt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=dt(n);if(!c.isCompleteForPath(n)&&ft(n)>1)return e;var f=pt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,wn,null)}var m=Ke(e,u,c.isFullyInitialized()||vt(n),l.filtersNodes());return Cn(t,m,n,i,new Sn(i,m,o),a)}function On(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new Sn(i,e,o);if(vt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=ze(e,u,!0,t.filter.filtersNodes());else{var h=dt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=ze(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=pt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(vt(d))p=r;else{var m=l.getCompleteChild(h);p=null!=m?".priority"===mt(d)&&m.getChild(yt(d)).isEmpty()?m:m.updateChild(d,r):ne.EMPTY_NODE}a=f.equals(p)?e:ze(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function Tn(t,e){return t.eventCache.isCompleteForChild(e)}function xn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function In(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=vt(n)?r:new Ge(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=xn(0,e.serverCache.getNode().getImmediateChild(n),r);c=En(t,c,new lt(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=xn(0,e.serverCache.getNode().getImmediateChild(n),r);c=En(t,c,new lt(n),h,i,o,s,a)}}),c}var kn,An=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new ye(r.getIndex()),o=(n=r).loadsAllData()?new ye(n.getIndex()):n.hasLimit()?new ve(n):new be(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(ne.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ne.EMPTY_NODE,a.getNode(),null),l=new Ue(u,s.isFullyInitialized(),i.filtersNodes()),h=new Ue(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=We(h,l),this.eventGenerator_=new Be(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Rn(t,e){var n=Qe(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!vt(e)&&!n.getImmediateChild(dt(e)).isEmpty())?n.getChild(e):null}function jn(t){return 0===t.eventRegistrations_.length}function Nn(t,e,n){var r=[];if(n){Object(o.d)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Pn(t,e,n,r){e.type===Pe.MERGE&&null!==e.source.queryId&&(Object(o.d)(Qe(t.viewCache_),"We should always have a full cache before handling merges"),Object(o.d)($e(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new _n;if(n.type===Pe.OVERWRITE){var c=n;c.source.fromUser?s=On(t,e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!vt(c.path),s=En(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===Pe.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=bt(n,r);Tn(e,dt(c))&&(a=On(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=bt(n,r);Tn(e,dt(c))||(a=On(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=In(t,e,l.path,l.children,r,i,a,u))}else if(n.type===Pe.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=gn(r,n))return e;var u=new Sn(r,e,i),c=e.eventCache.getNode(),l=void 0;if(vt(n)||".priority"===dt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=fn(r,Qe(e));else{var d=e.serverCache.getNode();Object(o.d)(d instanceof ne,"serverChildren would be complete if leaf node"),h=pn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=dt(n),p=yn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,pt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,ne.EMPTY_NODE,pt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=fn(r,Qe(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=gn(r,ht()),ze(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=gn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(vt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return En(t,e,n,u.getNode().getChild(n),i,o,a,s);if(vt(n)){var c=new Ge(null);return u.getNode().forEachChild(Dt,function(t,e){c=c.set(new lt(t),e)}),In(t,e,n,c,i,o,a,s)}return e}var l=new Ge(null);return r.foreach(function(t,e){var r=bt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),In(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Pe.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return Cn(t,Ke(e,o.getNode(),o.isFullyInitialized()||vt(n),o.isFiltered()),n,r,wn,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=$e(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(fe($e(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return i=t.processor_,s=u.viewCache,Object(o.d)(s.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(o.d)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(o.d)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Dn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Dn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),He(t,i,"child_removed",e,r,n),He(t,i,"child_added",e,r,n),He(t,i,"child_moved",o,r,n),He(t,i,"child_changed",e,r,n),He(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Ln,Mn=function(){return function(){this.views=new Map}}();function Fn(t,e,n,r){var i,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o.d)(null!=c,"SyncTree gave us an op for an invalid query."),Pn(c,e,n,r)}var l=[];try{for(var h=Object(s.i)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Pn(c=d.value,e,n,r))}catch(f){i={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l}function Vn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=fn(n,i?r:null),a=!1;s?a=!0:r instanceof ne?(s=pn(n,r),a=!1):(s=ne.EMPTY_NODE,a=!1);var u=We(new Ue(s,a,!1),new Ue(r,i,!1));return new An(e,u)}return o}function qn(t){var e,n,r=[];try{for(var i=Object(s.i)(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Un(t,e){var n,r,i=null;try{for(var o=Object(s.i)(t.views.values()),a=o.next();!a.done;a=o.next())i=i||Rn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Bn(t,e){return e._queryParams.loadsAllData()?zn(t):t.views.get(e._queryIdentifier)}function Hn(t,e){return null!=Bn(t,e)}function Wn(t){return null!=zn(t)}function zn(t){var e,n;try{for(var r=Object(s.i)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Kn=1,$n=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Ge(null),this.pendingWriteTree_={visibleWrites:Ye.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Qn(t,e,n,r,i){return function(t,e,n,r,i){Object(o.d)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ze(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?tr(t,new Ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Gn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&cn(u,r.path)?i=!1:Ct(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=hn(t.allWrites,ln,ht()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=Xe(t.visibleWrites,r.path):N(r.children,function(e){t.visibleWrites=Xe(t.visibleWrites,bt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new Ge(null);return null!=r.snap?i=i.set(ht(),!0):N(r.children,function(t){i=i.set(new lt(t),!0)}),tr(t,new Me(r.path,i,n))}return[]}function Yn(t,e,n){return tr(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Zn(t,e,n,r){var i=e._path,a=t.syncPointTree_.get(i),u=[];if(a&&("default"===e._queryIdentifier||Hn(a,e))){var c=function(t,e,n,r){var i,a,u=e._queryIdentifier,c=[],l=[],h=Wn(t);if("default"===u)try{for(var d=Object(s.i)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,m=Object(s.g)(f.value,2),g=m[0];l=l.concat(Nn(p=m[1],n,r)),jn(p)&&(t.views.delete(g),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(y){i={error:y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}else(p=t.views.get(u))&&(l=l.concat(Nn(p,n,r)),jn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Wn(t)&&c.push(new(Object(o.d)(kn,"Reference.ts has not been loaded"),kn)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),d=t.syncPointTree_.findOnPath(i,function(t,e){return Wn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(i);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Wn(e))return[zn(e)];var r=[];return e&&(r=qn(e)),N(n,function(t,e){r=r.concat(e)}),r})}(f),m=0;m<p.length;++m){var g=p[m],y=g.query,b=rr(t,g);t.listenProvider_.startListening(cr(y),ir(t,y),b.hashFn,b.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(cr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(or(e));t.listenProvider_.stopListening(cr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=or(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Jn(t,e,n){var r=e._path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=_t(t,r);i=i||Un(e,n),s=s||Wn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Wn(u),i=i||Un(u,ht())):(u=new Mn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ne.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Un(e,ht());n&&(i=i.updateImmediateChild(t,n))}));var c=Hn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=or(e);Object(o.d)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Kn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Vn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Yt,function(t,e){r.push(pe(t,e))}),n.isFullyInitialized()&&r.push(fe(n.getNode())),Dn(t,r,n.getNode(),e)}(s,n)}(u,e,n,un(t.pendingWriteTree_,r),i,a);if(!c&&!s){var f=Bn(u,e);d=d.concat(function(t,e,n){var r=e._path,i=ir(t,e),s=rr(t,n),a=t.listenProvider_.startListening(cr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o.d)(!Wn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!vt(t)&&e&&Wn(e))return[zn(e).query];var r=[];return e&&(r=r.concat(qn(e).map(function(t){return t.query}))),N(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(cr(h),ir(t,h))}return a}(t,e,f))}return d}function Xn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Un(n,_t(t,e));if(r)return r});return dn(r,e,i,n,!0)}function tr(t,e){return er(e,t.syncPointTree_,null,un(t.pendingWriteTree_,ht()))}function er(t,e,n,r){if(vt(t.path))return nr(t,e,n,r);var i=e.get(ht());null==n&&null!=i&&(n=Un(i,ht()));var o=[],s=dt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=bn(r,s);o=o.concat(er(a,u,c,l))}return i&&(o=o.concat(Fn(i,t,r,n))),o}function nr(t,e,n,r){var i=e.get(ht());null==n&&null!=i&&(n=Un(i,ht()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=bn(r,e),u=t.operationForChild(e);u&&(o=o.concat(nr(u,i,s,a)))}),i&&(o=o.concat(Fn(i,t,r,n))),o}function rr(t,e){var n=e.query,r=ir(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||ne.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=sr(t,n);if(r){var i=ar(r),o=i.path,s=i.queryId,a=_t(o,e);return ur(t,o,new Fe(De(s),a))}return[]}(t,n._path,r):function(t,e){return tr(t,new Fe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Zn(t,n,null,i)}}}function ir(t,e){var n=or(e);return t.queryToTagMap.get(n)}function or(t){return t._path.toString()+"$"+t._queryIdentifier}function sr(t,e){return t.tagToQueryMap.get(e)}function ar(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new lt(t.substr(0,e))}}function ur(t,e,n){var r=t.syncPointTree_.get(e);return Object(o.d)(r,"Missing sync point for query tag that we're tracking"),Fn(r,n,un(t.pendingWriteTree_,e),null)}function cr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(o.d)(Ln,"Reference.ts has not been loaded"),Ln)(t._repo,t._path):t}var lr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),hr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=bt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Xn(this.syncTree_,this.path_)},t}(),dr=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?fr(t[".sv"],e,n):"object"==typeof t[".sv"]?pr(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},fr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},pr=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},mr=function(t,e,n,r){return yr(e,new hr(n,t),r)},gr=function(t,e,n){return yr(t,new lr(e),n)};function yr(t,e,n){var r,i=t.getPriority().val(),o=dr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=dr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Gt(a,ie(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Gt(o))),u.forEachChild(Yt,function(t,i){var o=yr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var br=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function vr(t,e){for(var n=e instanceof lt?e:new lt(e),r=t,i=dt(n);null!==i;){var s=Object(o.D)(r.node.children,i)||{children:{},childCount:0};r=new br(i,r,s),i=dt(n=pt(n))}return r}function _r(t){return t.node.value}function wr(t,e){t.node.value=e,Tr(t)}function Sr(t){return t.node.childCount>0}function Cr(t,e){N(t.node.children,function(n,r){e(new br(n,t,r))})}function Er(t,e,n,r){n&&!r&&e(t),Cr(t,function(t){Er(t,e,!0,r)}),n&&r&&e(t)}function Or(t){return new lt(null===t.parent?t.name:Or(t.parent)+"/"+t.name)}function Tr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===_r(t)&&!Sr(t)}(n),i=Object(o.h)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Tr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Tr(t))}(t.parent,t.name,t)}var xr=/[\[\].#$\/\u0000-\u001F\u007F]/,Ir=/[\[\].#$\u0000-\u001F\u007F]/,kr=10485760,Ar=function(t){return"string"==typeof t&&0!==t.length&&!xr.test(t)},Rr=function(t){return"string"==typeof t&&0!==t.length&&!Ir.test(t)},jr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!O(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},Nr=function(t,e,n,r){r&&void 0===e||Pr(Object(o.l)(t,"value"),e,n)},Pr=function(t,e,n){var r=n instanceof lt?new Et(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Tt(r));if("function"==typeof e)throw new Error(t+"contains a function "+Tt(r)+" with contents = "+e.toString());if(O(e))throw new Error(t+"contains "+e.toString()+" "+Tt(r));if("string"==typeof e&&e.length>kr/3&&Object(o.E)(e)>kr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+Tt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(N(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Ar(e)))throw new Error(t+" contains an invalid key ("+e+") "+Tt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(o.E)(e),Ot(t)}(r,e),Pr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=Object(o.E)(u),a.parts_.length>0&&(a.byteLength_-=1)}),i&&s)throw new Error(t+' contains ".value" child '+Tt(r)+" in addition to actual children.")}},Dr=function(t,e,n,r){if(!r||void 0!==e){var i=Object(o.l)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var s=[];N(e,function(t,e){var r=new lt(t);if(Pr(i,e,bt(n,r)),".priority"===mt(r)&&!jr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=gt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Ar(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(wt);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Ct(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,s)}},Lr=function(t,e,n){if(!n||void 0!==e){if(O(e))throw new Error(Object(o.l)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!jr(e))throw new Error(Object(o.l)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Mr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Fr=function(t,e,n,r){if(!(r&&void 0===n||Ar(n)))throw new Error(Object(o.l)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vr=function(t,e,n,r){if(!(r&&void 0===n||Rr(n)))throw new Error(Object(o.l)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qr=function(t,e){if(".info"===dt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Ur=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Ar(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Rr(t)}(n))throw new Error(Object(o.l)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Br=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e)+"must be a boolean.")},Hr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Wr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||St(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function zr(t,e,n){Wr(t,n),$r(t,function(t){return St(t,e)})}function Kr(t,e,n){Wr(t,n),$r(t,function(t){return Ct(t,e)||Ct(e,t)})}function $r(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Qr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Qr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();y&&_("event: "+n.toString()),M(r)}}}var Gr="repo_interrupt",Yr=function(){function t(t,e,n){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Hr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ie(),this.transactionQueueTree_=new br,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Zr(t){var e=t.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Jr(t){return(e=(e={timestamp:Zr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Xr(t,e,n,r,i){t.dataUpdateCount++;var s=new lt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=Object(o.B)(n,function(t){return ie(t)});a=function(t,e,n,r){var i=sr(t,r);if(i){var o=ar(i),s=o.path,a=o.queryId,u=_t(s,e),c=Ge.fromObject(n);return ur(t,s,new qe(De(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=ie(n);a=function(t,e,n,r){var i=sr(t,r);if(null!=i){var o=ar(i),s=o.path,a=o.queryId,u=_t(s,e);return ur(t,s,new Ve(De(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=Object(o.B)(n,function(t){return ie(t)});a=function(t,e,n){var r=Ge.fromObject(n);return tr(t,new qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=ie(n);a=Yn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=di(t,s)),Kr(t.eventQueue_,d,a)}function ti(t,e){ei(t,"connected",e),!1===e&&function(t){ui(t,"onDisconnectEvents");var e=Jr(t),n=Ie();Re(t.onDisconnect_,ht(),function(r,i){var o=mr(r,i,t.serverSyncTree_,e);ke(n,r,o)});var r=[];Re(n,ht(),function(e,n){r=r.concat(Yn(t.serverSyncTree_,e,n));var i=yi(t,e);di(t,i)}),t.onDisconnect_=Ie(),Kr(t.eventQueue_,ht(),r)}(t)}function ei(t,e,n){var r=new lt("/.info/"+e),i=ie(n);t.infoData_.updateSnapshot(r,i);var o=Yn(t.infoSyncTree_,r,i);Kr(t.eventQueue_,r,o)}function ni(t){return t.nextWriteId_++}function ri(t,e,n,r,i){ui(t,"set",{path:e.toString(),value:n,priority:r});var o=Jr(t),s=ie(n,r),a=Xn(t.serverSyncTree_,e),u=gr(s,a,o),c=ni(t),l=Qn(t.serverSyncTree_,e,u,c,!0);Wr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||E("set at "+e+" failed: "+n);var s=Gn(t.serverSyncTree_,c,!o);Kr(t.eventQueue_,e,s),ci(0,i,n,r)});var h=yi(t,e);di(t,h),Kr(t.eventQueue_,h,[])}function ii(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Ae(t.onDisconnect_,e),ci(0,n,r,i)})}function oi(t,e,n,r){var i=ie(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&ke(t.onDisconnect_,e,i),ci(0,r,n,o)})}function si(t,e,n){var r;r=".info"===dt(e._path)?Zn(t.infoSyncTree_,e,n):Zn(t.serverSyncTree_,e,n),zr(t.eventQueue_,e._path,r)}function ai(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Gr)}function ui(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),_.apply(void 0,Object(s.h)([r],Object(s.g)(e)))}function ci(t,e,n,r){e&&M(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function li(t,e,n){return Xn(t.serverSyncTree_,e,n)||ne.EMPTY_NODE}function hi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||gi(t,e),_r(e)){var n=pi(t,e);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=li(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.d)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=_t(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){ui(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Gn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(gi(t,vr(t.transactionQueueTree_,e)),hi(t,t.transactionQueueTree_),Kr(t.eventQueue_,e,i),a=0;a<o.length;a++)M(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(E("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;di(t,e)}},a)}(t,Or(e),n)}else Sr(e)&&Cr(e,function(e){hi(t,e)})}function di(t,e){var n=fi(t,e),r=Or(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=_t(n,c.path),h=!1;if(Object(o.d)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(Gn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat(Gn(t.serverSyncTree_,c.currentWriteId,!0));else{var d=li(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Pr("transaction failed: Data returned ",f,c.path);var p=ie(f);"object"==typeof f&&null!=f&&Object(o.h)(f,".priority")||(p=p.updatePriority(d.getPriority()));var m=c.currentWriteId,g=Jr(t),y=gr(p,d,g);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=ni(t),s.splice(s.indexOf(m),1),i=(i=i.concat(Qn(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(Gn(t.serverSyncTree_,m,!0))}else h=!0,u="nodata",i=i.concat(Gn(t.serverSyncTree_,c.currentWriteId,!0))}Kr(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(gi(t,t.transactionQueueTree_),u=0;u<r.length;u++)M(r[u]);hi(t,t.transactionQueueTree_)}}(t,pi(t,n),r),r}function fi(t,e){var n,r=t.transactionQueueTree_;for(n=dt(e);null!==n&&void 0===_r(r);)r=vr(r,n),n=dt(e=pt(e));return r}function pi(t,e){var n=[];return mi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function mi(t,e,n){var r=_r(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Cr(e,function(e){mi(t,e,n)})}function gi(t,e){var n=_r(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,wr(e,n.length>0?n:void 0)}Cr(e,function(e){gi(t,e)})}function yi(t,e){var n=Or(fi(t,e)),r=vr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){bi(t,e)}),bi(t,r),Er(r,function(e){bi(t,e)}),n}function bi(t,e){var n=_r(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(o.d)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(o.d)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Gn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?wr(e,void 0):n.length=s+1,Kr(t.eventQueue_,Or(e),i),a=0;a<r.length;a++)M(r[a])}}var vi=function(t,e){var n=_i(t),r=n.namespace;return"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&E("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new W(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new lt(n.pathString)}},_i=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(s.i)(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):E("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var m=e.indexOf(".");r=e.substring(0,m).toLowerCase(),n=e.substring(m+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},wi=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.G)(this.snapshot.exportVal())},t}(),Si=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ci=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(o.d)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Ei=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.a;return ii(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){qr("OnDisconnect.remove",this._path);var t=new o.a;return oi(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){qr("OnDisconnect.set",this._path),Nr("OnDisconnect.set",t,this._path,!1);var e=new o.a;return oi(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){qr("OnDisconnect.setWithPriority",this._path),Nr("OnDisconnect.setWithPriority",t,this._path,!1),Lr("OnDisconnect.setWithPriority",e,!1);var n=new o.a;return function(t,e,n,r,i){var o=ie(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&ke(t.onDisconnect_,e,o),ci(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){qr("OnDisconnect.update",this._path),Dr("OnDisconnect.update",t,this._path,!1);var e=new o.a;return function(t,e,n,r){if(Object(o.s)(n))return _("onDisconnect().update() called with empty data.  Don't do anything."),void ci(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&N(n,function(n,r){var i=ie(r);ke(t.onDisconnect_,bt(e,n),i)}),ci(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),Oi=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return vt(this._path)?null:mt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ki(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Oe(this._queryParams),e=R(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Oe(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(o.m)(e))instanceof t))return!1;var n=this._repo===e._repo,r=St(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Ti(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function xi(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Dt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==x)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Yt){if(null!=e&&!jr(e)||null!=n&&!jr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof ae||t.getIndex()===ue,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ii(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var ki=function(t){function e(e,n){return t.call(this,e,n,new _e,!1)||this}return Object(s.d)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=yt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Oi),Ai=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new lt(e),r=Ni(this.ref,e);return new t(this._node.getChild(n),r,Yt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Ni(n.ref,r),Yt))})},t.prototype.hasChild=function(t){var e=new lt(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ri(t,e){return(t=Object(o.m)(t))._checkNotDeleted("ref"),void 0!==e?Ni(t._root,e):t._root}function ji(t,e){(t=Object(o.m)(t))._checkNotDeleted("refFromURL");var n=vi(e,t._repo.repoInfo_.nodeAdmin);Ur("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||C("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ri(t,n.path.toString())}function Ni(t,e){var n;return null===dt((t=Object(o.m)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vr("child","path",n,!1)):Vr("child","path",e,!1),new ki(t._repo,bt(t._path,e))}function Pi(t,e){t=Object(o.m)(t),qr("push",t._path),Nr("push",e,t._path,!0);var n,r=Zr(t._repo),i=le(r),s=Ni(t,i),a=Ni(t,i);return n=null!=e?Li(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Di(t){return qr("remove",t._path),Li(t,null)}function Li(t,e){t=Object(o.m)(t),qr("set",t._path),Nr("set",e,t._path,!1);var n=new o.a;return ri(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Mi(t,e){t=Object(o.m)(t),qr("setPriority",t._path),Lr("setPriority",e,!1);var n=new o.a;return ri(t._repo,bt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Fi(t,e,n){if(qr("setWithPriority",t._path),Nr("setWithPriority",e,t._path,!1),Lr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.a;return ri(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Vi(t,e){Dr("update",e,t._path,!1);var n=new o.a;return function(t,e,n,r){ui(t,"update",{path:e.toString(),value:n});var i=!0,s=Jr(t),a={};if(N(n,function(n,r){i=!1,a[n]=mr(bt(e,n),ie(r),t.serverSyncTree_,s)}),i)_("update() called with empty data.  Don't do anything."),ci(0,r,"ok",void 0);else{var u=ni(t),c=function(t,e,n,r){!function(t,e,n,r){Object(o.d)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Je(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=Ge.fromObject(n);return tr(t,new qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);Wr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||E("update at "+e+" failed: "+n);var s=Gn(t.serverSyncTree_,u,!o),a=s.length>0?di(t,e):e;Kr(t.eventQueue_,a,s),ci(0,r,n,i)}),N(n,function(n){var r=yi(t,bt(e,n));di(t,r)}),Kr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var qi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new wi("value",this,new Ai(t.snapshotNode,new ki(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Si(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Ui=function(){function t(t){this.callbacks=t}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks,e)},t.prototype.createCancelEvent=function(t,e){return this.callbacks.cancel.hasCancelCallback?new Si(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=Ni(new ki(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new wi(t.type,this,new Ai(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){if("cancel"===t.getEventType()){var e=this.callbacks.cancel;return function(){return e.onCancel(t.error)}}var n=this.callbacks[t.eventType];return function(){return n.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks||!e.callbacks)return!0;var r=Object.keys(e.callbacks),i=Object.keys(this.callbacks),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return a===s&&(!e.callbacks[s]||!this.callbacks[a]||e.callbacks[s].matches(this.callbacks[a]))}return i.every(function(t){return e.callbacks[t].matches(n.callbacks[t])})}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks},t}();function Bi(t,e,n,r,i){var o,s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){var a=n,u=function(e,n){a(e,n),si(t._repo,t,l)};u.userCallback=n.userCallback,u.context=n.context,n=u}var c=new Ci(n,s||void 0),l="value"===e?new qi(c):new Ui(((o={})[e]=c,o));return function(t,e,n){var r;r=".info"===dt(e._path)?Jn(t.infoSyncTree_,e,n):Jn(t.serverSyncTree_,e,n),zr(t.eventQueue_,e._path,r)}(t._repo,t,l),function(){return si(t._repo,t,l)}}function Hi(t,e,n,r){return Bi(t,"value",e,n,r)}function Wi(t,e,n,r){return Bi(t,"child_added",e,n,r)}function zi(t,e,n,r){return Bi(t,"child_changed",e,n,r)}function Ki(t,e,n,r){return Bi(t,"child_moved",e,n,r)}function $i(t,e,n,r){return Bi(t,"child_removed",e,n,r)}function Qi(t,e,n){var r=null,i=null,o=n?new Ci(n):null;"value"===e?r=new qi(o):e&&(n&&((i={})[e]=o),r=new Ui(i)),si(t._repo,t,r)}var Gi=function(){return function(){}}(),Yi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.d)(e,t),e.prototype._apply=function(t){Nr("endAt",this._value,t._path,!0);var e=Se(t._queryParams,this._value,this._key);if(Ii(e),xi(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Oi(t._repo,t._path,e,t._orderByCalled)},e}(Gi);function Zi(t,e){return Fr("endAt","key",e,!0),new Yi(t,e)}var Ji=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.d)(e,t),e.prototype._apply=function(t){Nr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Dt?("string"==typeof n&&(n=de(n)),i=Se(e,n,r)):i=Se(e,n,null==r?T:de(r)),i.endBeforeSet_=!0,i);if(Ii(o),xi(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Oi(t._repo,t._path,o,t._orderByCalled)},e}(Gi);function Xi(t,e){return Fr("endBefore","key",e,!0),new Ji(t,e)}var to=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.d)(e,t),e.prototype._apply=function(t){Nr("startAt",this._value,t._path,!0);var e=we(t._queryParams,this._value,this._key);if(Ii(e),xi(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Oi(t._repo,t._path,e,t._orderByCalled)},e}(Gi);function eo(t,e){return void 0===t&&(t=null),Fr("startAt","key",e,!0),new to(t,e)}var no=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.d)(e,t),e.prototype._apply=function(t){Nr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Dt?("string"==typeof n&&(n=he(n)),i=we(e,n,r)):i=we(e,n,null==r?x:he(r)),i.startAfterSet_=!0,i);if(Ii(o),xi(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Oi(t._repo,t._path,o,t._orderByCalled)},e}(Gi);function ro(t,e){return Fr("startAfter","key",e,!0),new no(t,e)}var io=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(s.d)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Oi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Gi);function oo(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new io(t)}var so=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(s.d)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Oi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Gi);function ao(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new so(t)}var uo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(s.d)(e,t),e.prototype._apply=function(t){Ti(t,"orderByChild");var e=new lt(this._path);if(vt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ae(e),r=Ce(t._queryParams,n);return xi(r),new Oi(t._repo,t._path,r,!0)},e}(Gi);function co(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vr("orderByChild","path",t,!1),new uo(t)}var lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.d)(e,t),e.prototype._apply=function(t){Ti(t,"orderByKey");var e=Ce(t._queryParams,Dt);return xi(e),new Oi(t._repo,t._path,e,!0)},e}(Gi);function ho(){return new lo}var fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.d)(e,t),e.prototype._apply=function(t){Ti(t,"orderByPriority");var e=Ce(t._queryParams,Yt);return xi(e),new Oi(t._repo,t._path,e,!0)},e}(Gi);function po(){return new fo}var mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.d)(e,t),e.prototype._apply=function(t){Ti(t,"orderByValue");var e=Ce(t._queryParams,ue);return xi(e),new Oi(t._repo,t._path,e,!0)},e}(Gi);function go(){return new mo}var yo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.d)(e,t),e.prototype._apply=function(t){if(Nr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Yi(this._value,this._key)._apply(new to(this._value,this._key)._apply(t))},e}(Gi);function bo(t,e){return Fr("equalTo","key",e,!0),new yo(t,e)}function vo(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=Object(o.m)(t);try{for(var u=Object(s.i)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){Object(o.d)(!kn,"__referenceConstructor has already been defined"),kn=t}(ki),function(t){Object(o.d)(!Ln,"__referenceConstructor has already been defined"),Ln=t}(ki);var _o={},wo=!1;function So(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=vi(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=vi(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new q:new V(t.name,t.options,e);Ur("Invalid Firebase Database URL",s),vt(s.path)||C("Database URL must point to the root of a Firebase Database (not including a child path).");var l=function(t,e,n){var r=_o[e.name];r||(_o[e.name]=r={});var i=r[t.toURLString()];return i&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Yr(t,wo,n),r[t.toURLString()]=i,i}(a,t,c);return new Co(l,t)}var Co=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=G(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Te(t.repoInfo_,function(e,n,r,i){Xr(t,e,n,r,i)},t.authTokenProvider_),setTimeout(function(){return ti(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.G)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Rt(t.repoInfo_,e,function(e,n,r,i){Xr(t,e,n,r,i)},function(e){ti(t,e)},function(e){!function(t,e){N(e,function(e,n){ei(t,e,n)})}(t,e)},t.authTokenProvider_,n),t.server_=t.persistentConnection_}var r,i;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.statsReporter_=(r=function(){return new Ne(t.stats_,t.server_)},i=t.repoInfo_.toString(),Q[i]||(Q[i]=r()),Q[i]),t.infoData_=new xe,t.infoSyncTree_=new $n({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Yn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ei(t,"connected",!1),t.serverSyncTree_=new $n({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Kr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new ki(this._repo,ht())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=_o[e=this.app.name])&&n[t.key]===t||C("Database "+e+"("+t.repoInfo_+") has already been deleted."),ai(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&C("Cannot call "+t+" on a deleted database.")},t}();function Eo(t){(t=Object(o.m)(t))._checkNotDeleted("goOffline"),ai(t._repo)}function Oo(t){var e;(t=Object(o.m)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Gr)}function To(t,e){v(t,e)}var xo={".sv":"timestamp"},Io=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function ko(t,e,n){var r;if(t=Object(o.m)(t),qr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new o.a,a=Hi(t,function(){});return function(e,n,r,i,a,u){ui(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Ai(r,new ki(t._repo,t._path),Yt),s.resolve(new Io(n,i)))},status:null,order:p(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=li(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Pr("transaction failed: Data returned ",h,c.path),c.status=0;var d=vr(e.transactionQueueTree_,n),f=_r(d)||[];f.push(c),wr(d,f);var m=void 0;"object"==typeof h&&null!==h&&Object(o.h)(h,".priority")?(m=Object(o.D)(h,".priority"),Object(o.d)(jr(m),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):m=(Xn(e.serverSyncTree_,n)||ne.EMPTY_NODE).getPriority().val();var g=Jr(e),y=ie(h,m),b=gr(y,l,g);c.currentOutputSnapshotRaw=y,c.currentOutputSnapshotResolved=b,c.currentWriteId=ni(e);var v=Qn(e.serverSyncTree_,n,b,c.currentWriteId,c.applyLocally);Kr(e.eventQueue_,n,v),hi(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,i),s.promise}var Ao=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(o.H)("OnDisconnect.cancel",0,1,arguments.length),Object(o.I)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){Object(o.H)("OnDisconnect.remove",0,1,arguments.length),Object(o.I)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){Object(o.H)("OnDisconnect.set",1,2,arguments.length),Object(o.I)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){Object(o.H)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(o.I)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if(Object(o.H)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(o.I)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},t}(),Ro=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),jo=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(o.H)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(o.H)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(o.H)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(o.H)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(o.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(o.H)("DataSnapshot.hasChild",1,1,arguments.length),Vr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(o.H)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(o.H)("DataSnapshot.forEach",1,1,arguments.length),Object(o.I)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return Object(o.H)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.H)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(o.H)("DataSnapshot.ref",0,0,arguments.length),new Po(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),No=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var s,a=this;Object(o.H)("Query.on",2,4,arguments.length),Object(o.I)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new jo(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return Hi(this._delegate,c,l),n;case"child_added":return Wi(this._delegate,c,l),n;case"child_removed":return $i(this._delegate,c,l),n;case"child_changed":return zi(this._delegate,c,l),n;case"child_moved":return Ki(this._delegate,c,l),n;default:throw new Error(Object(o.l)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(o.H)("Query.off",0,3,arguments.length),Mr("Query.off",t,!0),Object(o.I)("Query.off","callback",e,!0),Object(o.J)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Qi(this._delegate,t,r)}else Qi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=_t(t,n);r=r||Un(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Un(i,ht()):(i=new Mn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Ue(r,!0,!1):null;return $e(Vn(i,e,un(t.pendingWriteTree_,e._path),o?s.getNode():ne.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=ie(n),i=Yn(t.serverSyncTree_,e._path,r);return zr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return ui(t,"get for query "+Object(o.G)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=Object(o.m)(t))._repo,t).then(function(e){return new Ai(e,new ki(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new jo(t.database,e)})},t.prototype.once=function(e,n,r,i){var s=this;Object(o.H)("Query.once",1,4,arguments.length),Object(o.I)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.on",r,i),u=new o.a,c=function(t,e){var r=new jo(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":Hi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Wi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":$i(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Ki(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(o.l)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(o.H)("Query.limitToFirst",1,1,arguments.length),new t(this.database,vo(this._delegate,oo(e)))},t.prototype.limitToLast=function(e){return Object(o.H)("Query.limitToLast",1,1,arguments.length),new t(this.database,vo(this._delegate,ao(e)))},t.prototype.orderByChild=function(e){return Object(o.H)("Query.orderByChild",1,1,arguments.length),new t(this.database,vo(this._delegate,co(e)))},t.prototype.orderByKey=function(){return Object(o.H)("Query.orderByKey",0,0,arguments.length),new t(this.database,vo(this._delegate,ho()))},t.prototype.orderByPriority=function(){return Object(o.H)("Query.orderByPriority",0,0,arguments.length),new t(this.database,vo(this._delegate,po()))},t.prototype.orderByValue=function(){return Object(o.H)("Query.orderByValue",0,0,arguments.length),new t(this.database,vo(this._delegate,go()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(o.H)("Query.startAt",0,2,arguments.length),new t(this.database,vo(this._delegate,eo(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(o.H)("Query.startAfter",0,2,arguments.length),new t(this.database,vo(this._delegate,ro(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(o.H)("Query.endAt",0,2,arguments.length),new t(this.database,vo(this._delegate,Zi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(o.H)("Query.endBefore",0,2,arguments.length),new t(this.database,vo(this._delegate,Xi(e,n)))},t.prototype.equalTo=function(e,n){return Object(o.H)("Query.equalTo",1,2,arguments.length),new t(this.database,vo(this._delegate,bo(e,n)))},t.prototype.toString=function(){return Object(o.H)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(o.H)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(o.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(o.I)(t,"cancel",r.cancel,!0),r.context=n,Object(o.J)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Po(this.database,new ki(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Po=function(t){function e(e,n){var r=t.call(this,e,new Oi(n._repo,n._path,new _e,!1))||this;return r.database=e,r._delegate=n,r}return Object(s.d)(e,t),e.prototype.getKey=function(){return Object(o.H)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(o.H)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Ni(this._delegate,t))},e.prototype.getParent=function(){Object(o.H)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(o.H)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(o.H)("Reference.set",1,2,arguments.length),Object(o.I)("Reference.set","onComplete",e,!0);var n=Li(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if(Object(o.H)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qr("Reference.update",this._delegate._path),Object(o.I)("Reference.update","onComplete",e,!0);var i=Vi(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},e.prototype.setWithPriority=function(t,e,n){Object(o.H)("Reference.setWithPriority",2,3,arguments.length),Object(o.I)("Reference.setWithPriority","onComplete",n,!0);var r=Fi(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){Object(o.H)("Reference.remove",0,1,arguments.length),Object(o.I)("Reference.remove","onComplete",t,!0);var e=Di(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;Object(o.H)("Reference.transaction",1,3,arguments.length),Object(o.I)("Reference.transaction","transactionUpdate",t,!1),Object(o.I)("Reference.transaction","onComplete",e,!0),Br("Reference.transaction","applyLocally",n,!0);var i=ko(this._delegate,t,{applyLocally:n}).then(function(t){return new Ro(t.committed,new jo(r.database,t.snapshot))});return e&&i.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),i},e.prototype.setPriority=function(t,e){Object(o.H)("Reference.setPriority",1,2,arguments.length),Object(o.I)("Reference.setPriority","onComplete",e,!0);var n=Mi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;Object(o.H)("Reference.push",0,2,arguments.length),Object(o.I)("Reference.push","onComplete",n,!0);var i=Pi(this._delegate,t),s=i.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,i);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return qr("Reference.onDisconnect",this._delegate._path),new Ao(new Ei(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(No),Do=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e){!function(t,e,n){(t=Object(o.m)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&C("Cannot call useEmulator() after instance has already been initialized."),function(t,e,n){t.repoInfo_=new W(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new q)}(t._repo,e,n)}(this._delegate,t,e)},t.prototype.ref=function(t){if(Object(o.H)("database.ref",0,1,arguments.length),t instanceof Po){var e=ji(this._delegate,t.toString());return new Po(this,e)}return e=Ri(this._delegate,t),new Po(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(o.H)(e,1,1,arguments.length);var n=ji(this._delegate,t);return new Po(this,n)},t.prototype.goOffline=function(){return Object(o.H)("database.goOffline",0,0,arguments.length),Eo(this._delegate)},t.prototype.goOnline=function(){return Object(o.H)("database.goOnline",0,0,arguments.length),Oo(this._delegate)},t.ServerValue={TIMESTAMP:xo,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Lo=Object.freeze({__proto__:null,forceLongPolling:function(){it.forceDisallow(),X.forceAllow()},forceWebSockets:function(){X.forceDisallow()},isWebSocketsAvailable:function(){return it.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new je(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);N(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;nt(t.version);var u=new i.c("auth-internal",new i.b("database-standalone"));return u.setComponent(new i.a("auth-internal",function(){return r},"PRIVATE")),{instance:new Do(So(e,u,n,a),e),namespace:o}}}),Mo=Rt;Rt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Rt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Fo=Object.freeze({__proto__:null,DataConnection:Mo,RealTimeConnection:st,hijackHash:function(t){var e=Rt.prototype.put;return Rt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Rt.prototype.put=e}},ConnectionTarget:W,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){wo=t}(t)}}),Vo=Do.ServerValue;!function(e){nt(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.a("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new Do(So(r,i,n),r)},"PUBLIC").setServiceProps({Reference:Po,Query:No,Database:Do,DataSnapshot:jo,enableLogging:To,INTERNAL:Lo,ServerValue:Vo,TEST_ACCESS:Fo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.10"),Object(o.w)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.4.1","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return on}),n.d(e,"b",function(){return Wu}),n.d(e,"c",function(){return Vu}),n.d(e,"d",function(){return Mu}),n.d(e,"e",function(){return Fu}),n.d(e,"f",function(){return Mc}),n.d(e,"g",function(){return xc}),n.d(e,"h",function(){return Ma}),n.d(e,"i",function(){return ec}),n.d(e,"j",function(){return aa}),n.d(e,"k",function(){return $u}),n.d(e,"l",function(){return ha}),n.d(e,"m",function(){return br}),n.d(e,"n",function(){return yu}),n.d(e,"o",function(){return ao}),n.d(e,"p",function(){return On}),n.d(e,"q",function(){return k}),n.d(e,"r",function(){return rn}),n.d(e,"s",function(){return Eo}),n.d(e,"t",function(){return Aa}),n.d(e,"u",function(){return ja}),n.d(e,"v",function(){return Ku}),n.d(e,"w",function(){return Qa}),n.d(e,"x",function(){return kc}),n.d(e,"y",function(){return $a}),n.d(e,"z",function(){return Sc}),n.d(e,"A",function(){return ic}),n.d(e,"B",function(){return Tn}),n.d(e,"C",function(){return Hu}),n.d(e,"D",function(){return Bu}),n.d(e,"E",function(){return vu}),n.d(e,"F",function(){return pa}),n.d(e,"G",function(){return fa}),n.d(e,"H",function(){return Er}),n.d(e,"I",function(){return ga}),n.d(e,"J",function(){return fr}),n.d(e,"K",function(){return xn}),n.d(e,"L",function(){return jc}),n.d(e,"M",function(){return Ha}),n.d(e,"N",function(){return hc}),n.d(e,"O",function(){return sn}),n.d(e,"P",function(){return ba}),n.d(e,"Q",function(){return ya}),n.d(e,"R",function(){return Ya}),n.d(e,"S",function(){return D}),n.d(e,"T",function(){return Cc}),n.d(e,"U",function(){return _c}),n.d(e,"V",function(){return f}),n.d(e,"W",function(){return vc}),n.d(e,"X",function(){return Dc}),n.d(e,"Y",function(){return pc}),n.d(e,"Z",function(){return zu}),n.d(e,"ab",function(){return co}),n.d(e,"bb",function(){return $s}),n.d(e,"cb",function(){return hr}),n.d(e,"db",function(){return Qn}),n.d(e,"eb",function(){return Mn}),n.d(e,"fb",function(){return Vn}),n.d(e,"gb",function(){return Hn}),n.d(e,"hb",function(){return Un}),n.d(e,"ib",function(){return qn}),n.d(e,"jb",function(){return Bn}),n.d(e,"kb",function(){return Hs}),n.d(e,"lb",function(){return Pc}),n.d(e,"mb",function(){return Ws}),n.d(e,"nb",function(){return zs}),n.d(e,"ob",function(){return Fn}),n.d(e,"pb",function(){return q}),n.d(e,"qb",function(){return No}),n.d(e,"rb",function(){return Jo}),n.d(e,"sb",function(){return Yo}),n.d(e,"tb",function(){return Zo}),n.d(e,"ub",function(){return Bs}),n.d(e,"vb",function(){return Ot}),n.d(e,"wb",function(){return l}),n.d(e,"xb",function(){return Ln}),n.d(e,"yb",function(){return To}),n.d(e,"zb",function(){return vt}),n.d(e,"Ab",function(){return ia}),n.d(e,"Bb",function(){return hi}),n.d(e,"Cb",function(){return Vo}),n.d(e,"Db",function(){return bs}),n.d(e,"Eb",function(){return Ps}),n.d(e,"Fb",function(){return Ds}),n.d(e,"Gb",function(){return Ls}),n.d(e,"Hb",function(){return ys}),n.d(e,"Ib",function(){return Ru}),n.d(e,"Jb",function(){return J}),n.d(e,"Kb",function(){return ot}),n.d(e,"Lb",function(){return _}),n.d(e,"Mb",function(){return w}),n.d(e,"Nb",function(){return nt}),n.d(e,"Ob",function(){return st}),n.d(e,"Pb",function(){return Ho}),n.d(e,"Qb",function(){return Qo}),n.d(e,"Rb",function(){return $o}),n.d(e,"Sb",function(){return Ko}),n.d(e,"Tb",function(){return Go}),n.d(e,"Ub",function(){return Je}),n.d(e,"Vb",function(){return Ms}),n.d(e,"Wb",function(){return Sn}),n.d(e,"Xb",function(){return tn}),n.d(e,"Yb",function(){return Lu}),n.d(e,"Zb",function(){return Xo}),n.d(e,"ac",function(){return ju}),n.d(e,"bc",function(){return is}),n.d(e,"cc",function(){return as}),n.d(e,"dc",function(){return ss}),n.d(e,"ec",function(){return Wo}),n.d(e,"fc",function(){return us}),n.d(e,"gc",function(){return hu}),n.d(e,"hc",function(){return du}),n.d(e,"ic",function(){return fu}),n.d(e,"jc",function(){return pu}),n.d(e,"kc",function(){return mu}),n.d(e,"lc",function(){return ku}),n.d(e,"mc",function(){return Bo}),n.d(e,"nc",function(){return Sr}),n.d(e,"oc",function(){return wr}),n.d(e,"pc",function(){return Ht}),n.d(e,"qc",function(){return pr}),n.d(e,"rc",function(){return rt}),n.d(e,"sc",function(){return gs}),n.d(e,"tc",function(){return ts}),n.d(e,"uc",function(){return Fs}),n.d(e,"vc",function(){return Uo}),n.d(e,"wc",function(){return As}),n.d(e,"xc",function(){return Rs}),n.d(e,"yc",function(){return js}),n.d(e,"zc",function(){return Ns}),n.d(e,"Ac",function(){return Au});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return m(t)?t():t}function m(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class g extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function b(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function v(t,e){const n=e?` in ${e}`:"";throw new g("201",`No provider for ${b(t)} found${n}`)}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function w(t){return{providers:t.providers||[],imports:t.imports||[]}}function S(t){return C(t,O)||C(t,x)}function C(t,e){return t.hasOwnProperty(e)?t[e]:null}function E(t){return t&&(t.hasOwnProperty(T)||t.hasOwnProperty(I))?t[T]:null}const O=u({"\u0275prov":u}),T=u({"\u0275inj":u}),x=u({ngInjectableDef:u}),I=u({ngInjectorDef:u});var k=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let A;function R(t){const e=A;return A=t,e}function j(t,e,n){const r=S(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&k.Optional?null:void 0!==e?e:void v(l(t),"Injector")}function N(t){return{toString:t}.toString()}var P=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),D=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const L="undefined"!=typeof globalThis&&globalThis,M="undefined"!=typeof window&&window,F="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,V="undefined"!=typeof global&&global,q=L||V||M||F,U={},B=[],H=[],W=u({"\u0275cmp":u}),z=u({"\u0275dir":u}),K=u({"\u0275pipe":u}),$=u({"\u0275mod":u}),Q=u({"\u0275loc":u}),G=u({"\u0275fac":u}),Y=u({__NG_ELEMENT_ID__:u});let Z=0;function J(t){return N(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===P.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||H,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||D.Emulated,id:"c",styles:t.styles||H,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Z++,n.inputs=it(t.inputs,e),n.outputs=it(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(X):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(tt):null,n})}function X(t){return at(t)||function(t){return t[z]||null}(t)}function tt(t){return function(t){return t[K]||null}(t)}const et={};function nt(t){const e={type:t.type,bootstrap:t.bootstrap||H,declarations:t.declarations||H,imports:t.imports||H,exports:t.exports||H,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&N(()=>{et[t.id]=t.type}),e}function rt(t,e){return N(()=>{const n=ut(t,!0);n.declarations=e.declarations||H,n.imports=e.imports||H,n.exports=e.exports||H})}function it(t,e){if(null==t)return U;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ot=J;function st(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function at(t){return t[W]||null}function ut(t,e){const n=t[$]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ct=20,lt=10;function ht(t){return Array.isArray(t)&&"object"==typeof t[1]}function dt(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function pt(t){return 2==(2&t.flags)}function mt(t){return 1==(1&t.flags)}function gt(t){return null!==t.template}function yt(t,e){return t.hasOwnProperty(G)?t[G]:null}class bt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function vt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=St),wt}function wt(){const t=Ct(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===U)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function St(t,e,n,r){const i=Ct(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:U,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new bt(u&&u.currentValue,e,s===U),t[r]=e}function Ct(t){return t.__ngSimpleChanges__||null}let Et;function Ot(t){Et=t}function Tt(t){return!!t.listen}vt.ngInherit=!0;const xt={createRenderer:(t,e)=>void 0!==Et?Et:"undefined"!=typeof document?document:void 0};function It(t){for(;Array.isArray(t);)t=t[0];return t}function kt(t,e){return It(e[t])}function At(t,e){return It(e[t.index])}function Rt(t,e){return t.data[e]}function jt(t,e){const n=e[t];return ht(n)?n:n[0]}function Nt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Pt(t){return 4==(4&t[2])}function Dt(t){return 128==(128&t[2])}function Lt(t,e){return null==e?null:t[e]}function Mt(t){t[18]=0}function Ft(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Vt={lFrame:le(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qt(){return Vt.bindingsEnabled}function Ut(){return Vt.lFrame.lView}function Bt(){return Vt.lFrame.tView}function Ht(t){Vt.lFrame.contextLView=t}function Wt(){let t=zt();for(;null!==t&&64===t.type;)t=t.parent;return t}function zt(){return Vt.lFrame.currentTNode}function Kt(t,e){const n=Vt.lFrame;n.currentTNode=t,n.isParent=e}function $t(){return Vt.lFrame.isParent}function Qt(){Vt.lFrame.isParent=!1}function Gt(){return Vt.isInCheckNoChangesMode}function Yt(t){Vt.isInCheckNoChangesMode=t}function Zt(){const t=Vt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Jt(){return Vt.lFrame.bindingIndex}function Xt(){return Vt.lFrame.bindingIndex++}function te(t){const e=Vt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ee(t,e){const n=Vt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ne(e)}function ne(t){Vt.lFrame.currentDirectiveIndex=t}function re(t){const e=Vt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function ie(){return Vt.lFrame.currentQueryIndex}function oe(t){Vt.lFrame.currentQueryIndex=t}function se(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ae(t,e,n){if(n&k.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&k.Host||(r=se(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Vt.lFrame=ce();return r.currentTNode=e,r.lView=t,!0}function ue(t){const e=ce(),n=t[1];Vt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ce(){const t=Vt.lFrame,e=null===t?null:t.child;return null===e?le(t):e}function le(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function he(){const t=Vt.lFrame;return Vt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const de=he;function fe(){const t=he();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function pe(){return Vt.lFrame.selectedIndex}function me(t){Vt.lFrame.selectedIndex=t}function ge(){const t=Vt.lFrame;return Rt(t.tView,t.selectedIndex)}function ye(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function be(t,e,n){we(t,e,3,n)}function ve(t,e,n,r){(3&t[2])===n&&we(t,e,n,r)}function _e(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function we(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Se(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Se(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const Ce=-1;class Ee{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Oe(t,e,n){const r=Tt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];xe(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Te(t){return 3===t||4===t||6===t}function xe(t){return 64===t.charCodeAt(0)}function Ie(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||ke(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function ke(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ae(t){return t!==Ce}function Re(t){return 32767&t}function je(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ne=!0;function Pe(t){const e=Ne;return Ne=t,e}let De=0;function Le(t,e){const n=Fe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Me(r.data,t),Me(e,null),Me(r.blueprint,null));const i=Ve(t,e),o=t.injectorIndex;if(Ae(i)){const t=Re(i),n=je(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Me(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Fe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ve(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ce;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ce}function qe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=De++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ue(t,e,n){if(n&k.Optional)return t;v(e,"NodeInjector")}function Be(t,e,n,r){if(n&k.Optional&&void 0===r&&(r=null),0==(n&(k.Self|k.Host))){const i=t[9],o=R(void 0);try{return i?i.get(e,r,n&k.Optional):j(e,r,n&k.Optional)}finally{R(o)}}return Ue(r,e,n)}function He(t,e,n,r=k.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Y)?t[Y]:void 0;return"number"==typeof e?e>=0?255&e:ze:e}(n);if("function"==typeof o){if(!ae(e,t,r))return r&k.Host?Ue(i,n,r):Be(e,n,r,i);try{const t=o();if(null!=t||r&k.Optional)return t;v(n)}finally{de()}}else if("number"==typeof o){let i=null,s=Fe(t,e),a=Ce,u=r&k.Host?e[16][6]:null;for((-1===s||r&k.SkipSelf)&&(a=-1===s?Ve(t,e):e[s+8],a!==Ce&&Ye(r,!1)?(i=e[1],s=Re(a),e=je(a,e)):s=-1);-1!==s;){const t=e[1];if(Ge(o,s,t.data)){const t=Ke(s,e,n,i,r,u);if(t!==We)return t}a=e[s+8],a!==Ce&&Ye(r,e[1].data[s+8]===u)&&Ge(o,s,e)?(i=t,s=Re(a),e=je(a,e)):s=-1}}}return Be(e,n,r,i)}const We={};function ze(){return new Ze(Wt(),Ut())}function Ke(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=$e(a,s,n,null==r?pt(a)&&Ne:r!=s&&0!=(3&a.type),i&k.Host&&o===a);return null!==u?Qe(e,s,u,a):We}function $e(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&gt(t)&&t.type===n)return u}return null}function Qe(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Ee){const s=i;s.resolving&&function(t,e){throw new g("200",`Circular dependency in DI detected for ${t}`)}(b(o[n]));const a=Pe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?R(s.injectImpl):null;ae(t,r,k.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&R(u),Pe(a),s.resolving=!1,de()}}return i}function Ge(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ye(t,e){return!(t&k.Self||t&k.Host&&e)}class Ze{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return He(this._tNode,this._lView,t,void 0,e)}}function Je(t){return N(()=>{const e=t.prototype.constructor,n=e[G]||Xe(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[G]||Xe(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Xe(t){return m(t)?()=>{const e=Xe(p(t));return e&&e()}:yt(t)}function tn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Te(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Wt(),t)}const en="__parameters__";function nn(t,e,n){return N(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(en)?t[en]:Object.defineProperty(t,en,{value:[]})[en];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class rn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const on=new rn("AnalyzeForEntryComponents"),sn=Function;function an(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),an(r,e)):e!==t&&e.push(r)}return e}function un(t,e){t.forEach(t=>Array.isArray(t)?un(t,e):e(t))}function cn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ln(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function hn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function dn(t,e,n){let r=pn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function fn(t,e){const n=pn(t,e);if(n>=0)return t[1|n]}function pn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const mn={},gn=/\n/gm,yn="__source",bn=u({provide:String,useValue:u});let vn;function _n(t){const e=vn;return vn=t,e}function wn(t,e=k.Default){if(void 0===vn)throw new Error("inject() must be called from an injection context");return null===vn?j(t,void 0,e):vn.get(t,e&k.Optional?null:void 0,e)}function Sn(t,e=k.Default){return(A||wn)(p(t),e)}function Cn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=k.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(Sn(t,n))}else e.push(Sn(r))}return e}function En(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const On=En(nn("Inject",t=>({token:t})),-1),Tn=En(nn("Optional"),8),xn=En(nn("SkipSelf"),4);let In;function kn(t){var e;return(null===(e=function(){if(void 0===In&&(In=null,q.trustedTypes))try{In=q.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return In}())||void 0===e?void 0:e.createHTML(t))||t}class An{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Rn extends An{getTypeName(){return"HTML"}}class jn extends An{getTypeName(){return"Style"}}class Nn extends An{getTypeName(){return"Script"}}class Pn extends An{getTypeName(){return"URL"}}class Dn extends An{getTypeName(){return"ResourceURL"}}function Ln(t){return t instanceof An?t.changingThisBreaksApplicationSecurity:t}function Mn(t,e){const n=Fn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Fn(t){return t instanceof An&&t.getTypeName()||null}function Vn(t){return new Rn(t)}function qn(t){return new jn(t)}function Un(t){return new Nn(t)}function Bn(t){return new Pn(t)}function Hn(t){return new Dn(t)}class Wn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(kn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class zn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=kn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=kn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Kn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,$n=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Qn(t){return(t=String(t)).match(Kn)||t.match($n)?t:"unsafe:"+t}function Gn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Yn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Zn=Gn("area,br,col,hr,img,wbr"),Jn=Gn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Xn=Gn("rp,rt"),tr=Yn(Xn,Jn),er=Yn(Zn,Yn(Jn,Gn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yn(Xn,Gn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tr),nr=Gn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rr=Gn("srcset"),ir=Yn(nr,rr,Gn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Gn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),or=Gn("script,style,template");class sr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!er.hasOwnProperty(e))return this.sanitizedSomething=!0,!or.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!ir.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;nr[o]&&(s=Qn(s)),rr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Qn(t.trim())).join(", ")),this.buf.push(" ",e,'="',cr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();er.hasOwnProperty(e)&&!Zn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(cr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const ar=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ur=/([^\#-~ |!])/g;function cr(t){return t.replace(/&/g,"&amp;").replace(ar,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ur,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let lr;function hr(t,e){let n=null;try{lr=lr||function(t){const e=new zn(t);return function(){try{return!!(new window.DOMParser).parseFromString(kn(""),"text/html")}catch(t){return!1}}()?new Wn(e):e}(t);let r=e?String(e):"";n=lr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=lr.getInertBodyElement(r)}while(r!==o);return kn((new sr).sanitizeChildren(dr(n)||n))}finally{if(n){const t=dr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function dr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var fr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function pr(t){const e=function(){const t=Ut();return t&&t[12]}();return e?e.sanitize(fr.URL,t)||"":Mn(t,"URL")?Ln(t):Qn(y(t))}function mr(t){return t.ngDebugContext}function gr(t){return t.ngOriginalError}function yr(t,...e){t.error(...e)}class br{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||yr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?mr(t)?mr(t):this._findContext(gr(t)):null}_findOriginalError(t){let e=gr(t);for(;e&&gr(e);)e=gr(e);return e}}function vr(t,e){t.__ngContext__=e}const _r=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(q))();function wr(t){return{name:"window",target:t.ownerDocument.defaultView}}function Sr(t){return{name:"document",target:t.ownerDocument}}function Cr(t){return t instanceof Function?t():t}var Er=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Or(t,e){return(void 0)(t,e)}function Tr(t){const e=t[3];return dt(e)?e[3]:e}function xr(t){return kr(t[13])}function Ir(t){return kr(t[4])}function kr(t){for(;null!==t&&!dt(t);)t=t[4];return t}function Ar(t,e,n,r,i){if(null!=r){let o,s=!1;dt(r)?o=r:ht(r)&&(s=!0,r=r[0]);const a=It(r);0===t&&null!==n?null==i?Fr(e,n,a):Mr(e,n,a,i||null,!0):1===t&&null!==n?Mr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=qr(t,e);r&&function(t,e,n,r){Tt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==It(n)&&Ar(e,t,r,o,i);for(let s=lt;s<n.length;s++){const i=n[s];Qr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Rr(t,e,n){return Tt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function jr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ft(i,-1)),n.splice(r,1)}function Nr(t,e){if(t.length<=lt)return;const n=lt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&jr(o,r),e>0&&(t[n-1][4]=r[4]);const s=ln(t,lt+e);Qr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Pr(t,e){if(!(256&e[2])){const n=e[11];Tt(n)&&n.destroyNode&&Qr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Dr(t[1],t);for(;e;){let n=null;if(ht(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ht(e)&&Dr(e[1],e),e=e[3];null===e&&(e=t),ht(e)&&Dr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Dr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ee)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):It(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Tt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&dt(e[3])){n!==e[3]&&jr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Lr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===D.None||e===D.Emulated)return null}return At(r,n)}(t,e.parent,n)}function Mr(t,e,n,r,i){Tt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Fr(t,e,n){Tt(t)?t.appendChild(e,n):e.appendChild(n)}function Vr(t,e,n,r,i){null!==r?Mr(t,e,n,r,i):Fr(t,e,n)}function qr(t,e){return Tt(t)?t.parentNode(e):e.parentNode}function Ur(t,e,n){return Br(t,e,n)}let Br=function(t,e,n){return 40&t.type?At(t,n):null};function Hr(t,e,n,r){const i=Lr(t,r,e),o=e[11],s=Ur(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Vr(o,i,n[a],s,!1);else Vr(o,i,n,s,!1)}function Wr(t,e){if(null!==e){const n=e.type;if(3&n)return At(e,t);if(4&n)return Kr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Wr(t,n);{const n=t[e.index];return dt(n)?Kr(-1,n):It(n)}}if(32&n)return Or(e,t)()||It(t[e.index]);{const n=zr(t,e);return null!==n?Array.isArray(n)?n[0]:Wr(Tr(t[16]),n):Wr(t,e.next)}}return null}function zr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Kr(t,e){const n=lt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Wr(t,r)}return e[7]}function $r(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&vr(It(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)$r(t,e,n.child,r,i,o,!1),Ar(e,t,i,a,o);else if(32&u){const s=Or(n,r);let u;for(;u=s();)Ar(e,t,i,u,o);Ar(e,t,i,a,o)}else 16&u?Gr(t,e,r,n,i,o):Ar(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Qr(t,e,n,r,i,o){$r(n,r,t.firstChild,e,i,o,!1)}function Gr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Ar(e,t,i,a[u],o);else $r(t,e,a,s[3],i,o,!0)}function Yr(t,e,n){Tt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Zr(t,e,n){Tt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Jr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Xr="ng-template";function ti(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Jr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ei(t){return 4===t.type&&t.value!==Xr}function ni(t,e,n){return e===(4!==t.type||n?t.value:Xr)}function ri(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Te(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!ni(t,u,n)||""===u&&1===e.length){if(ii(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!ti(t.attrs,c,n)){if(ii(r))return!1;s=!0}continue}const l=oi(8&r?"class":u,i,ei(t),n);if(-1===l){if(ii(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Jr(e,c,0)||2&r&&c!==t){if(ii(r))return!1;s=!0}}}}else{if(!s&&!ii(r)&&!ii(u))return!1;if(s&&ii(u))continue;s=!1,r=u|1&r}}return ii(r)||s}function ii(t){return 0==(1&t)}function oi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function si(t,e,n=!1){for(let r=0;r<e.length;r++)if(ri(t,e[r],n))return!0;return!1}function ai(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function ui(t,e){return t?":not("+e.trim()+")":e}function ci(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||ii(s)||(e+=ui(o,i),i=""),r=s,o=o||!ii(r);n++}return""!==i&&(e+=ui(o,i)),e}const li={};function hi(t){di(Bt(),Ut(),pe()+t,Gt())}function di(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&be(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ve(e,r,0,n)}me(n)}function fi(t,e){return t<<17|e<<2}function pi(t){return t>>17&32767}function mi(t){return 2|t}function gi(t){return(131068&t)>>2}function yi(t,e){return-131069&t|e<<2}function bi(t){return 1|t}function vi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];oe(i),n.contentQueries(2,e[o],o)}}}function _i(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Mt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function wi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=zt(),s=$t(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Vt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Vt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Kt(o,!0),o}function Si(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Ci(t,e,n){ue(e);try{const r=t.viewQuery;null!==r&&Ji(1,r,n);const i=t.template;null!==i&&Ti(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&vi(t,e),t.staticViewQueries&&Ji(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)$i(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,fe()}}function Ei(t,e,n,r){const i=e[2];if(256==(256&i))return;ue(e);const o=Gt();try{Mt(e),Vt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ti(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&be(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ve(e,n,0,null),_e(e,0)}if(function(t){for(let e=xr(t);null!==e;e=Ir(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ft(r,1),n[2]|=1024}}}(e),function(t){for(let e=xr(t);null!==e;e=Ir(e))for(let t=lt;t<e.length;t++){const n=e[t],r=n[1];Dt(n)&&Ei(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&vi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&be(e,n)}else{const n=t.contentHooks;null!==n&&ve(e,n,1),_e(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)me(~r);else{const i=r,o=n[++t],s=n[++t];ee(o,i),s(2,e[i])}}}finally{me(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)zi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ji(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&be(e,n)}else{const n=t.viewHooks;null!==n&&ve(e,n,2),_e(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ft(e[3],-1))}finally{fe()}}function Oi(t,e,n,r){const i=e[10],o=!Gt(),s=Pt(e);try{o&&!s&&i.begin&&i.begin(),s&&Ci(t,e,r),Ei(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Ti(t,e,n,r,i){const o=pe(),s=2&r;try{me(-1),s&&e.length>ct&&di(t,e,ct,Gt()),n(r,i)}finally{me(o)}}function xi(t,e,n){qt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Le(n,e),vr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=gt(r);o&&Ui(e,n,r);const u=Qe(e,t,a,n);vr(u,e),null!==s&&Bi(0,a-i,u,r,0,s),o&&(jt(n.index,e)[8]=u)}}(t,e,n,At(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Vt.lFrame.currentDirectiveIndex;try{me(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ne(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Li(r,i)}}finally{me(-1),ne(s)}}(t,e,n))}function Ii(t,e,n=At){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function ki(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ai(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ai(t,e,n,r,i,o,s,a,u,c){const l=ct+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:li);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Ri(t,e,n,r){const i=to(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&eo(t).push(r,i.length-1))}function ji(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ni(t,e,n,r,i,o,s,a){const u=At(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(io(t,n,c,r,i),pt(e)&&function(t,e){const n=jt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Tt(o)?o.setProperty(u,r,i):xe(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Pi(t,e,n,r){let i=!1;if(qt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];si(n,s.selectors,!1)&&(i||(i=[]),qe(Le(n,e),t,s.type),gt(s)?(Mi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Vi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Si(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ie(n.mergedAttrs,c.hostAttrs),qi(t,n,e,u,c),Fi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||ei(e)?null:Hi(n,i);o.push(c),s=ji(n,u,s),a=ji(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new g("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ie(n.mergedAttrs,n.attrs),i}function Di(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Li(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Mi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Fi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gt(e)&&(n[""]=t)}}function Vi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function qi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=yt(i.type)),s=new Ee(o,gt(i),null);t.blueprint[r]=s,n[r]=s,Di(t,e,0,r,Si(t,n,i.hostVars,li),i)}function Ui(t,e,n){const r=At(e,t),i=ki(n),o=t[10],s=Qi(t,_i(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Bi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Hi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Wi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function zi(t,e){const n=jt(e,t);if(Dt(n)){const t=n[1];80&n[2]?Ei(t,n,t.template,n[8]):n[5]>0&&Ki(n)}}function Ki(t){for(let n=xr(t);null!==n;n=Ir(n))for(let t=lt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Ei(t,e,t.template,e[8])}else e[5]>0&&Ki(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=jt(e[n],t);Dt(r)&&r[5]>0&&Ki(r)}}function $i(t,e){const n=jt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Ci(r,n,n[8])}function Qi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Gi(t){for(;t;){t[2]|=64;const e=Tr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Yi(t,e,n){const r=e[10];r.begin&&r.begin();try{Ei(t,e,t.template,n)}catch(i){throw ro(e,i),i}finally{r.end&&r.end()}}function Zi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Nt(n),i=r[1];Oi(i,r,i.template,n)}}(t[8])}function Ji(t,e,n){oe(0),e(t,n)}const Xi=(()=>Promise.resolve(null))();function to(t){return t[7]||(t[7]=[])}function eo(t){return t.cleanup||(t.cleanup=[])}function no(t,e,n){return(null===t||gt(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function ro(t,e){const n=t[9],r=n?n.get(br,null):null;r&&r.handleError(e)}function io(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function oo(t,e,n){const r=kt(e,t);!function(t,e,n){Tt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function so(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const ao=new rn("INJECTOR",-1);class uo{get(t,e=mn){if(e===mn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const co=new rn("Set Injector scope."),lo={},ho={},fo=[];let po;function mo(){return void 0===po&&(po=new uo),po}function go(t,e=null,n=null,r){return new yo(t,n,e||mo(),r)}class yo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&un(e,n=>this.processProvider(n,t,e)),un([t],t=>this.processInjectorType(t,[],i)),this.records.set(ao,_o(void 0,this));const o=this.records.get(co);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=mn,n=k.Default){this.assertNotDestroyed();const r=_n(this);try{if(!(n&k.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof rn)&&S(t);e=n&&this.injectableDefInScope(n)?_o(bo(t),lo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&k.Self?mo():this.parent).get(t,e=n&k.Optional&&e===mn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[yn]&&i.unshift(e[yn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(gn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{_n(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=E(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=E(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{un(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];un(r,t=>this.processProvider(t,n,r||fo))}}this.injectorDefTypes.add(o);const a=yt(o)||(()=>new o);this.records.set(o,_o(a,lo));const u=r.providers;if(null!=u&&!s){const e=t;un(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=So(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return wo(t)?_o(void 0,t.useValue):_o(vo(t),lo)}(t);if(So(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=_o(void 0,lo,!0),e.factory=()=>Cn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===lo&&(e.value=ho,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function bo(t){const e=S(t),n=null!==e?e.factory:yt(t);if(null!==n)return n;if(t instanceof rn)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=hn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[O]||t[x]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function vo(t,e,n){let r;if(So(t)){const e=p(t);return yt(e)||bo(e)}if(wo(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Cn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Sn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return yt(e)||bo(e);r=()=>new e(...Cn(t.deps))}var i;return r}function _o(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function wo(t){return null!==t&&"object"==typeof t&&bn in t}function So(t){return"function"==typeof t}const Co=function(t,e,n){return function(t,e=null,n=null,r){const i=go(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Eo=(()=>{class t{static create(t,e){return Array.isArray(t)?Co(t,e,""):Co(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=mn,t.NULL=new uo,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>Sn(ao)}),t.__NG_ELEMENT_ID__=-1,t})();function Oo(t,e){ye(Nt(t)[1],Wt())}function To(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(gt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=xo(t.inputs),e.declaredInputs=xo(t.declaredInputs),e.outputs=xo(t.outputs);const n=i.hostBindings;n&&Ao(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Io(t,o),s&&ko(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),gt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===To&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ie(i.hostAttrs,n=Ie(n,i.hostAttrs))}}(r)}function xo(t){return t===U?{}:t===H?[]:t}function Io(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function ko(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Ao(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Ro=null;function jo(){if(!Ro){const t=q.Symbol;if(t&&t.iterator)Ro=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ro=n)}}}return Ro}function No(t){return!!Po(t)&&(Array.isArray(t)||!(t instanceof Map)&&jo()in t)}function Po(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Do(t,e,n){return t[e]=n}function Lo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Mo(t,e,n,r){const i=Lo(t,e,n);return Lo(t,e+1,r)||i}function Fo(t,e,n,r,i,o){const s=Mo(t,e,n,r);return Mo(t,e+2,i,o)||s}function Vo(t,e,n,r){const i=Ut();return Lo(i,Xt(),e)&&(Bt(),function(t,e,n,r,i,o){const s=At(t,e);!function(t,e,n,r,i,o,s){if(null==o)Tt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?y(o):s(o,r||"",i);Tt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(ge(),i,t,e,n,r)),Vo}function qo(t,e,n,r){return Lo(t,Xt(),n)?e+y(n)+r:li}function Uo(t,e,n,r,i,o,s,a){const u=Ut(),c=Bt(),l=t+ct,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=wi(e,t,4,s||null,Lt(c,a));Pi(e,n,l,Lt(c,u)),ye(e,l);const h=l.tViews=Ai(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Kt(h,!1);const d=u[11].createComment("");Hr(c,u,d,h),vr(d,u),Qi(u,u[l]=Wi(d,u,d,h)),mt(h)&&xi(c,u,h),null!=s&&Ii(u,h,a)}function Bo(t){return function(t,e){return t[e]}(Vt.lFrame.contextLView,ct+t)}function Ho(t,e=k.Default){const n=Ut();return null===n?Sn(t,e):He(Wt(),n,p(t),e)}function Wo(t,e,n){const r=Ut();return Lo(r,Xt(),e)&&Ni(Bt(),ge(),r,t,e,r[11],n,!1),Wo}function zo(t,e,n,r,i){const o=i?"class":"style";io(t,n,e.inputs[o],o,r)}function Ko(t,e,n,r){const i=Ut(),o=Bt(),s=ct+t,a=i[11],u=i[s]=Rr(a,e,Vt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=wi(e,t,2,i,Lt(a,o));return Pi(e,n,u,Lt(a,s)),null!==u.attrs&&so(u,u.attrs,!1),null!==u.mergedAttrs&&so(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Kt(c,!0);const l=c.mergedAttrs;null!==l&&Oe(a,u,l);const h=c.classes;null!==h&&Zr(a,u,h);const d=c.styles;null!==d&&Yr(a,u,d),64!=(64&c.flags)&&Hr(o,i,u,c),0===Vt.lFrame.elementDepthCount&&vr(u,i),Vt.lFrame.elementDepthCount++,mt(c)&&(xi(o,i,c),function(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&Ii(i,c)}function $o(){let t=Wt();$t()?Qt():(t=t.parent,Kt(t,!1));const e=t;Vt.lFrame.elementDepthCount--;const n=Bt();n.firstCreatePass&&(ye(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&zo(n,e,Ut(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&zo(n,e,Ut(),e.stylesWithoutHost,!1)}function Qo(t,e,n,r){Ko(t,e,n,r),$o()}function Go(){return Ut()}function Yo(t){return!!t&&"function"==typeof t.then}function Zo(t){return!!t&&"function"==typeof t.subscribe}const Jo=Zo;function Xo(t,e,n=!1,r){const i=Ut(),o=Bt(),s=Wt();return es(o,i,i[11],s,t,e,n,r),Xo}function ts(t,e,n=!1,r){const i=Wt(),o=Ut(),s=Bt();return es(s,o,no(re(s.data),i,o),i,t,e,n,r),ts}function es(t,e,n,r,i,o,s=!1,a){const u=mt(r),c=t.firstCreatePass&&eo(t),l=to(e);let h=!0;if(3&r.type){const d=At(r,e),f=a?a(d):U,p=f.target||d,m=l.length,g=a?t=>a(It(t[r.index])).target:r.index;if(Tt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=rs(r,e,0,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,g,m,m+1)}}else o=rs(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,m,s)}else o=rs(r,e,0,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}function ns(t,e,n,r){try{return!1!==n(r)}catch(i){return ro(t,i),!1}}function rs(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?jt(t.index,e):e;0==(32&e[2])&&Gi(s);let a=ns(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=ns(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function is(t=1){return function(t){return(Vt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Vt.lFrame.contextLView))[8]}(t)}function os(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?si(t,o,!0):ai(r,o))return i}else n=i}return n}function ss(t){const e=Ut()[16][6];if(!e.projection){const n=e.projection=hn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?os(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function as(t,e=0,n){const r=Ut(),i=Bt(),o=wi(i,ct+t,16,null,n||null);null===o.projection&&(o.projection=e),Qt(),64!=(64&o.flags)&&function(t,e,n){Gr(e[11],0,e,n,Lr(t,n,e),Ur(n.parent||e[6],n,e))}(i,r,o)}function us(t,e,n){return cs(t,"",e,"",n),us}function cs(t,e,n,r,i){const o=Ut(),s=qo(o,e,n,r);return s!==li&&Ni(Bt(),ge(),o,t,s,o[11],i,!1),cs}function ls(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?pi(o):gi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];hs(t[a],e)&&(u=!0,t[a+1]=r?bi(n):mi(n)),a=r?pi(n):gi(n)}u&&(t[n+1]=r?mi(o):bi(o))}function hs(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&pn(t,e)>=0}const ds={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function fs(t){return t.substring(ds.key,ds.keyEnd)}function ps(t,e){const n=ds.textEnd;return n===e?-1:(e=ds.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ds.key=e,n),ms(t,e,n))}function ms(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function gs(t,e,n){return _s(t,e,n,!1),gs}function ys(t,e){return _s(t,e,null,!0),ys}function bs(t){ws(dn,vs,t,!0)}function vs(t,e){for(let n=function(t){return function(t){ds.key=0,ds.keyEnd=0,ds.value=0,ds.valueEnd=0,ds.textEnd=t.length}(t),ps(t,ms(t,0,ds.textEnd))}(e);n>=0;n=ps(e,n))dn(t,fs(e),!0)}function _s(t,e,n,r){const i=Ut(),o=Bt(),s=te(2);o.firstUpdatePass&&Cs(o,t,s,r),e!==li&&Lo(i,s,e)&&Ts(o,o.data[pe()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Ln(t)))),t}(e,n),r,s)}function ws(t,e,n,r){const i=Bt(),o=te(2);i.firstUpdatePass&&Cs(i,null,o,r);const s=Ut();if(n!==li&&Lo(s,o,n)){const a=i.data[pe()];if(ks(a,r)&&!Ss(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=h(t,n||"")),zo(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===li&&(i=B);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const d=u<i.length?i[u+1]:void 0,f=c<o.length?o[c+1]:void 0;let p,m=null;l===h?(u+=2,c+=2,d!==f&&(m=h,p=f)):null===h||null!==l&&l<h?(u+=2,m=l):(c+=2,m=h,p=f),null!==m&&Ts(t,e,n,r,m,p,s,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return B;const r=[],i=Ln(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Ss(t,e){return e>=t.expandoStartIndex}function Cs(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[pe()],s=Ss(t,n);ks(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=re(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Os(n=Es(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Es(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==gi(r))return t[pi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Es(null,t,e,n[1],r),n=Os(n,e.attrs,r),function(t,e,n,r){t[pi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Os(r,t[o].hostAttrs,n);return Os(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=pi(s),u=gi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||pn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=pi(t[a+1]);t[r+1]=fi(e,a),0!==e&&(t[e+1]=yi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=fi(a,0),0!==a&&(t[a+1]=yi(t[a+1],r)),a=r;else t[r+1]=fi(u,0),0===a?a=r:t[u+1]=yi(t[u+1],r),u=r;l&&(t[r+1]=mi(t[r+1])),ls(t,c,r,!0),ls(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&pn(o,e)>=0&&(n[r+1]=bi(n[r+1]))}(e,c,t,r,o),s=fi(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Es(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Os(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Os(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),dn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Ts(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Is(1==(1&c)?xs(u,e,n,i,gi(c),s):void 0)||(Is(o)||2==(2&c)&&(o=xs(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Tt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Er.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Er.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,kt(pe(),n),i,o))}function xs(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===li&&(l=c?B:void 0);let h=c?fn(l,r):u===r?l:void 0;if(o&&!Is(h)&&(h=fn(e,r)),Is(h)&&(a=h,s))return a;const d=t[i+1];i=s?pi(d):gi(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=fn(t,r))}return a}function Is(t){return void 0!==t}function ks(t,e){return 0!=(t.flags&(e?16:32))}function As(t,e=""){const n=Ut(),r=Bt(),i=t+ct,o=r.firstCreatePass?wi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Tt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Hr(r,n,s,o),Kt(o,!1)}function Rs(t){return js("",t,""),Rs}function js(t,e,n){const r=Ut(),i=qo(r,t,e,n);return i!==li&&oo(r,pe(),i),js}function Ns(t,e,n,r,i,o,s,a,u,c,l){const h=Ut(),d=function(t,e,n,r,i,o,s,a,u,c,l,h){const d=Jt();let f=Fo(t,d,n,i,s,u);return f=Lo(t,d+4,l)||f,te(5),f?e+y(n)+r+y(i)+o+y(s)+a+y(u)+c+y(l)+h:li}(h,t,e,n,r,i,o,s,a,u,c,l);return d!==li&&oo(h,pe(),d),Ns}function Ps(t,e,n){ws(dn,vs,qo(Ut(),t,e,n),!0)}function Ds(t,e,n,r,i){ws(dn,vs,function(t,e,n,r,i,o){const s=Mo(t,Jt(),n,i);return te(2),s?e+y(n)+r+y(i)+o:li}(Ut(),t,e,n,r,i),!0)}function Ls(t,e,n,r,i,o,s,a,u){ws(dn,vs,function(t,e,n,r,i,o,s,a,u,c){const l=Fo(t,Jt(),n,i,s,u);return te(4),l?e+y(n)+r+y(i)+o+y(s)+a+y(u)+c:li}(Ut(),t,e,n,r,i,o,s,a,u),!0)}function Ms(t,e,n){const r=Ut();return Lo(r,Xt(),e)&&Ni(Bt(),ge(),r,t,e,r[11],n,!0),Ms}function Fs(t,e,n){const r=Ut();if(Lo(r,Xt(),e)){const i=Bt(),o=ge();Ni(i,o,r,t,e,no(re(i.data),o,r),n,!0)}return Fs}const Vs=void 0;var qs=["en",[["a","p"],["AM","PM"],Vs],[["AM","PM"],Vs,Vs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vs,"{1} 'at' {0}",Vs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Us={};function Bs(t,e,n){"string"!=typeof e&&(n=e,e=t[$s.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Us[e]=t,n&&(Us[e][$s.ExtraData]=n)}function Hs(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ks(e);if(n)return n;const r=e.split("-")[0];if(n=Ks(r),n)return n;if("en"===r)return qs;throw new Error(`Missing locale data for the locale "${t}".`)}function Ws(t){return Hs(t)[$s.CurrencyCode]||null}function zs(t){return Hs(t)[$s.PluralCase]}function Ks(t){return t in Us||(Us[t]=q.ng&&q.ng.common&&q.ng.common.locales&&q.ng.common.locales[t]),Us[t]}var $s=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Qs="en-US";let Gs=Qs;function Ys(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Gs=t.toLowerCase().replace(/_/g,"-"))}function Zs(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)Zs(t[o],e,n,r,i);else{const o=Bt(),s=Ut();let a=So(t)?t:p(t.provide),u=vo(t);const c=Wt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(So(t)||!t.multi){const r=new Ee(u,i,Ho),f=ta(a,e,i?l:l+d,h);-1===f?(qe(Le(c,s),o,a),Js(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=ta(a,e,l+d,h),p=ta(a,e,l,l+d),m=f>=0&&n[f],g=p>=0&&n[p];if(i&&!g||!i&&!m){qe(Le(c,s),o,a);const l=function(t,e,n,r,i){const o=new Ee(t,n,Ho);return o.multi=[],o.index=e,o.componentProviders=0,Xs(o,i,r&&!n),o}(i?na:ea,n.length,i,r,u);!i&&g&&(n[p].providerFactory=l),Js(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Js(o,t,f>-1?f:p,Xs(n[i?p:f],u,!i&&r));!i&&r&&g&&n[p].componentProviders++}}}function Js(t,e,n,r){const i=So(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Xs(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ta(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ea(t,e,n,r){return ra(this.multi,[])}function na(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Qe(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ra(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ra(i,o);return o}function ra(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ia(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Bt();if(r.firstCreatePass){const i=gt(t);Zs(n,r.data,r.blueprint,i,!0),Zs(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class oa{}class sa{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let aa=(()=>{class t{}return t.NULL=new sa,t})();function ua(...t){}function ca(t,e){return new ha(At(t,e))}const la=function(){return ca(Wt(),Ut())};let ha=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=la,t})();function da(t){return t instanceof ha?t.nativeElement:t}class fa{}let pa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ma(),t})();const ma=function(){const t=Ut(),e=jt(Wt().index,t);return function(t){return t[11]}(ht(e)?e:t)};let ga=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class ya{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ba=new ya("11.2.9");class va{constructor(){}supports(t){return No(t)}create(t){return new wa(t)}}const _a=(t,e)=>e;class wa{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||_a}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Oa(n,r,i)?e:n,s=Oa(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!No(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[jo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Sa(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ea),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ea),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Sa{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ca{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ea{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ca,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Oa(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ta{constructor(){}supports(t){return t instanceof Map||Po(t)}create(){return new xa}}class xa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Po(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ia(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ia{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ka(){return new Aa([new va])}let Aa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ka()),deps:[[t,new xn,new Tn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:ka}),t})();function Ra(){return new ja([new Ta])}let ja=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ra()),deps:[[t,new xn,new Tn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Ra}),t})();function Na(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(It(o)),dt(o))for(let t=lt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Na(e[1],e,n,r)}const s=n.type;if(8&s)Na(t,e,n.child,r);else if(32&s){const t=Or(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=zr(e,n);if(Array.isArray(t))r.push(...t);else{const n=Tr(e[16]);Na(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Pa{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Na(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(dt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Nr(t,n),ln(e,n))}this._attachedToViewContainer=!1}Pr(this._lView[1],this._lView)}onDestroy(t){Ri(this._lView[1],this._lView,null,t)}markForCheck(){Gi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Yi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Yt(!0);try{Yi(t,e,n)}finally{Yt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Qr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Da extends Pa{constructor(t){super(t),this._view=t}detectChanges(){Zi(this._view)}checkNoChanges(){!function(t){Yt(!0);try{Zi(t)}finally{Yt(!1)}}(this._view)}get context(){return null}}const La=Fa;let Ma=(()=>{class t{}return t.__NG_ELEMENT_ID__=La,t.__ChangeDetectorRef__=!0,t})();function Fa(t=!1){return function(t,e,n){if(!n&&pt(t)){const n=jt(t.index,e);return new Pa(n,n)}return 47&t.type?new Pa(e[16],e):null}(Wt(),Ut(),t)}const Va=[new Ta],qa=new Aa([new va]),Ua=new ja(Va),Ba=function(){return Ka(Wt(),Ut())};let Ha=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ba,t})();const Wa=Ha,za=class extends Wa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=_i(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Ci(e,n,t),new Pa(n)}};function Ka(t,e){return 4&t.type?new za(e,t,ca(t,e)):null}class $a{}class Qa{}const Ga=function(){return eu(Wt(),Ut())};let Ya=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ga,t})();const Za=Ya,Ja=class extends Za{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return ca(this._hostTNode,this._hostLView)}get injector(){return new Ze(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ve(this._hostTNode,this._hostLView);if(Ae(t)){const e=je(t,this._hostLView),n=Re(t);return new Ze(e[1].data[n+8],e)}return new Ze(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Xa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-lt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get($a,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(dt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ja(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=lt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-lt?(e[4]=n[i],cn(n,lt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Kr(i,o),a=n[11],u=qr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Qr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),cn(tu(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Xa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Nr(this._lContainer,e);n&&(ln(tu(this._lContainer),e),Pr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Nr(this._lContainer,e);return n&&null!=ln(tu(this._lContainer),e)?new Pa(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Xa(t){return t[8]}function tu(t){return t[8]||(t[8]=[])}function eu(t,e){let n;const r=e[t.index];if(dt(r))n=r;else{let i;if(8&t.type)i=It(r);else{const n=e[11];i=n.createComment("");const r=At(t,e);Mr(n,qr(n,r),i,function(t,e){return Tt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Wi(r,e,i,t),Qi(e,n)}return new Ja(n,t,e)}const nu={};class ru extends aa{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=at(t);return new su(e,this.ngModule)}}function iu(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ou=new rn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>_r});class su extends oa{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ci).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return iu(this.componentDef.inputs)}get outputs(){return iu(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,nu,i);return o!==nu||r===nu?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(fa,xt),s=i.get(ga,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Tt(t))return t.selectRootElement(e,n===D.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Rr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:_r,clean:Xi,playerHandler:null,flags:0},d=Ai(0,null,null,1,0,null,null,null,null,null),f=_i(null,d,h,l,null,null,o,a,s,i);let p,m;ue(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=wi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(so(a,u,!0),null!==t&&(Oe(i,t,u),null!==a.classes&&Zr(i,t,a.classes),null!==a.styles&&Yr(i,t,a.styles)));const c=r.createRenderer(t,e),l=_i(n,ki(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(qe(Le(a,n),s,e.type),Mi(s,a),Vi(a,n.length,1)),Qi(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)Oe(a,c,["ng-version",ba.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!ii(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Oe(a,c,t),e&&e.length>0&&Zr(a,c,e.join(" "))}if(m=Rt(d,ct),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Wt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),qi(t,r,e,Si(t,e,1,null),n));const i=Qe(e,t,r.directiveStart,r);vr(i,e);const o=At(r,e);return o&&vr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Wt();e.contentQueries(1,s,t.directiveStart)}const a=Wt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(me(a.index),Di(n[1],a,0,a.directiveStart,a.directiveEnd,e),Li(e,s)),s}(t,this.componentDef,f,h,[Oo]),Ci(d,f,null)}finally{fe()}return new au(this.componentType,p,ca(m,f),f,m)}}class au extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Da(r),this.componentType=t}get injector(){return new Ze(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const uu=new Map;class cu extends $a{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ru(this);const n=ut(t),r=t[Q]||null;r&&Ys(r),this._bootstrapComponents=Cr(n.bootstrap),this._r3Injector=go(t,e,[{provide:$a,useValue:this},{provide:aa,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Eo.THROW_IF_NOT_FOUND,n=k.Default){return t===Eo||t===$a||t===ao?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class lu extends Qa{constructor(t){super(),this.moduleType=t,null!==ut(t)&&function(t){const e=new Set;!function t(n){const r=ut(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,uu.get(i),n),uu.set(i,n));const o=Cr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new cu(this.moduleType,t)}}function hu(t,e,n,r){return function(t,e,n,r,i,o){const s=e+n;return Lo(t,s,i)?Do(t,s+1,o?r.call(o,i):r(i)):gu(t,s+1)}(Ut(),Zt(),t,e,n,r)}function du(t,e,n,r,i){return function(t,e,n,r,i,o,s){const a=e+n;return Mo(t,a,i,o)?Do(t,a+2,s?r.call(s,i,o):r(i,o)):gu(t,a+2)}(Ut(),Zt(),t,e,n,r,i)}function fu(t,e,n,r,i,o){return function(t,e,n,r,i,o,s,a){const u=e+n;return function(t,e,n,r,i){const o=Mo(t,e,n,r);return Lo(t,e+2,i)||o}(t,u,i,o,s)?Do(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):gu(t,u+3)}(Ut(),Zt(),t,e,n,r,i,o)}function pu(t,e,n,r,i,o,s){return function(t,e,n,r,i,o,s,a,u){const c=e+n;return Fo(t,c,i,o,s,a)?Do(t,c+4,u?r.call(u,i,o,s,a):r(i,o,s,a)):gu(t,c+4)}(Ut(),Zt(),t,e,n,r,i,o,s)}function mu(t,e,n,r,i,o,s,a){const u=Zt()+t,c=Ut(),l=Fo(c,u,n,r,i,o);return Lo(c,u+4,s)||l?Do(c,u+5,a?e.call(a,n,r,i,o,s):e(n,r,i,o,s)):function(t,e){return t[e]}(c,u+5)}function gu(t,e){const n=t[e];return n===li?void 0:n}const yu=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function bu(){return this._results[jo()]()}class vu{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=jo(),n=vu.prototype;n[e]||(n[e]=bu)}get changes(){return this._changes||(this._changes=new yu)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=an(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class _u{constructor(t){this.queryList=t,this.matches=null}clone(){return new _u(this.queryList)}setDirty(){this.queryList.setDirty()}}class wu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new wu(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Du(t,e).matches&&this.queries[e].setDirty()}}class Su{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Cu{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Cu(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Eu{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Eu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ou(e,i)),this.matchTNodeWithReadOption(t,e,$e(e,t,i,!1,!1))}else n===Ha?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,$e(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ha||r===Ya||r===Ha&&4&e.type)this.addMatch(e.index,-2);else{const n=$e(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ou(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Tu(t,e,n,r){return-1===n?function(t,e){return 11&t.type?ca(t,e):4&t.type?Ka(t,e):null}(e,t):-2===n?function(t,e,n){return n===ha?ca(e,t):n===Ha?Ka(e,t):n===Ya?eu(e,t):void 0}(t,e,r):Qe(t,t[1],n,e)}function xu(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Tu(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Iu(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=xu(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=lt;t<s.length;t++){const e=s[t];e[17]===e[3]&&Iu(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Iu(n[1],n,i,r)}}}}}return r}function ku(t){const e=Ut(),n=Bt(),r=ie();oe(r+1);const i=Du(n,r);if(t.dirty&&Pt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Iu(n,e,r,[]):xu(n,e,i,r);t.reset(o,da),t.notifyOnChanges()}return!0}return!1}function Au(t,e,n){const r=Bt();r.firstCreatePass&&(Pu(r,new Su(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Nu(r,Ut(),e)}function Ru(t,e,n,r){const i=Bt();if(i.firstCreatePass){const o=Wt();Pu(i,new Su(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Nu(i,Ut(),n)}function ju(){return t=Ut(),e=ie(),t[19].queries[e].queryList;var t,e}function Nu(t,e,n){const r=new vu(4==(4&n));Ri(t,e,r,r.destroy),null===e[19]&&(e[19]=new wu),e[19].queries.push(new _u(r))}function Pu(t,e,n){null===t.queries&&(t.queries=new Cu),t.queries.track(new Eu(e,n))}function Du(t,e){return t.queries.getByIndex(e)}function Lu(t=k.Default){const e=Fa(!0);if(null!=e||t&k.Optional)return e;v("ChangeDetectorRef")}const Mu=new rn("Application Initializer");let Fu=(()=>{class t{constructor(t){this.appInits=t,this.resolve=ua,this.reject=ua,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Yo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Sn(Mu,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Vu=new rn("AppId"),qu={provide:Vu,useFactory:function(){return`${Uu()}${Uu()}${Uu()}`},deps:[]};function Uu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Bu=new rn("Platform Initializer"),Hu=new rn("Platform ID"),Wu=new rn("appBootstrapListener");let zu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Ku=new rn("LocaleId"),$u=new rn("DefaultCurrencyCode");class Qu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Gu=function(t){return new lu(t)},Yu=Gu,Zu=function(t){return Promise.resolve(Gu(t))},Ju=function(t){const e=Gu(t),n=Cr(ut(t).declarations).reduce((t,e)=>{const n=at(e);return n&&t.push(new su(n)),t},[]);return new Qu(e,n)},Xu=Ju,tc=function(t){return Promise.resolve(Ju(t))};let ec=(()=>{class t{constructor(){this.compileModuleSync=Yu,this.compileModuleAsync=Zu,this.compileModuleAndAllComponentsSync=Xu,this.compileModuleAndAllComponentsAsync=tc}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const nc=(()=>Promise.resolve(0))();function rc(t){"undefined"==typeof Zone?nc.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ic{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yu(!1),this.onMicrotaskEmpty=new yu(!1),this.onStable=new yu(!1),this.onError=new yu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=q.requestAnimationFrame,e=q.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(q,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ac(t),sc(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ac(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return uc(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),cc(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return uc(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),cc(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,ac(t),sc(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ic.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ic.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,oc,ua,ua);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const oc={};function sc(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ac(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function uc(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function cc(t){t._nesting--,sc(t)}class lc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yu,this.onMicrotaskEmpty=new yu,this.onStable=new yu,this.onError=new yu}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let hc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ic.assertNotInAngularZone(),rc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())rc(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Sn(ic))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),dc=(()=>{class t{constructor(){this._applications=new Map,gc.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return gc.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class fc{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function pc(t){gc=t}let mc,gc=new fc,yc=!0,bc=!1;function vc(){return bc=!0,yc}function _c(){if(bc)throw new Error("Cannot enable prod mode after platform setup.");yc=!1}const wc=new rn("AllowMultipleToken");class Sc{constructor(t,e){this.name=t,this.token=e}}function Cc(t,e,n=[]){const r=`Platform: ${e}`,i=new rn(r);return(e=[])=>{let o=Ec();if(!o||o.injector.get(wc,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:co,useValue:"platform"});!function(t){if(mc&&!mc.destroyed&&!mc.injector.get(wc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");mc=t.get(Oc);const e=t.get(Bu,null);e&&e.forEach(t=>t())}(Eo.create({providers:t,name:r}))}return function(t){const e=Ec();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Ec(){return mc&&!mc.destroyed?mc:null}let Oc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new lc:("zone.js"===t?void 0:t)||new ic({enableLongStackTrace:vc(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:ic,useValue:n}];return n.run(()=>{const e=Eo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(br,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Ic(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Yo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Fu);return t.runInitializers(),t.donePromise.then(()=>(Ys(i.injector.get(Ku,Qs)||Qs),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Tc({},e);return function(t,e,n){const r=new lu(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(xc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Sn(Eo))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Tc(t,e){return Array.isArray(e)?e.reduce(Tc,t):Object.assign(Object.assign({},t),e)}let xc=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{ic.assertNotInAngularZone(),rc(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ic.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof oa?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get($a),i=n.create(Eo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(hc,null),a=s&&i.injector.get(dc);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Ic(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ic(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Wu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Sn(ic),Sn(Eo),Sn(br),Sn(aa),Sn(Fu))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Ic(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class kc{}class Ac{}const Rc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let jc=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Rc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Nc(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Nc(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Sn(ec),Sn(Ac,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Nc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Pc=function(t){return null},Dc=Cc(null,"core",[{provide:Hu,useValue:"unknown"},{provide:Oc,deps:[Eo]},{provide:dc,deps:[]},{provide:zu,deps:[]}]),Lc=[{provide:xc,useClass:xc,deps:[ic,Eo,br,aa,Fu]},{provide:ou,deps:[ic],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Fu,useClass:Fu,deps:[[new Tn,Mu]]},{provide:ec,useClass:ec,deps:[]},qu,{provide:Aa,useFactory:function(){return qa},deps:[]},{provide:ja,useFactory:function(){return Ua},deps:[]},{provide:Ku,useFactory:function(t){return Ys(t=t||"undefined"!=typeof $localize&&$localize.locale||Qs),t},deps:[[new On(Ku),new Tn,new xn]]},{provide:$u,useValue:"USD"}];let Mc=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Sn(xc))},t.\u0275mod=nt({type:t}),t.\u0275inj=w({providers:Lc}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"d",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"f",function(){return a}),n.d(e,"b",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"i",function(){return l}),n.d(e,"g",function(){return h}),n.d(e,"h",function(){return d});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function a(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function c(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function l(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function d(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return E}),n.d(e,"c",function(){return M}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return j}),n.d(e,"i",function(){return F}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return h}),n.d(e,"l",function(){return B}),n.d(e,"m",function(){return $}),n.d(e,"n",function(){return f}),n.d(e,"o",function(){return R}),n.d(e,"p",function(){return g}),n.d(e,"q",function(){return y}),n.d(e,"r",function(){return v}),n.d(e,"s",function(){return P}),n.d(e,"t",function(){return _}),n.d(e,"u",function(){return p}),n.d(e,"v",function(){return m}),n.d(e,"w",function(){return S}),n.d(e,"x",function(){return b}),n.d(e,"y",function(){return w}),n.d(e,"z",function(){return A}),n.d(e,"A",function(){return x}),n.d(e,"B",function(){return D}),n.d(e,"C",function(){return L}),n.d(e,"D",function(){return N}),n.d(e,"E",function(){return K}),n.d(e,"F",function(){return z}),n.d(e,"G",function(){return I}),n.d(e,"H",function(){return U}),n.d(e,"I",function(){return H}),n.d(e,"J",function(){return W});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function g(){return"object"==typeof self&&self.self===self}function y(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function b(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function v(){return f().indexOf("Electron/")>=0}function _(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return f().indexOf("MSAppHost/")>=0}function S(){return!1}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,E.prototype.create),o}return Object(r.d)(e,t),e}(Error),E=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?O(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new C(i,a,r);return u},t}();function O(t,e){return t.replace(T,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var T=/\{\$([^}]+)}/g;function x(t){return JSON.parse(t)}function I(t){return JSON.stringify(t)}var k=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=x(c(o[0])||""),n=x(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},A=function(t){var e=k(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},R=function(t){var e=k(t).claims;return"object"==typeof e&&!0===e.admin};function j(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function P(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function L(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var M=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=q),void 0===r.error&&(r.error=q),void 0===r.complete&&(r.complete=q);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function q(){}var U=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function B(t,e){return t+" failed: "+e+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(B(t,e)+"must be a valid function.")}function W(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(B(t,e)+"must be a valid context object.")}var z=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},K=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function $(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return v}),n.d(e,"c",function(){return b}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return E}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return g}),n.d(e,"j",function(){return S});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const m=["ngOnDestroy"],g=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(m.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},b=new u.r("angularfire2.app.options"),v=new u.r("angularfire2.app.nameOrConfig"),_=new u.Q("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const S=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{Object(u.W)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const O={provide:class{},useFactory:w,deps:[b,u.A,[new u.B,v]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.P.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:b,useValue:e},{provide:v,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Wb(u.C))},t.\u0275mod=u.Nb({type:t}),t.\u0275inj=u.Mb({providers:[O]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return g});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("Y7HM");class m extends r.a{constructor(t,e=0,n=f){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(p.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new m(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(m.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function g(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new m(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("EQ5u"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>{return Object(i.a)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.b);return i.source=t,i.subjectFactory=n,i})(t));var e}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),m=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.j)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=d),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.4.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.k)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(m);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.k)(e,t)},createSubscribe:s.i,ErrorFactory:s.b,deepExtend:s.k}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var b=self.firebase.SDK_VERSION;b&&b.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var v=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),v.apply(void 0,t)};var _=g;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.20",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Lb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Wb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(s))},t.\u0275prov=Object(r.Lb)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l(Object(r.Wb)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function m(t){return t&&"?"!==t[0]?"?"+t:t}let g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Lb)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=Object(r.Wb)(s).location;return new v(Object(r.Wb)(a),e&&e.origin||"")}const b=new r.r("appBaseHref");let v=(()=>{class t extends g{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+m(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(a),r.Wb(b,8))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends g{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(a),r.Wb(b,8))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+m(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(g),r.Wb(a))},t.normalizeQueryParams=m,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Lb)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new w(Object(r.Wb)(g),Object(r.Wb)(a))}function C(t){return t.replace(/\/index.html$/,"")}var E=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const O=r.nb;class T{}let x=(()=>{class t extends T{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(O(e||this.locale)(t)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(r.v))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),I=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.qb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Object(r.wb)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.t),r.Pb(r.u),r.Pb(r.l),r.Pb(r.F))},t.\u0275dir=r.Kb({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class k{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let A=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new k(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new R(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new R(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.R),r.Pb(r.M),r.Pb(r.t))},t.\u0275dir=r.Kb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class R{constructor(t,e){this.record=t,this.view=e}}let j=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new N,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){P("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){P("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.R),r.Pb(r.M))},t.\u0275dir=r.Kb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class N{constructor(){this.$implicit=null,this.ngIf=null}}function P(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.wb)(e)}'.`)}let D=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(r.u),r.Pb(r.F))},t.\u0275dir=r.Kb({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({providers:[{provide:T,useClass:x}]}),t})();function M(t){return"browser"===t}function F(t){return"server"===t}let V=(()=>{class t{}return t.\u0275prov=Object(r.Lb)({token:t,providedIn:"root",factory:()=>new q(Object(r.Wb)(s),window)}),t})();class q{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=U(this.window.history)||U(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function U(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class B extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new B,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=W||(W=document.querySelector("base"),W)?W.getAttribute("href"):null;return null==e?null:(n=e,H||(H=document.createElement("a")),H.setAttribute("href",n),"/"===H.pathname.charAt(0)?H.pathname:"/"+H.pathname);var n}resetBaseElement(){W=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let H,W=null;const z=new r.r("TRANSITION_ID"),K=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[z,s,r.s],multi:!0}];class ${static init(){Object(r.Y)(new $)}addToWindow(t){r.pb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.pb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.pb.getAllAngularRootElements=()=>t.getAllRootElements(),r.pb.frameworkStabilizers||(r.pb.frameworkStabilizers=[]),r.pb.frameworkStabilizers.push(t=>{const e=r.pb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const Q=new r.r("EventManagerPlugins");let G=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(Q),r.Wb(r.A))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();class Y{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Z=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),J=(()=>{class t extends Z{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(s))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();const X={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tt=/%COMP%/g;function et(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?et(t,i,n):(i=i.replace(tt,t),n.push(i))}return n}function nt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let rt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new it(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.S.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new ot(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.S.ShadowDom:return new st(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=et(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(G),r.Wb(J),r.Wb(r.c))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();class it{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(X[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=X[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=X[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.H.DashCase|r.H.Important)?t.style.setProperty(e,n,i&r.H.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.H.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,nt(n)):this.eventManager.addEventListener(t,e,nt(n))}}class ot extends it{constructor(t,e,n,r){super(t),this.component=n;const i=et(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(tt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(tt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class st extends it{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=et(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let at=(()=>{class t extends Y{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(s))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();const ut=["alt","control","meta","shift"],ct={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ht={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let dt=(()=>{class t extends Y{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(ut.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&lt.hasOwnProperty(e)&&(e=lt[e]))}return ct[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ut.forEach(r=>{r!=n&&(0,ht[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(s))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();const ft=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){B.makeCurrent(),$.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.vb)(document),document},deps:[]}],pt=Object(r.T)(r.X,"browser",ft),mt=[[],{provide:r.ab,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:Q,useClass:at,multi:!0,deps:[s,r.A,r.C]},{provide:Q,useClass:dt,multi:!0,deps:[s]},[],{provide:rt,useClass:rt,deps:[G,J,r.c]},{provide:r.G,useExisting:rt},{provide:Z,useExisting:J},{provide:J,useClass:J,deps:[s]},{provide:r.N,useClass:r.N,deps:[r.A]},{provide:G,useClass:G,deps:[Q,r.A]},[]];let gt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:z,useExisting:r.c},K]}}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(t,12))},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({providers:mt,imports:[L,r.f]}),t})();"undefined"!=typeof window&&window;var yt=n("Cfvw"),bt=n("LRne"),vt=n("XNiG"),_t=n("9ppp");class wt extends vt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new _t.a;return this._value}next(t){super.next(this._value=t)}}var St=n("z+Ro"),Ct=n("DH7j"),Et=n("7o/Q");class Ot extends Et.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Tt extends Et.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var xt=n("SeVD"),It=n("HDdC");function kt(t,e,n,r,i=new Tt(t,n,r)){if(!i.closed)return e instanceof It.a?e.subscribe(i):Object(xt.a)(e)(i)}var At=n("yCtX");const Rt={};class jt{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Nt(t,this.resultSelector))}}class Nt extends Ot{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Rt),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(kt(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Rt?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Pt=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Dt=n("bHdf");function Lt(...t){return Object(Dt.a)(1)(Object(bt.a)(...t))}var Mt=n("EY2u");function Ft(t){return new It.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(yt.a)(n):Object(Mt.b)()).subscribe(e)})}var Vt=n("EQ5u"),qt=n("lJxs"),Ut=n("zx2A");function Bt(t,e){return"function"==typeof e?n=>n.pipe(Bt((n,r)=>Object(yt.a)(t(n,r)).pipe(Object(qt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Ht(t))}class Ht{constructor(t){this.project=t}call(t,e){return e.subscribe(new Wt(t,this.project))}}class Wt extends Ut.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Ut.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Ut.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const zt=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Kt(t){return e=>0===t?Object(Mt.b)():e.lift(new $t(t))}class $t{constructor(t){if(this.total=t,this.total<0)throw new zt}call(t,e){return e.subscribe(new Qt(t,this.total))}}class Qt extends Et.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Gt(...t){const e=t[t.length-1];return Object(St.a)(e)?(t.pop(),n=>Lt(t,n,e)):e=>Lt(t,e)}function Yt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Zt(t,e,n))}}class Zt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Jt(t,this.accumulator,this.seed,this.hasSeed))}}class Jt extends Et.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Xt(t,e){return function(n){return n.lift(new te(t,e))}}class te{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new ee(t,this.predicate,this.thisArg))}}class ee extends Et.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function ne(t){return function(e){const n=new re(t),r=e.lift(n);return n.caught=r}}class re{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ie(t,this.selector,this.caught))}}class ie extends Ut.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Ut.a(this);this.add(r);const i=Object(Ut.c)(n,r);i!==r&&this.add(i)}}}var oe=n("5+tZ");function se(t,e){return Object(oe.a)(t,e,1)}function ae(t){return function(e){return 0===t?Object(Mt.b)():e.lift(new ue(t))}}class ue{constructor(t){if(this.total=t,this.total<0)throw new zt}call(t,e){return e.subscribe(new ce(t,this.total))}}class ce extends Et.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function le(t=fe){return e=>e.lift(new he(t))}class he{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new de(t,this.errorFactory))}}class de extends Et.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Vb){t=Vb}this.destination.error(t)}}}function fe(){return new Pt}function pe(t=null){return e=>e.lift(new me(t))}class me{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ge(t,this.defaultValue))}}class ge extends Et.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var ye=n("SpAZ");function be(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Xt((e,n)=>t(e,n,r)):ye.a,Kt(1),n?pe(e):le(()=>new Pt))}var ve=n("vkgz"),_e=n("x+ZX"),we=n("quSY");class Se{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Ce(t,this.callback))}}class Ce extends Et.a{constructor(t,e){super(t),this.add(new we.a(e))}}class Ee{constructor(t,e){this.id=t,this.url=e}}class Oe extends Ee{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Te extends Ee{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xe extends Ee{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ie extends Ee{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ke extends Ee{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ae extends Ee{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Re extends Ee{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class je extends Ee{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ne extends Ee{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pe{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class De{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Le{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Me{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fe{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ve{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qe{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ue="primary";class Be{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function He(t){return new Be(t)}function We(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function ze(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ke(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!$e(t[i],e[i]))return!1;return!0}function $e(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Qe(t){return Array.prototype.concat.apply([],t)}function Ge(t){return t.length>0?t[t.length-1]:null}function Ye(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ze(t){return Object(r.rb)(t)?t:Object(r.sb)(t)?Object(yt.a)(Promise.resolve(t)):Object(bt.a)(t)}function Je(t,e,n){return n?function(t,e){return Ke(t,e)}(t.queryParams,e.queryParams)&&Xe(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>$e(t[n],e[n]))}(t.queryParams,e.queryParams)&&tn(t.root,e.root)}function Xe(t,e){if(!sn(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Xe(t.children[n],e.children[n]))return!1}return!0}function tn(t,e){return en(t,e,e.segments)}function en(t,e,n){if(t.segments.length>n.length)return!!sn(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!sn(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!tn(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!sn(t.segments,r)&&!!t.children.primary&&en(t.children.primary,e,i)}}class nn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=He(this.queryParams)),this._queryParamMap}toString(){return cn.serialize(this)}}class rn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Ye(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ln(this)}}class on{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=He(this.parameters)),this._parameterMap}toString(){return yn(this)}}function sn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class an{}class un{parse(t){const e=new Sn(t);return new nn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${hn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${fn(e)}=${fn(t)}`).join("&"):`${fn(e)}=${fn(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const cn=new un;function ln(t){return t.segments.map(t=>yn(t)).join("/")}function hn(t,e){if(!t.hasChildren())return ln(t);if(e){const e=t.children.primary?hn(t.children.primary,!1):"",n=[];return Ye(t.children,(t,e)=>{e!==Ue&&n.push(`${e}:${hn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Ye(t.children,(t,r)=>{r===Ue&&(n=n.concat(e(t,r)))}),Ye(t.children,(t,r)=>{r!==Ue&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Ue?[hn(t.children.primary,!1)]:[`${n}:${hn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${ln(t)}/${e[0]}`:`${ln(t)}/(${e.join("//")})`}}function dn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fn(t){return dn(t).replace(/%3B/gi,";")}function pn(t){return dn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mn(t){return decodeURIComponent(t)}function gn(t){return mn(t.replace(/\+/g,"%20"))}function yn(t){return`${pn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${pn(t)}=${pn(e[t])}`).join("")}`;var e}const bn=/^[^\/()?;=#]+/;function vn(t){const e=t.match(bn);return e?e[0]:""}const _n=/^[^=?&#]+/,wn=/^[^?&#]+/;class Sn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new rn(t,e)),n}parseSegment(){const t=vn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new on(mn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=vn(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=vn(this.remaining);t&&(n=t,this.capture(n))}t[mn(e)]=mn(n)}parseQueryParam(t){const e=function(t){const e=t.match(_n);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(wn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=gn(e),i=gn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=vn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Ue);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new rn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Cn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=En(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=En(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=On(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return On(t,this._root).map(t=>t.value)}}function En(t,e){if(t===e.value)return e;for(const n of e.children){const e=En(t,n);if(e)return e}return null}function On(t,e){if(t===e.value)return[e];for(const n of e.children){const r=On(t,n);if(r.length)return r.unshift(e),r}return[]}class Tn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function xn(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class In extends Cn{constructor(t,e){super(t),this.snapshot=e,Pn(this,t)}toString(){return this.snapshot.toString()}}function kn(t,e){const n=function(t,e){const n=new jn([],{},{},"",{},Ue,e,null,t.root,-1,{});return new Nn("",new Tn(n,[]))}(t,e),r=new wt([new on("",{})]),i=new wt({}),o=new wt({}),s=new wt({}),a=new wt(""),u=new An(r,i,s,a,o,Ue,e,n.root);return u.snapshot=n.root,new In(new Tn(u,[]),n)}class An{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(qt.a)(t=>He(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(qt.a)(t=>He(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Rn(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class jn{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=He(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=He(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Nn extends Cn{constructor(t,e){super(e),this.url=t,Pn(this,e)}toString(){return Dn(this._root)}}function Pn(t,e){e.value._routerState=t,e.children.forEach(e=>Pn(t,e))}function Dn(t){const e=t.children.length>0?` { ${t.children.map(Dn).join(", ")} } `:"";return`${t.value}${e}`}function Ln(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ke(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Ke(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ke(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Ke(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Mn(t,e){return Ke(t.params,e.params)&&function(t,e){return sn(t,e)&&t.every((t,n)=>Ke(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Mn(t.parent,e.parent))}function Fn(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Fn(t,e,r);return Fn(t,e)})}(t,e,n);return new Tn(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Vn(e,t),t}{const n=new An(new wt((r=e.value).url),new wt(r.params),new wt(r.queryParams),new wt(r.fragment),new wt(r.data),r.outlet,r.component,r),i=e.children.map(e=>Fn(t,e));return new Tn(n,i)}}var r}function Vn(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Vn(t.children[n],e.children[n])}function qn(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Un(t){return"object"==typeof t&&null!=t&&t.outlets}function Bn(t,e,n,r,i){let o={};return r&&Ye(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new nn(n.root===t?e:Hn(n.root,t,e),o,i)}function Hn(t,e,n){const r={};return Ye(t.children,(t,i)=>{r[i]=t===e?n:Hn(t,e,n)}),new rn(t.segments,r)}class Wn{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&qn(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Un);if(r&&r!==Ge(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zn{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Kn(t,e,n){if(t||(t=new rn([],{})),0===t.segments.length&&t.hasChildren())return $n(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Un(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Zn(a,u,e))return o;r+=2}else{if(!Zn(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new rn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new rn(t.segments.slice(r.pathIndex),t.children),$n(e,0,i)}return r.match&&0===i.length?new rn(t.segments,{}):r.match&&!t.hasChildren()?Qn(t,e,n):r.match?$n(t,0,i):Qn(t,e,n)}function $n(t,e,n){if(0===n.length)return new rn(t.segments,{});{const r=function(t){return Un(t[0])?t[0].outlets:{[Ue]:t}}(n),i={};return Ye(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Kn(t.children[r],e,n))}),Ye(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new rn(t.segments,i)}}function Qn(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Un(o)){const t=Gn(o.outlets);return new rn(r,t)}if(0===i&&qn(n[0])){r.push(new on(t.segments[e].path,Yn(n[0]))),i++;continue}const s=Un(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&qn(a)?(r.push(new on(s,Yn(a))),i+=2):(r.push(new on(s,{})),i++)}return new rn(r,{})}function Gn(t){const e={};return Ye(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Qn(new rn([],{}),0,t))}),e}function Yn(t){const e={};return Ye(t,(t,n)=>e[n]=`${t}`),e}function Zn(t,e,n){return t==n.path&&Ke(e,n.parameters)}class Jn{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Ln(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=xn(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Ye(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=xn(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=xn(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Ve(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Me(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Ln(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Xn(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Xn(t){Ln(t.value),t.children.forEach(Xn)}class tr{constructor(t,e){this.routes=t,this.module=e}}function er(t){return"function"==typeof t}function nr(t){return t instanceof nn}const rr=Symbol("INITIAL_VALUE");function ir(){return Bt(t=>function(...t){let e,n;return Object(St.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Ct.a)(t[0])&&(t=t[0]),Object(At.a)(t,n).lift(new jt(e))}(t.map(t=>t.pipe(Kt(1),Gt(rr)))).pipe(Yt((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==rr)return t;if(r===rr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||nr(r))return r}return t},t)},rr),Xt(t=>t!==rr),Object(qt.a)(t=>nr(t)?t:!0===t),Kt(1)))}let or=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Jb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Qb(0,"router-outlet")},directives:function(){return[Xr]},encapsulation:2}),t})();function sr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];ar(r,ur(e,r))}}function ar(t,e){t.children&&sr(t.children,e)}function ur(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function cr(t){const e=t.children&&t.children.map(cr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ue&&(n.component=or),n}function lr(t){return t.outlet||Ue}function hr(t,e){const n=t.filter(t=>lr(t)===e);return n.push(...t.filter(t=>lr(t)!==e)),n}const dr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function fr(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},dr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||ze)(n,t,e);if(!i)return Object.assign({},dr);const o={};Ye(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function pr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>mr(t,e,n)&&lr(n)!==Ue)}(t,n,r)){const i=new rn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&lr(o)!==Ue){const n=new rn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[lr(o)]=n}return i}(t,e,r,new rn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>mr(t,e,n))}(t,n,r)){const o=new rn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(mr(t,n,a)&&!i[lr(a)]){const n=new rn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[lr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new rn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function mr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function gr(t,e,n,r){return!!(lr(t)===r||r!==Ue&&mr(e,n,t))&&("**"===t.path||fr(e,t,n).matched)}function yr(t,e,n){return 0===e.length&&!t.children[n]}class br{constructor(t){this.segmentGroup=t||null}}class vr{constructor(t){this.urlTree=t}}function _r(t){return new It.a(e=>e.error(new br(t)))}function wr(t){return new It.a(e=>e.error(new vr(t)))}function Sr(t){return new It.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Cr{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=pr(this.urlTree.root,[],[],this.config).segmentGroup,e=new rn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Ue).pipe(Object(qt.a)(t=>this.createUrlTree(Er(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ne(t=>{if(t instanceof vr)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof br)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Ue).pipe(Object(qt.a)(e=>this.createUrlTree(Er(e),t.queryParams,t.fragment))).pipe(ne(t=>{if(t instanceof br)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new rn([],{[Ue]:t}):t;return new nn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(qt.a)(t=>new rn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(yt.a)(r).pipe(se(r=>{const i=n.children[r],o=hr(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(qt.a)(t=>({segment:t,outlet:r})))}),Yt((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Xt((e,n)=>t(e,n,r)):ye.a,ae(1),n?pe(e):le(()=>new Pt))}())}expandSegment(t,e,n,r,i,o){return Object(yt.a)(n).pipe(se(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(ne(t=>{if(t instanceof br)return Object(bt.a)(null);throw t}))),be(t=>!!t),ne((t,n)=>{if(t instanceof Pt||"EmptyError"===t.name){if(yr(e,r,i))return Object(bt.a)(new rn([],{}));throw new br(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return gr(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):_r(e):_r(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?wr(i):this.lineralizeSegments(n,i).pipe(Object(oe.a)(n=>{const i=new rn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=fr(e,r,i);if(!s)return _r(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?wr(l):this.lineralizeSegments(r,l).pipe(Object(oe.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(bt.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(qt.a)(t=>(n._loadedConfig=t,new rn(r,{})))):Object(bt.a)(new rn(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=fr(e,n,r);if(!o)return _r(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(oe.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=pr(e,s,u,o),l=new rn(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(qt.a)(t=>new rn(s,t)));if(0===o.length&&0===c.length)return Object(bt.a)(new rn(s,{}));const h=lr(n)===i;return this.expandSegment(r,l,o,c,h?Ue:i,!0).pipe(Object(qt.a)(t=>new rn(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(bt.a)(new tr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(bt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(oe.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(qt.a)(t=>(e._loadedConfig=t,t))):function(t){return new It.a(e=>e.error(We(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(bt.a)(new tr([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(bt.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&er(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!er(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Ze(o)});return Object(bt.a)(i).pipe(ir(),Object(ve.a)(t=>{if(!nr(t))return;const e=We(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(qt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(bt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Sr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new nn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Ye(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Ye(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new rn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Er(t){const e={};for(const n of Object.keys(t.children)){const r=Er(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new rn(t.segments.concat(e.segments),e.children)}return t}(new rn(t.segments,e))}class Or{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Tr{constructor(t,e){this.component=t,this.route=e}}function xr(t,e,n){const r=t._root;return kr(r,e?e._root:null,n,[r.value])}function Ir(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function kr(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=xn(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!sn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!sn(t.url,e.url)||!Ke(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mn(t,e)||!Ke(t.queryParams,e.queryParams);case"paramsChange":default:return!Mn(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Or(r)):(o.data=s.data,o._resolvedData=s._resolvedData),kr(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Tr(a.outlet.component,s))}else s&&Ar(e,a,i),i.canActivateChecks.push(new Or(r)),kr(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Ye(o,(t,e)=>Ar(t,n.getContext(e),i)),i}function Ar(t,e,n){const r=xn(t),i=t.value;Ye(r,(t,r)=>{Ar(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Tr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Rr{}function jr(t){return new It.a(e=>e.error(t))}class Nr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=pr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Ue);if(null===e)return null;const n=new jn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ue,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Tn(n,e),i=new Nn(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Rn(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=hr(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!Pr(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===Ue?-1:e.value.outlet===Ue?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return yr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!gr(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Ge(n).parameters:{};i=new jn(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mr(t),lr(t),t.component,t,Dr(e),Lr(e)+n.length,Fr(t))}else{const r=fr(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new jn(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mr(t),lr(t),t.component,t,Dr(e),Lr(e)+o.length,Fr(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=pr(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Tn(i,t)]}if(0===a.length&&0===c.length)return[new Tn(i,[])];const l=lr(t)===r,h=this.processSegment(a,u,c,l?Ue:r);return null===h?null:[new Tn(i,h)]}}function Pr(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Dr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Lr(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Mr(t){return t.data||{}}function Fr(t){return t.resolve||{}}function Vr(t){return Bt(e=>{const n=t(e);return n?Object(yt.a)(n).pipe(Object(qt.a)(()=>e)):Object(bt.a)(e)})}class qr extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Ur=new r.r("ROUTES");class Br{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(qt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new tr(Qe(i.injector.get(Ur,void 0,r.q.Self|r.q.Optional)).map(cr),i)}),ne(t=>{throw e._loader$=void 0,t}));return e._loader$=new Vt.a(n,()=>new vt.a).pipe(Object(_e.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(yt.a)(this.loader.load(t)):Ze(t()).pipe(Object(oe.a)(t=>t instanceof r.w?Object(bt.a)(t):Object(yt.a)(this.compiler.compileModuleAsync(t))))}}class Hr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wr,this.attachRef=null}}class Wr{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Hr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class zr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Kr(t){throw t}function $r(t,e,n){return e.parse("/")}function Qr(t,e){return Object(bt.a)(null)}let Gr=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new vt.a,this.errorHandler=Kr,this.malformedUriErrorHandler=$r,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Qr,afterPreactivation:Qr},this.urlHandlingStrategy=new zr,this.routeReuseStrategy=new qr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Z);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new nn(new rn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Br(s,a,t=>this.triggerEvent(new Pe(t)),t=>this.triggerEvent(new De(t))),this.routerState=kn(this.currentUrlTree,this.rootComponentType),this.transitions=new wt({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Xt(t=>0!==t.id),Object(qt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Bt(t=>{let n=!1,r=!1;return Object(bt.a)(t).pipe(Object(ve.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Bt(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(bt.a)(t).pipe(Bt(t=>{const n=this.transitions.getValue();return e.next(new Oe(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Mt.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Bt(t=>function(t,e,n,r,i){return new Cr(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(qt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(ve.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(oe.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Nr(t,e,n,r,i,o).recognize();return null===s?jr(new Rr):Object(bt.a)(s)}catch(Vb){return jr(Vb)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(qt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(ve.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new ke(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Oe(n,this.serializeUrl(r),i,o);e.next(a);const u=kn(r,this.rootComponentType).snapshot;return Object(bt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Mt.a}),Vr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(ve.a)(t=>{const e=new Ae(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(qt.a)(t=>Object.assign(Object.assign({},t),{guards:xr(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(oe.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(bt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(yt.a)(t).pipe(Object(oe.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(bt.a)(!0);const s=o.map(o=>{const s=Ir(o,e,i);let a;if(function(t){return t&&er(t.canDeactivate)}(s))a=Ze(s.canDeactivate(t,e,n,r));else{if(!er(s))throw new Error("Invalid CanDeactivate guard");a=Ze(s(t,e,n,r))}return a.pipe(be())});return Object(bt.a)(s).pipe(ir())}(t.component,t.route,n,e,r)),be(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(oe.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(yt.a)(e).pipe(se(e=>Lt(function(t,e){return null!==t&&e&&e(new Le(t)),Object(bt.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Fe(t)),Object(bt.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Ft(()=>{const i=e.guards.map(i=>{const o=Ir(i,e.node,n);let s;if(function(t){return t&&er(t.canActivateChild)}(o))s=Ze(o.canActivateChild(r,t));else{if(!er(o))throw new Error("Invalid CanActivateChild guard");s=Ze(o(r,t))}return s.pipe(be())});return Object(bt.a)(i).pipe(ir())}));return Object(bt.a)(i).pipe(ir())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(bt.a)(!0);const i=r.map(r=>Ft(()=>{const i=Ir(r,e,n);let o;if(function(t){return t&&er(t.canActivate)}(i))o=Ze(i.canActivate(e,t));else{if(!er(i))throw new Error("Invalid CanActivate guard");o=Ze(i(e,t))}return o.pipe(be())}));return Object(bt.a)(i).pipe(ir())}(t,e.route,n))),be(t=>!0!==t,!0))}(r,o,t,e):Object(bt.a)(n)),Object(qt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(ve.a)(t=>{if(nr(t.guardsResult)){const e=We(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Re(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Xt(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new xe(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Vr(t=>{if(t.guards.canActivateChecks.length)return Object(bt.a)(t).pipe(Object(ve.a)(t=>{const e=new je(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Bt(t=>{let n=!1;return Object(bt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(oe.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(bt.a)(t);let o=0;return Object(yt.a)(n).pipe(se(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(bt.a)({});const o={};return Object(yt.a)(i).pipe(Object(oe.a)(i=>function(t,e,n,r){const i=Ir(t,e,r);return Ze(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(ve.a)(t=>{o[i]=t}))),ae(1),Object(oe.a)(()=>Object.keys(o).length===i.length?Object(bt.a)(o):Mt.a))}(t._resolve,t,e,r).pipe(Object(qt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Rn(t,n).resolve),null)))}(t.route,e,r,i)),Object(ve.a)(()=>o++),ae(1),Object(oe.a)(e=>o===n.length?Object(bt.a)(t):Mt.a))})),Object(ve.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new xe(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(ve.a)(t=>{const e=new Ne(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Vr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(qt.a)(t=>{const e=function(t,e,n){const r=Fn(t,e._root,n?n._root:void 0);return new In(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(ve.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(qt.a)(t=>(new Jn(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(ve.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new xe(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Se(i))),ne(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=nr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new xe(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ie(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(fl){t.reject(fl)}}var i;return Mt.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){sr(t),this.config=t.map(cr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Bn(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Wn(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Ye(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Wn(n,e,r)}(n);if(o.toRoot())return Bn(e.root,new rn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new zn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new zn(t,t===e.root,0)}const r=qn(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new zn(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?$n(s.segmentGroup,s.index,o.commands):Kn(s.segmentGroup,s.index,o.commands);return Bn(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=nr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Vb){e=this.malformedUriErrorHandler(Vb,this.urlSerializer,t)}return e}isActive(t,e){if(nr(t))return Je(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Je(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Te(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(r.O),r.Wb(an),r.Wb(Wr),r.Wb(w),r.Wb(r.s),r.Wb(r.x),r.Wb(r.i),r.Wb(void 0))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),Yr=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new vt.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Jr(this.skipLocationChange),replaceUrl:Jr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Jr(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Gr),r.Pb(An),r.Xb("tabindex"),r.Pb(r.F),r.Pb(r.l))},t.\u0275dir=r.Kb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Zb("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.zb]}),t})(),Zr=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new vt.a,this.subscription=t.events.subscribe(t=>{t instanceof Te&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Jr(this.skipLocationChange),replaceUrl:Jr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Jr(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Gr),r.Pb(An),r.Pb(g))},t.\u0275dir=r.Kb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Zb("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Vb("href",e.href,r.qc),r.Cb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.zb]}),t})();function Jr(t){return""===t||!!t}let Xr=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Ue,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ti(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Wr),r.Pb(r.R),r.Pb(r.j),r.Xb("name"),r.Pb(r.h))},t.\u0275dir=r.Kb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ti{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===An?this.route:t===Wr?this.childContexts:this.parent.get(t,e)}}class ei{}class ni{preload(t,e){return Object(bt.a)(null)}}let ri=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Br(e,n,e=>t.triggerEvent(new Pe(e)),e=>t.triggerEvent(new De(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Xt(t=>t instanceof Te),se(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(yt.a)(n).pipe(Object(Dt.a)(),Object(qt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(bt.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(oe.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(Gr),r.Wb(r.x),r.Wb(r.i),r.Wb(r.s),r.Wb(ei))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),ii=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Oe?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Te&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof qe&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new qe(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(Gr),r.Wb(V),r.Wb(void 0))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();const oi=new r.r("ROUTER_CONFIGURATION"),si=new r.r("ROUTER_FORROOT_GUARD"),ai=[w,{provide:an,useClass:un},{provide:Gr,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new Gr(null,t,e,n,r,i,s,Qe(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[an,Wr,w,r.s,r.x,r.i,Ur,oi,[class{},new r.B],[class{},new r.B]]},Wr,{provide:An,useFactory:function(t){return t.routerState.root},deps:[Gr]},{provide:r.x,useClass:r.L},ri,ni,class{preload(t,e){return e().pipe(ne(()=>Object(bt.a)(null)))}},{provide:oi,useValue:{enableTracing:!1}}];function ui(){return new r.z("Router",Gr)}let ci=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[ai,fi(e),{provide:si,useFactory:di,deps:[[Gr,new r.B,new r.K]]},{provide:oi,useValue:n||{}},{provide:g,useFactory:hi,deps:[a,[new r.p(b),new r.B],oi]},{provide:ii,useFactory:li,deps:[Gr,V,oi]},{provide:ei,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ni},{provide:r.z,multi:!0,useFactory:ui},[pi,{provide:r.d,multi:!0,useFactory:mi,deps:[pi]},{provide:yi,useFactory:gi,deps:[pi]},{provide:r.b,multi:!0,useExisting:yi}]]}}static forChild(e){return{ngModule:t,providers:[fi(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(si,8),r.Wb(Gr,8))},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({}),t})();function li(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ii(t,e,n)}function hi(t,e,n={}){return n.useHash?new _(t,e):new v(t,e)}function di(t){return"guarded"}function fi(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Ur,multi:!0,useValue:t}]}let pi=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new vt.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Gr),r=this.injector.get(oi);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(bt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(oi),n=this.injector.get(ri),i=this.injector.get(ii),o=this.injector.get(Gr),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(r.s))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();function mi(t){return t.appInitializer.bind(t)}function gi(t){return t.bootstrapListener.bind(t)}const yi=new r.r("Router Initializer");var bi=n("Jgta"),vi=n("D0XW");function _i(){return t=>t.lift(new wi)}class wi{call(t,e){return e.subscribe(new Si(t))}}class Si extends Et.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function Ci(t,e){return n=>n.lift(new Ei(t,e))}class Ei{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Oi(t,this.compare,this.keySelector))}}class Oi extends Et.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Ti=n("pxpQ"),xi=n("spgP"),Ii=n("zIRd"),ki=n("qOnz"),Ai=n("q/0M"),Ri=function(t,e){return(Ri=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ji(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ni,Pi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Di=Di||{},Li=Pi||self;function Mi(){}function Fi(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Vi(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var qi="closure_uid_"+(1e9*Math.random()>>>0),Ui=0;function Bi(t,e,n){return t.call.apply(t.bind,arguments)}function Hi(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Wi(t,e,n){return(Wi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bi:Hi).apply(null,arguments)}function zi(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Ki(){return Date.now()}function $i(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Qi(){this.j=this.j,this.i=this.i}Qi.prototype.j=!1,Qi.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,qi)&&t[qi]||(t[qi]=++Ui)}(this)},Qi.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Gi=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Yi=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Zi(t){return Array.prototype.concat.apply([],arguments)}function Ji(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Xi(t){return/^[\s\xa0]*$/.test(t)}var to,eo=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function no(t,e){return-1!=t.indexOf(e)}function ro(t,e){return t<e?-1:t>e?1:0}t:{var io=Li.navigator;if(io){var oo=io.userAgent;if(oo){to=oo;break t}}to=""}function so(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ao(t){var e={};for(var n in t)e[n]=t[n];return e}var uo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function co(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<uo.length;o++)n=uo[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function lo(t){return lo[" "](t),t}lo[" "]=Mi;var ho,fo,po=no(to,"Opera"),mo=no(to,"Trident")||no(to,"MSIE"),go=no(to,"Edge"),yo=go||mo,bo=no(to,"Gecko")&&!(no(to.toLowerCase(),"webkit")&&!no(to,"Edge"))&&!(no(to,"Trident")||no(to,"MSIE"))&&!no(to,"Edge"),vo=no(to.toLowerCase(),"webkit")&&!no(to,"Edge");function _o(){var t=Li.document;return t?t.documentMode:void 0}t:{var wo="",So=(fo=to,bo?/rv:([^\);]+)(\)|;)/.exec(fo):go?/Edge\/([\d\.]+)/.exec(fo):mo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(fo):vo?/WebKit\/(\S+)/.exec(fo):po?/(?:Version)[ \/]?(\S+)/.exec(fo):void 0);if(So&&(wo=So?So[1]:""),mo){var Co=_o();if(null!=Co&&Co>parseFloat(wo)){ho=String(Co);break t}}ho=wo}var Eo={};function Oo(t){return function(t,e){var n=Eo;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=eo(String(ho)).split("."),r=eo(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ro(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ro(0==s[2].length,0==a[2].length)||ro(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var To=Li.document&&mo&&(_o()||parseInt(ho,10))||void 0,xo=!mo||9<=Number(To),Io=mo&&!Oo("9"),ko=function(){if(!Li.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Li.addEventListener("test",Mi,e),Li.removeEventListener("test",Mi,e)}catch(n){}return t}();function Ao(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ro(t,e){if(Ao.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(bo){t:{try{lo(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:jo[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ao.prototype.b=function(){this.defaultPrevented=!0},$i(Ro,Ao);var jo={2:"touch",3:"pen",4:"mouse"};Ro.prototype.b=function(){Ro.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Io)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var No="closure_listenable_"+(1e6*Math.random()|0),Po=0;function Do(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Po,this.Y=this.Z=!1}function Lo(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Mo(t){this.src=t,this.a={},this.b=0}function Fo(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Gi(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Lo(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Vo(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Mo.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Vo(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Do(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var qo="closure_lm_"+(1e6*Math.random()|0),Uo={};function Bo(t,e,n,r,i){if(r&&r.once)return Wo(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Bo(t,e[o],n,r,i);return null}return n=Jo(n),t&&t[No]?t.va(e,n,Vi(r)?!!r.capture:!!r,i):Ho(t,e,n,!1,r,i)}function Ho(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Vi(i)?!!i.capture:!!i;if(s&&!xo)return null;var a=Yo(t);if(a||(t[qo]=a=new Mo(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Go,e=xo?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ko||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent($o(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Wo(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Wo(t,e[o],n,r,i);return null}return n=Jo(n),t&&t[No]?t.wa(e,n,Vi(r)?!!r.capture:!!r,i):Ho(t,e,n,!0,r,i)}function zo(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)zo(t,e[o],n,r,i);else r=Vi(r)?!!r.capture:!!r,n=Jo(n),t&&t[No]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Vo(o=t.a[e],n,r,i))&&(Lo(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Yo(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Vo(e,n,r,i)),(n=-1<t?e[t]:null)&&Ko(n))}function Ko(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[No])Fo(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent($o(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Yo(e))?(Fo(n,t),0==n.b&&(n.src=null,e[qo]=null)):Lo(t)}}}function $o(t){return t in Uo?Uo[t]:Uo[t]="on"+t}function Qo(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ko(t),n.call(r,e)}function Go(t,e){if(t.Y)return!0;if(!xo){if(!e)t:{e=["window","event"];for(var n=Li,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Qo(t,e=new Ro(e,this))}return Qo(t,new Ro(e,this))}function Yo(t){return(t=t[qo])instanceof Mo?t:null}var Zo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jo(t){return"function"==typeof t?t:(t[Zo]||(t[Zo]=function(e){return t.handleEvent(e)}),t[Zo])}function Xo(){Qi.call(this),this.c=new Mo(this),this.J=this,this.C=null}function ts(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Ao(e,t);else if(e instanceof Ao)e.target=e.target||t;else{var i=e;co(e=new Ao(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=es(s,r,!0,e)&&i}if(i=es(s=e.a=t,r,!0,e)&&i,i=es(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=es(s=e.a=n[o],r,!1,e)&&i}function es(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Fo(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}$i(Xo,Qi),Xo.prototype[No]=!0,(Ni=Xo.prototype).addEventListener=function(t,e,n,r){Bo(this,t,e,n,r)},Ni.removeEventListener=function(t,e,n,r){zo(this,t,e,n,r)},Ni.G=function(){if(Xo.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Lo(n[r]);delete e.a[t],e.b--}}this.C=null},Ni.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Ni.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var ns=Li.JSON.stringify;function rs(){this.b=this.a=null}var is,os=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new as},function(t){t.reset()});function ss(){var t=hs,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function as(){this.next=this.b=this.a=null}function us(t){Li.setTimeout(function(){throw t},0)}function cs(t,e){is||function(){var t=Li.Promise.resolve(void 0);is=function(){t.then(ds)}}(),ls||(is(),ls=!0),hs.add(t,e)}rs.prototype.add=function(t,e){var n=os.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},as.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},as.prototype.reset=function(){this.next=this.b=this.a=null};var ls=!1,hs=new rs;function ds(){for(var t;t=ss();){try{t.a.call(t.b)}catch(n){us(n)}var e=os;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}ls=!1}function fs(t,e){Xo.call(this),this.b=t||1,this.a=e||Li,this.f=Wi(this.Za,this),this.g=Ki()}function ps(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ms(t,e,n){if("function"==typeof t)n&&(t=Wi(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Wi(t.handleEvent,t)}return 2147483647<Number(e)?-1:Li.setTimeout(t,e||0)}function gs(t){t.a=ms(function(){t.a=null,t.c&&(t.c=!1,gs(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}$i(fs,Xo),(Ni=fs.prototype).aa=!1,Ni.M=null,Ni.Za=function(){if(this.aa){var t=Ki()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ts(this,"tick"),this.aa&&(ps(this),this.start()))}},Ni.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Ki())},Ni.G=function(){fs.X.G.call(this),ps(this),delete this.a};var ys=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Ri(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:gs(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Li.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Qi);function bs(t){Qi.call(this),this.b=t,this.a={}}$i(bs,Qi);var vs=[];function _s(t,e,n,r){Array.isArray(n)||(n&&(vs[0]=n.toString()),n=vs);for(var i=0;i<n.length;i++){var o=Bo(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ws(t){so(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ko(t)},t),t.a={}}function Ss(){this.a=!0}function Cs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return ns(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}bs.prototype.G=function(){bs.X.G.call(this),ws(this)},bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ss.prototype.info=function(){};var Es={},Os=null;function Ts(){return Os=Os||new Xo}function xs(t){Ao.call(this,Es.Fa,t)}function Is(t){var e=Ts();ts(e,new xs(e,t))}function ks(t,e){Ao.call(this,Es.STAT_EVENT,t),this.stat=e}function As(t){var e=Ts();ts(e,new ks(e,t))}function Rs(t){Ao.call(this,Es.Ga,t)}function js(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Li.setTimeout(function(){t()},e)}Es.Fa="serverreachability",$i(xs,Ao),Es.STAT_EVENT="statevent",$i(ks,Ao),Es.Ga="timingevent",$i(Rs,Ao);var Ns={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ps={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ds(){}function Ls(){}Ds.prototype.a=null;var Ms,Fs={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Vs(){Ao.call(this,"d")}function qs(){Ao.call(this,"c")}function Us(){}function Bs(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new bs(this),this.P=Hs,this.R=new fs(t=yo?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}$i(Vs,Ao),$i(qs,Ao),$i(Us,Ds),Ms=new Us;var Hs=45e3,Ws={},zs={};function Ks(t,e,n){t.H=1,t.i=pa(ua(e)),t.j=n,t.I=!0,$s(t,null)}function $s(t,e){t.u=Ki(),Ys(t),t.l=ua(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),xa(n.b,"t",r),t.D=0,t.a=wu(t.g,t.g.C?e:null),0<t.O&&(t.F=new ys(Wi(t.Ca,t,t.a),t.O)),_s(t.J,t.a,"readystatechange",t.Xa),e=t.B?ao(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Is(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Qs(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Gs(t,n);if(i==zs){4==e&&(t.h=4,As(14),r=!1),Cs(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ws){t.h=4,As(15),Cs(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Cs(t.c,t.f,i,null),ea(t,i)}4==e&&0==n.length&&(t.h=1,As(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),fu(e),e.F=!0,As(11))):(Cs(t.c,t.f,n,"[Invalid Chunked Response]"),ta(t),Xs(t))}function Gs(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?zs:(n=Number(e.substring(n,r)),isNaN(n)?Ws:(r+=1)+n>e.length?zs:(e=e.substr(r,n),t.D=r+n,e))}function Ys(t){t.T=Ki()+t.P,Zs(t,t.P)}function Zs(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=js(Wi(t.Va,t),e)}function Js(t){t.o&&(Li.clearTimeout(t.o),t.o=null)}function Xs(t){0==t.g.v||t.A||gu(t.g,t)}function ta(t){Js(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,ps(t.R),ws(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ea(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Pa(n.b,t)))if(n.I=t.N,!t.C&&Pa(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(ib){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;mu(n),iu(n)}du(n),As(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=js(Wi(n.Sa,n),6e3));if(1>=Na(n.b)&&n.ea){try{n.ea()}catch(ib){}n.ea=void 0}}else bu(n,11)}else if((t.C||n.a==t)&&mu(n),!Xi(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(no(l,"spdy")||no(l,"quic")||no(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Da(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,fa(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Ki()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=_u(u,u.C?u.ga:null,u.fa),f.C){La(u.b,f);var p=f,m=u.D;m&&p.setTimeout(m),p.o&&(Js(p),Ys(p)),u.a=f}else hu(u);0<n.g.length&&au(n)}else"stop"!=i[0]&&"close"!=i[0]||bu(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?bu(n,7):ru(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Is(4)}catch(ib){}}function na(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Fi(t)||"string"==typeof t)Yi(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Fi(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Fi(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ra(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ra)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ia(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];oa(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)oa(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function oa(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ni=Bs.prototype).setTimeout=function(t){this.P=t},Ni.Xa=function(t){t=t.target;var e=this.F;e&&3==Xa(t)?e.f():this.Ca(t)},Ni.Ca=function(t){try{if(t==this.a)t:{var e=Xa(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!yo&&!this.a.$())){this.A||4!=e||7==n||Is(8==n||0>=r?3:2),Js(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xi(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,As(12),ta(this),Xs(this);break t}Cs(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ea(this,u)}this.I?(Qs(this,e,o),yo&&this.b&&3==e&&(_s(this.J,this.R,"tick",this.Wa),this.R.start())):(Cs(this.c,this.f,o,null),ea(this,o)),4==e&&ta(this),this.b&&!this.A&&(4==e?gu(this.g,this):(this.b=!1,Ys(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,As(12)):(this.h=0,As(13)),ta(this),Xs(this)}}}catch(c){}},Ni.Wa=function(){if(this.a){var t=Xa(this.a),e=this.a.$();this.D<e.length&&(Js(this),Qs(this,t,e),this.b&&4!=t&&Ys(this))}},Ni.cancel=function(){this.A=!0,ta(this)},Ni.Va=function(){this.o=null;var t=Ki();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Is(3),As(17)),ta(this),this.h=2,Xs(this)):Zs(this,this.T-t)},(Ni=ra.prototype).K=function(){ia(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Ni.L=function(){return ia(this),this.a.concat()},Ni.get=function(t,e){return oa(this.b,t)?this.b[t]:e},Ni.set=function(t,e){oa(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Ni.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var sa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function aa(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof aa){this.a=void 0!==e?e:t.a,ca(this,t.f),this.j=t.j,la(this,t.c),ha(this,t.h),this.g=t.g,e=t.b;var n=new Ca;n.c=e.c,e.a&&(n.a=new ra(e.a),n.b=e.b),da(this,n),this.i=t.i}else t&&(n=String(t).match(sa))?(this.a=!!e,ca(this,n[1]||"",!0),this.j=ma(n[2]||""),la(this,n[3]||"",!0),ha(this,n[4]),this.g=ma(n[5]||"",!0),da(this,n[6]||"",!0),this.i=ma(n[7]||"")):(this.a=!!e,this.b=new Ca(null,this.a))}function ua(t){return new aa(t)}function ca(t,e,n){t.f=n?ma(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function la(t,e,n){t.c=n?ma(e,!0):e}function ha(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function da(t,e,n){e instanceof Ca?(t.b=e,function(t,e){e&&!t.f&&(Ea(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Oa(this,e),xa(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=ga(e,wa)),t.b=new Ca(e,t.a))}function fa(t,e,n){t.b.set(e,n)}function pa(t){return fa(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Ki()).toString(36)),t}function ma(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ga(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ya),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ya(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}aa.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ga(e,ba,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ga(e,ba,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ga(n,"/"==n.charAt(0)?_a:va,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ga(n,Sa)),t.join("")};var ba=/[#\/\?@]/g,va=/[#\?:]/g,_a=/[#\?]/g,wa=/[#\?@]/g,Sa=/#/g;function Ca(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ea(t){t.a||(t.a=new ra,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Oa(t,e){Ea(t),e=Ia(t,e),oa(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,oa((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ia(t)))}function Ta(t,e){return Ea(t),e=Ia(t,e),oa(t.a.b,e)}function xa(t,e,n){Oa(t,e),0<n.length&&(t.c=null,t.a.set(Ia(t,e),Ji(n)),t.b+=n.length)}function Ia(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Ni=Ca.prototype).add=function(t,e){Ea(this),this.c=null,t=Ia(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Ni.forEach=function(t,e){Ea(this),this.a.forEach(function(n,r){Yi(n,function(n){t.call(e,n,r,this)},this)},this)},Ni.L=function(){Ea(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Ni.K=function(t){Ea(this);var e=[];if("string"==typeof t)Ta(this,t)&&(e=Zi(e,this.a.get(Ia(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Zi(e,t[n])}return e},Ni.set=function(t,e){return Ea(this),this.c=null,Ta(this,t=Ia(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Ni.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Ni.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ka=function(){return function(t,e){this.b=t,this.a=e}}();function Aa(t){this.g=t||Ra,t=Li.PerformanceNavigationTiming?0<(t=Li.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Li.ia&&Li.ia.ya&&Li.ia.ya()&&Li.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Ra=10;function ja(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Na(t){return t.b?1:t.a?t.a.size:0}function Pa(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Da(t,e){t.a?t.a.add(e):t.b=e}function La(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Ma(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=ji(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ji(t.c)}function Fa(){}function Va(){this.a=new Fa}function qa(t,e,n){var r=n||"";try{na(t,function(t,n){var i=t;Vi(t)&&(i=ns(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Vb){throw e.push(r+"type="+encodeURIComponent("_badmap")),Vb}}function Ua(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Aa.prototype.cancel=function(){var t,e;if(this.c=Ma(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=ji(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Fa.prototype.stringify=function(t){return Li.JSON.stringify(t,void 0)},Fa.prototype.parse=function(t){return Li.JSON.parse(t,void 0)};var Ba=Li.JSON.parse;function Ha(t){Xo.call(this),this.headers=new ra,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Wa,this.D=this.F=!1}$i(Ha,Xo);var Wa="",za=/^https?$/i,Ka=["POST","PUT"];function $a(t){return"content-type"==t.toLowerCase()}function Qa(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Ga(t),Za(t)}function Ga(t){t.u||(t.u=!0,ts(t,"complete"),ts(t,"error"))}function Ya(t){if(t.b&&void 0!==Di&&(!t.s[1]||4!=Xa(t)||2!=t.W()))if(t.l&&4==Xa(t))ms(t.za,0,t);else if(ts(t,"readystatechange"),4==Xa(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(sa)[1]||null;if(!o&&Li.self&&Li.self.location){var s=Li.self.location.protocol;o=s.substr(0,s.length-1)}i=!za.test(o?o.toLowerCase():"")}e=i}if(e)ts(t,"complete"),ts(t,"success");else{t.h=6;try{var a=2<Xa(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Ga(t)}}finally{Za(t)}}}function Za(t,e){if(t.a){Ja(t);var n=t.a,r=t.s[0]?Mi:null;t.a=null,t.s=null,e||ts(t,"ready");try{n.onreadystatechange=r}catch(Vb){}}}function Ja(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Li.clearTimeout(t.m),t.m=null)}function Xa(t){return t.a?t.a.readyState:0}function tu(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return so(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):fa(t,e,n))}function eu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function nu(t){this.pa=0,this.g=[],this.c=new Ss,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=eu("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=eu("baseRetryDelayMs",5e3,t),this.Ra=eu("retryDelaySeedMs",1e4,t),this.Ma=eu("forwardChannelMaxRetries",2,t),this.ma=eu("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Aa(t&&t.concurrentRequestLimit),this.ka=new Va,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function ru(t){if(ou(t),3==t.v){var e=t.R++,n=ua(t.B);fa(n,"SID",t.J),fa(n,"RID",e),fa(n,"TYPE","terminate"),cu(t,n),(e=new Bs(t,t.c,e,void 0)).H=2,e.i=pa(ua(n)),n=!1,Li.navigator&&Li.navigator.sendBeacon&&(n=Li.navigator.sendBeacon(e.i.toString(),"")),!n&&Li.Image&&((new Image).src=e.i,n=!0),n||(e.a=wu(e.g,null),e.a.ba(e.i)),e.u=Ki(),Ys(e)}vu(t)}function iu(t){t.a&&(fu(t),t.a.cancel(),t.a=null)}function ou(t){iu(t),t.j&&(Li.clearTimeout(t.j),t.j=null),mu(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Li.clearTimeout(t.h),t.h=null)}function su(t,e){t.g.push(new ka(t.Oa++,e)),3==t.v&&au(t)}function au(t){ja(t.b)||t.h||(t.h=!0,cs(t.Ba,t),t.u=0)}function uu(t,e){var n;n=e?e.f:t.R++;var r=ua(t.B);fa(r,"SID",t.J),fa(r,"RID",n),fa(r,"AID",t.P),cu(t,r),t.i&&t.l&&tu(r,t.i,t.l),n=new Bs(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=lu(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Da(t.b,n),Ks(n,r,e)}function cu(t,e){t.f&&na({},function(t,n){fa(e,n,t)})}function lu(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Wi(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{qa(l,s,"req"+c+"_")}catch(Xu){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function hu(t){t.a||t.j||(t.T=1,cs(t.Aa,t),t.o=0)}function du(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=js(Wi(t.Aa,t),yu(t,t.o)),t.o++,0))}function fu(t){null!=t.s&&(Li.clearTimeout(t.s),t.s=null)}function pu(t){t.a=new Bs(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=ua(t.la);fa(e,"RID","rpc"),fa(e,"SID",t.J),fa(e,"CI",t.H?"0":"1"),fa(e,"AID",t.P),cu(t,e),fa(e,"TYPE","xmlhttp"),t.i&&t.l&&tu(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=pa(ua(e)),n.j=null,n.I=!0,$s(n,t)}function mu(t){null!=t.m&&(Li.clearTimeout(t.m),t.m=null)}function gu(t,e){var n=null;if(t.a==e){mu(t),fu(t),t.a=null;var r=2}else{if(!Pa(t.b,e))return;n=e.s,La(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Ki()-e.u;var i=t.u;ts(r=Ts(),new Rs(r,n,e,i)),au(t)}else hu(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Na(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=js(Wi(t.Ba,t,e),yu(t,t.u)),t.u++,0)))}(t,e)||2==r&&du(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:bu(t,5);break;case 4:bu(t,10);break;case 3:bu(t,6);break;default:bu(t,2)}}function yu(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function bu(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Wi(t.Ya,t);n||(n=new aa("//www.google.com/images/cleardot.gif"),Li.location&&"http"==Li.location.protocol||ca(n,"https"),pa(n)),function(t,e){var n=new Ss;if(Li.Image){var r=new Image;r.onload=zi(Ua,n,r,"TestLoadImage: loaded",!0,e),r.onerror=zi(Ua,n,r,"TestLoadImage: error",!1,e),r.onabort=zi(Ua,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=zi(Ua,n,r,"TestLoadImage: timeout",!1,e),Li.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else As(2);t.v=0,t.f&&t.f.ra(e),vu(t),ou(t)}function vu(t){t.v=0,t.I=-1,t.f&&(0==Ma(t.b).length&&0==t.g.length||(t.b.c.length=0,Ji(t.g),t.g.length=0),t.f.qa())}function _u(t,e,n){var r=function(t){return t instanceof aa?ua(t):new aa(t,void 0)}(n);if(""!=r.c)e&&la(r,e+"."+r.c),ha(r,r.h);else{var i=Li.location;r=function(t,e,n,r){var i=new aa(null,void 0);return t&&ca(i,t),e&&la(i,e),n&&ha(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&so(t.V,function(t,e){fa(r,e,t)}),n=t.na,(e=t.A)&&n&&fa(r,e,n),fa(r,"VER",t.ha),cu(t,r),r}function wu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ha(t.Na)).F=t.C,e}function Su(){}function Cu(){if(mo&&!(10<=Number(To)))throw Error("Environmental error: no available transport.")}function Eu(t,e){Xo.call(this),this.a=new nu(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Xi(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Xi(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new xu(this)}function Ou(t){Vs.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Tu(){qs.call(this),this.status=1}function xu(t){this.a=t}(Ni=Ha.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Ms),this.a.onreadystatechange=Wi(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Qa(this,o)}t=n||"";var i=new ra(this.headers);r&&na(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=$a,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Li.FormData&&t instanceof Li.FormData,!(0<=Gi(Ka,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ja(this),0<this.o&&((this.D=function(t){return mo&&Oo(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Wi(this.xa,this)):this.m=ms(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Qa(this,o)}},Ni.xa=function(){void 0!==Di&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ts(this,"timeout"),this.abort(8))},Ni.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ts(this,"complete"),ts(this,"abort"),Za(this))},Ni.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Za(this,!0)),Ha.X.G.call(this)},Ni.za=function(){this.j||(this.A||this.l||this.g?Ya(this):this.Ua())},Ni.Ua=function(){Ya(this)},Ni.W=function(){try{return 2<Xa(this)?this.a.status:-1}catch(fo){return-1}},Ni.$=function(){try{return this.a?this.a.responseText:""}catch(fo){return""}},Ni.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ba(e)}},Ni.ua=function(){return this.h},Ni.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Ni=nu.prototype).ha=8,Ni.v=1,Ni.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Bs(this,this.c,t,void 0),r=this.l;if(this.O&&(r?co(r=ao(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=lu(this,n,e),fa(i=ua(this.B),"RID",t),fa(i,"CVER",22),this.A&&fa(i,"X-HTTP-Session-Id",this.A),cu(this,i),this.i&&r&&tu(i,this.i,r),Da(this.b,n),this.Ia&&fa(i,"TYPE","init"),this.da?(fa(i,"$req",e),fa(i,"SID","null"),n.U=!0,Ks(n,i,null)):Ks(n,i,e),this.v=2}}else 3==this.v&&(t?uu(this,t):0==this.g.length||ja(this.b)||uu(this))},Ni.Aa=function(){if(this.j=null,pu(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=js(Wi(this.Ta,this),t)}},Ni.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,As(10),iu(this),pu(this))},Ni.Sa=function(){null!=this.m&&(this.m=null,iu(this),du(this),As(19))},Ni.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),As(2)):(this.c.info("Failed to ping google.com"),As(1))},(Ni=Su.prototype).ta=function(){},Ni.sa=function(){},Ni.ra=function(){},Ni.qa=function(){},Ni.Ja=function(){},Cu.prototype.a=function(t,e){return new Eu(t,e)},$i(Eu,Xo),Eu.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;As(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=_u(t,null,t.fa),au(t)},Eu.prototype.close=function(){ru(this.a)},Eu.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,su(this.a,e)}else this.l?((e={}).__data__=ns(t),su(this.a,e)):su(this.a,t)},Eu.prototype.G=function(){this.a.f=null,delete this.f,ru(this.a),delete this.a,Eu.X.G.call(this)},$i(Ou,Vs),$i(Tu,qs),$i(xu,Su),xu.prototype.ta=function(){ts(this.a,"a")},xu.prototype.sa=function(t){ts(this.a,new Ou(t))},xu.prototype.ra=function(t){ts(this.a,new Tu(t))},xu.prototype.qa=function(){ts(this.a,"b")},Cu.prototype.createWebChannel=Cu.prototype.a,Eu.prototype.send=Eu.prototype.h,Eu.prototype.open=Eu.prototype.g,Eu.prototype.close=Eu.prototype.close,Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,Ps.COMPLETE="complete",Ls.EventType=Fs,Fs.OPEN="a",Fs.CLOSE="b",Fs.ERROR="c",Fs.MESSAGE="d",Xo.prototype.listen=Xo.prototype.va,Ha.prototype.listenOnce=Ha.prototype.wa,Ha.prototype.getLastError=Ha.prototype.Qa,Ha.prototype.getLastErrorCode=Ha.prototype.ua,Ha.prototype.getStatus=Ha.prototype.W,Ha.prototype.getResponseJson=Ha.prototype.Pa,Ha.prototype.getResponseText=Ha.prototype.$,Ha.prototype.send=Ha.prototype.ba;var Iu=Ns,ku=Ps,Au=Es,Ru=Ls,ju=Ha,Nu=n("mrSG"),Pu=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Pu.o=-1;var Du={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Lu=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Nu.d)(e,t),e}(Error),Mu=new Ai.b("@firebase/firestore");function Fu(){return Mu.logLevel}function Vu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Mu.logLevel<=Ai.a.DEBUG){var r=e.map(Bu);Mu.debug.apply(Mu,Object(Nu.h)(["Firestore (8.4.0): "+t],r))}}function qu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Mu.logLevel<=Ai.a.ERROR){var r=e.map(Bu);Mu.error.apply(Mu,Object(Nu.h)(["Firestore (8.4.0): "+t],r))}}function Uu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Mu.logLevel<=Ai.a.WARN){var r=e.map(Bu);Mu.warn.apply(Mu,Object(Nu.h)(["Firestore (8.4.0): "+t],r))}}function Bu(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Vb){return t}}function Hu(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.4.0) INTERNAL ASSERTION FAILED: "+t;throw qu(e),new Error(e)}function Wu(t,e){t||Hu()}function zu(t,e){return t}function Ku(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var $u=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Ku(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Qu(t,e){return t<e?-1:t>e?1:0}function Gu(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Yu(t){return t+"\0"}var Zu=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Lu(Du.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Lu(Du.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Lu(Du.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Lu(Du.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Qu(this.nanoseconds,t.nanoseconds):Qu(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Ju=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Zu(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Xu(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function tc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ec(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var nc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Hu(),void 0===n?n=t.length-e:n>t.length-e&&Hu(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),rc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nu.d)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Lu(Du.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(nc),ic=/^[_a-zA-Z][_a-zA-Z0-9]*$/,oc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nu.d)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ic.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Lu(Du.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Lu(Du.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Lu(Du.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Lu(Du.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(nc),sc=function(){function t(t){this.fields=t,t.sort(oc.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Gu(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),ac=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Qu(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();ac.EMPTY_BYTE_STRING=new ac("");var uc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cc(t){if(Wu(!!t),"string"==typeof t){var e=0,n=uc.exec(t);if(Wu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:lc(t.seconds),nanos:lc(t.nanos)}}function lc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function hc(t){return"string"==typeof t?ac.fromBase64String(t):ac.fromUint8Array(t)}function dc(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function fc(t){var e=t.mapValue.fields.__previous_value__;return dc(e)?fc(e):e}function pc(t){var e=cc(t.mapValue.fields.__local_write_time__.timestampValue);return new Zu(e.seconds,e.nanos)}function mc(t){return null==t}function gc(t){return 0===t&&1/t==-1/0}function yc(t){return"number"==typeof t&&Number.isInteger(t)&&!gc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var bc=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(rc.fromString(e))},t.fromName=function(e){return new t(rc.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===rc.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return rc.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new rc(e.slice()))},t}();function vc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dc(t)?4:10:Hu()}function _c(t,e){var n=vc(t);if(n!==vc(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pc(t).isEqual(pc(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=cc(t.timestampValue),r=cc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return hc(t.bytesValue).isEqual(hc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return lc(t.geoPointValue.latitude)===lc(e.geoPointValue.latitude)&&lc(t.geoPointValue.longitude)===lc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return lc(t.integerValue)===lc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=lc(t.doubleValue),r=lc(e.doubleValue);return n===r?gc(n)===gc(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Gu(t.arrayValue.values||[],e.arrayValue.values||[],_c);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Xu(n)!==Xu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!_c(n[i],r[i])))return!1;return!0}(t,e);default:return Hu()}}function wc(t,e){return void 0!==(t.values||[]).find(function(t){return _c(t,e)})}function Sc(t,e){var n=vc(t),r=vc(e);if(n!==r)return Qu(n,r);switch(n){case 0:return 0;case 1:return Qu(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=lc(t.integerValue||t.doubleValue),r=lc(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Cc(t.timestampValue,e.timestampValue);case 4:return Cc(pc(t),pc(e));case 5:return Qu(t.stringValue,e.stringValue);case 6:return function(t,e){var n=hc(t),r=hc(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Qu(n[i],r[i]);if(0!==o)return o}return Qu(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Qu(lc(t.latitude),lc(e.latitude));return 0!==n?n:Qu(lc(t.longitude),lc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Sc(n[i],r[i]);if(o)return o}return Qu(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Qu(r[s],o[s]);if(0!==a)return a;var u=Sc(n[r[s]],i[o[s]]);if(0!==u)return u}return Qu(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Hu()}}function Cc(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Qu(t,e);var n=cc(t),r=cc(e),i=Qu(n.seconds,r.seconds);return 0!==i?i:Qu(n.nanos,r.nanos)}function Ec(t){return Oc(t)}function Oc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=cc(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?hc(t.bytesValue).toBase64():"referenceValue"in t?bc.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Oc(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Oc(t.fields[o])}return e+"}"}(t.mapValue):Hu();var e}function Tc(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function xc(t){return!!t&&"integerValue"in t}function Ic(t){return!!t&&"arrayValue"in t}function kc(t){return!!t&&"nullValue"in t}function Ac(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rc(t){return!!t&&"mapValue"in t}var jc=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(oc.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return _c(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===vc(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=Rc(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(oc.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Rc(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Nc(t){var e=[];return tc(t.fields||{},function(t,n){var r=new oc([t]);if(Rc(n)){var i=Nc(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new sc(e)}var Pc=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Ju.min(),jc.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,jc.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,jc.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=jc.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=jc.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Dc=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Lc(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Dc(t,e,n,r,i,o,s)}function Mc(t){var e=zu(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Ec(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),mc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Yc(e.startAt)),e.endAt&&(n+="|ub:",n+=Yc(e.endAt)),e.h=n}return e.h}function Fc(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Jc(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!_c(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tl(t.startAt,e.startAt)&&tl(t.endAt,e.endAt)}function Vc(t){return bc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var qc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Nu.d)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Uc(t,n,r):"array-contains"===n?new zc(t,r):"in"===n?new Kc(t,r):"not-in"===n?new $c(t,r):"array-contains-any"===n?new Qc(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Bc(t,n):new Hc(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Sc(e,this.value)):null!==e&&vc(this.value)===vc(e)&&this.m(Sc(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Hu()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Uc=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=bc.fromName(r.referenceValue),i}return Object(Nu.d)(e,t),e.prototype.matches=function(t){var e=bc.comparator(t.key,this.key);return this.m(e)},e}(qc),Bc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Wc(0,n),r}return Object(Nu.d)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(qc),Hc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Wc(0,n),r}return Object(Nu.d)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(qc);function Wc(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return bc.fromName(t.referenceValue)})}var zc=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Nu.d)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Ic(e)&&wc(e.arrayValue,this.value)},e}(qc),Kc=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Nu.d)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&wc(this.value.arrayValue,e)},e}(qc),$c=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Nu.d)(e,t),e.prototype.matches=function(t){if(wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!wc(this.value.arrayValue,e)},e}(qc),Qc=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Nu.d)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Ic(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return wc(e.value.arrayValue,t)})},e}(qc),Gc=function(t,e){this.position=t,this.before=e};function Yc(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Ec(t)}).join(",")}var Zc=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Jc(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Xc(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?bc.comparator(bc.fromName(s.referenceValue),n.key):Sc(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function tl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!_c(t.position[n],e.position[n]))return!1;return!0}var el=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function nl(t,e,n,r,i,o,s,a){return new el(t,e,n,r,i,o,s,a)}function rl(t){return new el(t)}function il(t){return!mc(t.limit)&&"F"===t.limitType}function ol(t){return!mc(t.limit)&&"L"===t.limitType}function sl(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function al(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function ul(t){return null!==t.collectionGroup}function cl(t){var e=zu(t);if(null===e.p){e.p=[];var n=al(e),r=sl(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Zc(n)),e.p.push(new Zc(oc.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Zc(oc.keyField(),u))}}}return e.p}function ll(t){var e=zu(t);if(!e.T)if("F"===e.limitType)e.T=Lc(e.path,e.collectionGroup,cl(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=cl(e);r<i.length;r++){var o=i[r];n.push(new Zc(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Gc(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Gc(e.startAt.position,!e.startAt.before):null;e.T=Lc(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function hl(t,e,n){return new el(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dl(t,e){return Fc(ll(t),ll(e))&&t.limitType===e.limitType}function fl(t){return Mc(ll(t))+"|lt:"+t.limitType}function pl(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ec(e.value);var e}).join(", ")+"]"),mc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Yc(t.startAt)),t.endAt&&(e+=", endAt: "+Yc(t.endAt)),"Target("+e+")"}(ll(t))+"; limitType="+t.limitType+")"}function ml(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):bc.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Xc(t.startAt,cl(t),e)||t.endAt&&Xc(t.endAt,cl(t),e))}(t,e)}function gl(t){return function(e,n){for(var r=!1,i=0,o=cl(t);i<o.length;i++){var s=o[i],a=yl(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function yl(t,e,n){var r=t.field.isKeyField()?bc.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Sc(r,i):Hu()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Hu()}}function bl(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gc(e)?"-0":e}}function vl(t){return{integerValue:""+t}}function _l(t,e){return yc(e)?vl(e):bl(t,e)}var wl=function(){this._=void 0};function Sl(t,e,n){return t instanceof Ol?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Tl?xl(t,e):t instanceof Il?kl(t,e):function(t,e){var n=El(t,e),r=Rl(n)+Rl(t.A);return xc(n)&&xc(t.A)?vl(r):bl(t.R,r)}(t,e)}function Cl(t,e,n){return t instanceof Tl?xl(t,e):t instanceof Il?kl(t,e):n}function El(t,e){return t instanceof Al?xc(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ol=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nu.d)(e,t),e}(wl),Tl=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Nu.d)(e,t),e}(wl);function xl(t,e){for(var n=jl(e),r=function(t){n.some(function(e){return _c(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Il=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Nu.d)(e,t),e}(wl);function kl(t,e){for(var n=jl(e),r=function(t){n=n.filter(function(e){return!_c(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Al=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Nu.d)(e,t),e}(wl);function Rl(t){return lc(t.integerValue||t.doubleValue)}function jl(t){return Ic(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Nl=function(t,e){this.field=t,this.transform=e},Pl=function(t,e){this.version=t,this.transformResults=e},Dl=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ll(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Ml=function(){};function Fl(t,e,n){t instanceof Hl?function(t,e,n){var r=t.value.clone(),i=Kl(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Wl?function(t,e,n){if(Ll(t.precondition,e)){var r=Kl(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(zl(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Vl(t,e,n){t instanceof Hl?function(t,e,n){if(Ll(t.precondition,e)){var r=t.value.clone(),i=$l(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Bl(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Wl?function(t,e,n){if(Ll(t.precondition,e)){var r=$l(t.fieldTransforms,n,e),i=e.data;i.setAll(zl(t)),i.setAll(r),e.convertToFoundDocument(Bl(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Ll(t.precondition,e)&&e.convertToNoDocument(Ju.min())}(t,e)}function ql(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=El(o.transform,s||null);null!=a&&(null==n&&(n=jc.empty()),n.set(o.field,a))}return n||null}function Ul(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Gu(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Tl&&e instanceof Tl||t instanceof Il&&e instanceof Il?Gu(t.elements,e.elements,_c):t instanceof Al&&e instanceof Al?_c(t.A,e.A):t instanceof Ol&&e instanceof Ol}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Bl(t){return t.isFoundDocument()?t.version:Ju.min()}var Hl=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Nu.d)(e,t),e}(Ml),Wl=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Nu.d)(e,t),e}(Ml);function zl(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Kl(t,e,n){var r=new Map;Wu(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Cl(s,a,n[i]))}return r}function $l(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Sl(a,u,e))}return r}var Ql,Gl,Yl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Nu.d)(e,t),e}(Ml),Zl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Nu.d)(e,t),e}(Ml),Jl=function(t){this.count=t};function Xl(t){switch(t){case Du.OK:return Hu();case Du.CANCELLED:case Du.UNKNOWN:case Du.DEADLINE_EXCEEDED:case Du.RESOURCE_EXHAUSTED:case Du.INTERNAL:case Du.UNAVAILABLE:case Du.UNAUTHENTICATED:return!1;case Du.INVALID_ARGUMENT:case Du.NOT_FOUND:case Du.ALREADY_EXISTS:case Du.PERMISSION_DENIED:case Du.FAILED_PRECONDITION:case Du.ABORTED:case Du.OUT_OF_RANGE:case Du.UNIMPLEMENTED:case Du.DATA_LOSS:return!0;default:return Hu()}}function th(t){if(void 0===t)return qu("GRPC error has no .code"),Du.UNKNOWN;switch(t){case Ql.OK:return Du.OK;case Ql.CANCELLED:return Du.CANCELLED;case Ql.UNKNOWN:return Du.UNKNOWN;case Ql.DEADLINE_EXCEEDED:return Du.DEADLINE_EXCEEDED;case Ql.RESOURCE_EXHAUSTED:return Du.RESOURCE_EXHAUSTED;case Ql.INTERNAL:return Du.INTERNAL;case Ql.UNAVAILABLE:return Du.UNAVAILABLE;case Ql.UNAUTHENTICATED:return Du.UNAUTHENTICATED;case Ql.INVALID_ARGUMENT:return Du.INVALID_ARGUMENT;case Ql.NOT_FOUND:return Du.NOT_FOUND;case Ql.ALREADY_EXISTS:return Du.ALREADY_EXISTS;case Ql.PERMISSION_DENIED:return Du.PERMISSION_DENIED;case Ql.FAILED_PRECONDITION:return Du.FAILED_PRECONDITION;case Ql.ABORTED:return Du.ABORTED;case Ql.OUT_OF_RANGE:return Du.OUT_OF_RANGE;case Ql.UNIMPLEMENTED:return Du.UNIMPLEMENTED;case Ql.DATA_LOSS:return Du.DATA_LOSS;default:return Hu()}}(Gl=Ql||(Ql={}))[Gl.OK=0]="OK",Gl[Gl.CANCELLED=1]="CANCELLED",Gl[Gl.UNKNOWN=2]="UNKNOWN",Gl[Gl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gl[Gl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gl[Gl.NOT_FOUND=5]="NOT_FOUND",Gl[Gl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gl[Gl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gl[Gl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gl[Gl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gl[Gl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gl[Gl.ABORTED=10]="ABORTED",Gl[Gl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gl[Gl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gl[Gl.INTERNAL=13]="INTERNAL",Gl[Gl.UNAVAILABLE=14]="UNAVAILABLE",Gl[Gl.DATA_LOSS=15]="DATA_LOSS";var eh=function(){function t(t,e){this.comparator=t,this.root=e||rh.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rh.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rh.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new nh(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new nh(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new nh(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new nh(this.root,t,this.comparator,!0)},t}(),nh=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),rh=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Hu();if(this.right.isRed())throw Hu();var t=this.left.check();if(t!==this.right.check())throw Hu();return t+(this.isRed()?0:1)},t}();rh.EMPTY=null,rh.RED=!0,rh.BLACK=!1,rh.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Hu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Hu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Hu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Hu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Hu()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new rh(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var ih=function(){function t(t){this.comparator=t,this.data=new eh(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new oh(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new oh(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),oh=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),sh=new eh(bc.comparator);function ah(){return sh}var uh=new eh(bc.comparator);function ch(){return uh}var lh=new eh(bc.comparator);function hh(){return lh}var dh=new ih(bc.comparator);function fh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=dh,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ph=new ih(Qu);function mh(){return ph}var gh=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,yh.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Ju.min(),r,mh(),ah(),fh())},t}(),yh=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(ac.EMPTY_BYTE_STRING,n,fh(),fh(),fh())},t}(),bh=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},vh=function(t,e){this.targetId=t,this.V=e},_h=function(t,e,n,r){void 0===n&&(n=ac.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},wh=function(){function t(){this.S=0,this.D=Eh(),this.C=ac.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=fh(),e=fh(),n=fh();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Hu()}}),new yh(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Eh()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Sh=function(){function t(t){this.W=t,this.G=new Map,this.H=ah(),this.J=Ch(),this.Y=new ih(Qu)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Hu()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Vc(i))if(0===n){var o=new bc(i.path);this.tt(e,o,Pc.newNoDocument(o,Ju.min()))}else Wu(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Vc(o.target)){var s=new bc(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Pc.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=fh();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new gh(t,n,this.Y,this.H,r);return this.H=ah(),this.J=Ch(),this.Y=new ih(Qu),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new wh,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new ih(Qu),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Vu("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new wh),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Ch(){return new eh(bc.comparator)}function Eh(){return new eh(bc.comparator)}var Oh={asc:"ASCENDING",desc:"DESCENDING"},Th={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xh=function(t,e){this.databaseId=t,this.I=e};function Ih(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function kh(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ah(t,e){return Ih(t,e.toTimestamp())}function Rh(t){return Wu(!!t),Ju.fromTimestamp(function(t){var e=cc(t);return new Zu(e.seconds,e.nanos)}(t))}function jh(t,e){return function(t){return new rc(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Nh(t){var e=rc.fromString(t);return Wu(rd(e)),e}function Ph(t,e){return jh(t.databaseId,e.path)}function Dh(t,e){var n=Nh(e);if(n.get(1)!==t.databaseId.projectId)throw new Lu(Du.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Lu(Du.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new bc(Vh(n))}function Lh(t,e){return jh(t.databaseId,e)}function Mh(t){var e=Nh(t);return 4===e.length?rc.emptyPath():Vh(e)}function Fh(t){return new rc(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Vh(t){return Wu(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function qh(t,e,n){return{name:Ph(t,e),fields:n.toProto().mapValue.fields}}function Uh(t,e,n){var r=Dh(t,e.name),i=Rh(e.updateTime),o=new jc({mapValue:{fields:e.fields}}),s=Pc.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Bh(t,e){var n;if(e instanceof Hl)n={update:qh(t,e.key,e.value)};else if(e instanceof Yl)n={delete:Ph(t,e.key)};else if(e instanceof Wl)n={update:qh(t,e.key,e.data),updateMask:nd(e.fieldMask)};else{if(!(e instanceof Zl))return Hu();n={verify:Ph(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Ol)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Tl)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Il)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Al)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Hu()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ah(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Hu()}(t,e.precondition)),n}function Hh(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Dl.updateTime(Rh(t.updateTime)):void 0!==t.exists?Dl.exists(t.exists):Dl.none()}(e.currentDocument):Dl.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Wu("REQUEST_TIME"===e.setToServerValue),n=new Ol):"appendMissingElements"in e?n=new Tl(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Il(e.removeAllFromArray.values||[]):"increment"in e?n=new Al(t,e.increment):Hu();var r=oc.fromServerFormat(e.fieldPath);return new Nl(r,n)}(t,e)}):[];if(e.update){var i=Dh(t,e.update.name),o=new jc({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new sc((t.fieldPaths||[]).map(function(t){return oc.fromServerFormat(t)}))}(e.updateMask);return new Wl(i,o,s,n,r)}return new Hl(i,o,n,r)}if(e.delete){var a=Dh(t,e.delete);return new Yl(a,n)}if(e.verify){var u=Dh(t,e.verify);return new Zl(u,n)}return Hu()}function Wh(t,e){return{documents:[Lh(t,e.path)]}}function zh(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Lh(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Lh(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Ac(t.value))return{unaryFilter:{field:Jh(t.field),op:"IS_NAN"}};if(kc(t.value))return{unaryFilter:{field:Jh(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ac(t.value))return{unaryFilter:{field:Jh(t.field),op:"IS_NOT_NAN"}};if(kc(t.value))return{unaryFilter:{field:Jh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jh(t.field),op:Zh(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Jh(t.field),direction:Yh(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||mc(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Qh(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Qh(e.endAt)),n}function Kh(t){var e=Mh(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Wu(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=$h(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Zc(Xh(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return mc(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Gh(n.startAt));var l=null;return n.endAt&&(l=Gh(n.endAt)),nl(e,i,a,s,u,"F",c,l)}function $h(t){return t?void 0!==t.unaryFilter?[ed(t)]:void 0!==t.fieldFilter?[td(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return $h(t)}).reduce(function(t,e){return t.concat(e)}):Hu():[]}function Qh(t){return{before:t.before,values:t.position}}function Gh(t){return new Gc(t.values||[],!!t.before)}function Yh(t){return Oh[t]}function Zh(t){return Th[t]}function Jh(t){return{fieldPath:t.canonicalString()}}function Xh(t){return oc.fromServerFormat(t.fieldPath)}function td(t){return qc.create(Xh(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Hu()}}(t.fieldFilter.op),t.fieldFilter.value)}function ed(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Xh(t.unaryFilter.field);return qc.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Xh(t.unaryFilter.field);return qc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Xh(t.unaryFilter.field);return qc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Xh(t.unaryFilter.field);return qc.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Hu()}}function nd(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function rd(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function id(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=sd(e)),e=od(t.get(n),e);return sd(e)}function od(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function sd(t){return t+"\x01\x01"}function ad(t){var e=t.length;if(Wu(e>=2),2===e)return Wu("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),rc.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Hu(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Hu()}o=s+2}return new rc(r)}var ud=function(t,e){this.seconds=t,this.nanoseconds=e},cd=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};cd.store="owner",cd.key="owner";var ld=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ld.store="mutationQueues",ld.keyPath="userId";var hd=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};hd.store="mutations",hd.keyPath="batchId",hd.userMutationsIndex="userMutationsIndex",hd.userMutationsKeyPath=["userId","batchId"];var dd=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,id(e)]},t.key=function(t,e,n){return[t,id(e),n]},t}();dd.store="documentMutations",dd.PLACEHOLDER=new dd;var fd=function(t,e){this.path=t,this.readTime=e},pd=function(t,e){this.path=t,this.version=e},md=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};md.store="remoteDocuments",md.readTimeIndex="readTimeIndex",md.readTimeIndexPath="readTime",md.collectionReadTimeIndex="collectionReadTimeIndex",md.collectionReadTimeIndexPath=["parentPath","readTime"];var gd=function(t){this.byteSize=t};gd.store="remoteDocumentGlobal",gd.key="remoteDocumentGlobalKey";var yd=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};yd.store="targets",yd.keyPath="targetId",yd.queryTargetsIndexName="queryTargetsIndex",yd.queryTargetsKeyPath=["canonicalId","targetId"];var bd=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};bd.store="targetDocuments",bd.keyPath=["targetId","path"],bd.documentTargetsIndex="documentTargetsIndex",bd.documentTargetsKeyPath=["path","targetId"];var vd=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};vd.key="targetGlobalKey",vd.store="targetGlobal";var _d=function(t,e){this.collectionId=t,this.parent=e};_d.store="collectionParents",_d.keyPath=["collectionId","parent"];var wd=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};wd.store="clientMetadata",wd.keyPath="clientId";var Sd=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Sd.store="bundles",Sd.keyPath="bundleId";var Cd=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Cd.store="namedQueries",Cd.keyPath="name";var Ed=Object(Nu.h)(Object(Nu.h)([],Object(Nu.h)(Object(Nu.h)([],Object(Nu.h)(Object(Nu.h)([],Object(Nu.h)(Object(Nu.h)([],[ld.store,hd.store,dd.store,md.store,yd.store,cd.store,vd.store,bd.store]),[wd.store])),[gd.store])),[_d.store])),[Sd.store,Cd.store]),Od="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Td=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),xd=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Id=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Hu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),kd=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new xd,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new jd(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Md(e.target.error);n.ft.reject(new jd(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new jd(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Vu("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Pd(e)},t}(),Ad=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(ki.n)())&&qu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Vu("SimpleDb","Removing database:",t),Dd(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(ki.n)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Nu.b)(this,void 0,void 0,function(){var e,n=this;return Object(Nu.e)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Vu("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new jd(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Lu(Du.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new jd(t,n))},i.onupgradeneeded=function(t){Vu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Vu("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Nu.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Nu.e)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Nu.e)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=kd.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Id.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Vu("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Rd=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Dd(this.Pt.delete())},t}(),jd=function(t){function e(e,n){var r=this;return(r=t.call(this,Du.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Nu.d)(e,t),e}(Lu);function Nd(t){return"IndexedDbTransactionError"===t.name}var Pd=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Vu("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Vu("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Dd(n)},t.prototype.add=function(t){return Vu("SimpleDb","ADD",this.store.name,t,t),Dd(this.store.add(t))},t.prototype.get=function(t){var e=this;return Dd(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Vu("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Vu("SimpleDb","DELETE",this.store.name,t),Dd(this.store.delete(t))},t.prototype.count=function(){return Vu("SimpleDb","COUNT",this.store.name),Dd(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Vu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Id(function(n,r){e.onerror=function(t){var e=Md(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Id(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Rd(i),s=e(i.primaryKey,i.value,o);if(s instanceof Id){var a=s.catch(function(t){return o.done(),Id.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Id.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Dd(t){return new Id(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Md(t.target.error);n(e)}})}var Ld=!1;function Md(t){var e=Ad._t(Object(ki.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Lu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ld||(Ld=!0,setTimeout(function(){throw r},0)),r}}return t}var Fd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Nu.d)(e,t),e}(Td);function Vd(t,e){var n=zu(t);return Ad.It(n.Mt,e)}var qd=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Fl(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Vl(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Vl(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ju.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},fh())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Gu(this.mutations,t.mutations,function(t,e){return Ul(t,e)})&&Gu(this.baseMutations,t.baseMutations,function(t,e){return Ul(t,e)})},t}(),Ud=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Wu(e.mutations.length===r.length);for(var i=hh(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Bd=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Ju.min()),void 0===o&&(o=Ju.min()),void 0===s&&(s=ac.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Hd=function(t){this.Lt=t};function Wd(t,e){if(e.document)return Uh(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=bc.fromSegments(e.noDocument.path),r=Gd(e.noDocument.readTime),i=Pc.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=bc.fromSegments(e.unknownDocument.path);return r=Gd(e.unknownDocument.version),Pc.newUnknownDocument(o,r)}return Hu()}function zd(t,e,n){var r=Kd(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Ph(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:Ih(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new md(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Qd(e.version);return s=e.hasCommittedMutations,new md(null,new fd(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Qd(e.version);return new md(new pd(c,l),null,null,!0,r,i)}return Hu()}function Kd(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function $d(t){var e=new Zu(t[0],t[1]);return Ju.fromTimestamp(e)}function Qd(t){var e=t.toTimestamp();return new ud(e.seconds,e.nanoseconds)}function Gd(t){var e=new Zu(t.seconds,t.nanoseconds);return Ju.fromTimestamp(e)}function Yd(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Hh(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Hh(t.Lt,e)}),o=Zu.fromMillis(e.localWriteTimeMs);return new qd(e.batchId,o,n,i)}function Zd(t){var e,n,r=Gd(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Gd(t.lastLimboFreeSnapshotVersion):Ju.min();return void 0!==t.query.documents?(Wu(1===(n=t.query).documents.length),e=ll(rl(Mh(n.documents[0])))):e=function(t){return ll(Kh(t))}(t.query),new Bd(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ac.fromBase64String(t.resumeToken))}function Jd(t,e){var n,r=Qd(e.snapshotVersion),i=Qd(e.lastLimboFreeSnapshotVersion);n=Vc(e.target)?Wh(t.Lt,e.target):zh(t.Lt,e.target);var o=e.resumeToken.toBase64();return new yd(e.targetId,Mc(e.target),r,o,e.sequenceNumber,i,n)}function Xd(t){var e=Kh({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?hl(e,e.limit,"L"):e}var tf=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return ef(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Gd(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return ef(t).put({bundleId:(n=e).id,createTime:Qd(Rh(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return nf(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Xd(e.bundledQuery),readTime:Gd(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return nf(t).put(function(t){return{name:t.name,readTime:Qd(Rh(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function ef(t){return Vd(t,Sd.store)}function nf(t){return Vd(t,Cd.store)}var rf=function(){function t(){this.Bt=new of}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Id.resolve()},t.prototype.getCollectionParents=function(t,e){return Id.resolve(this.Bt.getEntries(e))},t}(),of=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ih(rc.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ih(rc.comparator)).toArray()},t}(),sf=function(){function t(){this.qt=new of}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:id(i)};return af(t).put(o)}return Id.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Yu(e),""],!1,!0);return af(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ad(o.parent))}return n})},t}();function af(t){return Vd(t,_d.store)}var uf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cf=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function lf(t,e,n){var r=t.store(hd.store),i=t.store(dd.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Wu(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=dd.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return Id.waitFor(o).next(function(){return c})}function hf(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Hu();e=t.noDocument}return JSON.stringify(e).length}cf.DEFAULT_COLLECTION_PERCENTILE=10,cf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cf.DEFAULT=new cf(41943040,cf.DEFAULT_COLLECTION_PERCENTILE,cf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cf.DISABLED=new cf(-1,0,0);var df=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Wu(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pf(t).Ot({index:hd.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=mf(t),s=pf(t);return s.add({}).next(function(a){Wu("number"==typeof a);for(var u=new qd(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Bh(t.Lt,e)}),i=n.mutations.map(function(e){return Bh(t.Lt,e)});return new hd(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new ih(function(t,e){return Qu(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],m=dd.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(m,dd.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Id.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return pf(t).get(e).next(function(t){return t?(Wu(t.userId===n.userId),Yd(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Id.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return pf(t).Ot({index:hd.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Wu(e.batchId>=r),o=Yd(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return pf(t).Ot({index:hd.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pf(t).Nt(hd.userMutationsIndex,n).next(function(t){return t.map(function(t){return Yd(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=dd.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return mf(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=ad(r[1]);if(a===n.userId&&e.path.isEqual(c))return pf(t).get(u).next(function(t){if(!t)throw Hu();Wu(t.userId===n.userId),o.push(Yd(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ih(Qu),i=[];return e.forEach(function(e){var o=dd.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=mf(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=ad(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Id.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=dd.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ih(Qu);return mf(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=ad(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(pf(t).get(e).next(function(t){if(null===t)throw Hu();Wu(t.userId===n.userId),r.push(Yd(n.R,t))}))}),Id.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return lf(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Id.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Id.resolve();var r=IDBKeyRange.lowerBound(dd.prefixForUser(e.userId)),i=[];return mf(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=ad(t[1]);i.push(o)}else r.done()}).next(function(){Wu(0===i.length)})})},t.prototype.containsKey=function(t,e){return ff(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return gf(t).get(this.userId).next(function(t){return t||new ld(e.userId,-1,"")})},t}();function ff(t,e,n){var r=dd.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return mf(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function pf(t){return Vd(t,hd.store)}function mf(t){return Vd(t,dd.store)}function gf(t){return Vd(t,ld.store)}var yf=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),bf=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new yf(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Ju.fromTimestamp(new Zu(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return vf(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Wu(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return vf(t).Ot(function(s,a){var u=Zd(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Id.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return vf(t).Ot(function(t,n){var r=Zd(n);e(r)})},t.prototype.Xt=function(t){return _f(t).get(vd.key).next(function(t){return Wu(null!==t),t})},t.prototype.Zt=function(t,e){return _f(t).put(vd.key,e)},t.prototype.te=function(t,e){return vf(t).put(Jd(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Mc(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return vf(t).Ot({range:r,index:yd.queryTargetsIndexName},function(t,n,r){var o=Zd(n);Fc(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=wf(t);return e.forEach(function(e){var s=id(e.path);i.push(o.put(new bd(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Id.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=wf(t);return Id.forEach(e,function(e){var o=id(e.path);return Id.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=wf(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=wf(t),i=fh();return r.Ot({range:n,kt:!0},function(t,e,n){var r=ad(t[1]),o=new bc(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=id(e.path),r=IDBKeyRange.bound([n],[Yu(n)],!1,!0),i=0;return wf(t).Ot({index:bd.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return vf(t).get(e).next(function(t){return t?Zd(t):null})},t}();function vf(t){return Vd(t,yd.store)}function _f(t){return Vd(t,vd.store)}function wf(t){return Vd(t,bd.store)}function Sf(t){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(e){if(t.code!==Du.FAILED_PRECONDITION||t.message!==Od)throw t;return Vu("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Cf(t,e){var n=t[1],r=e[1],i=Qu(t[0],e[0]);return 0===i?Qu(n,r):i}var Ef=function(){function t(t){this.ne=t,this.buffer=new ih(Cf),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Cf(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Of=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Vu("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Nu.b)(e,void 0,void 0,function(){var e;return Object(Nu.e)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Nd(e=n.sent())?(Vu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Sf(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Tf=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Id.resolve(Pu.o);var r=new Ef(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Vu("LruGarbageCollector","Garbage collection skipped; disabled"),Id.resolve(uf)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Vu("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),uf):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Vu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Fu()<=Ai.a.DEBUG&&Vu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Id.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),xf=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Tf(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return If(t,n)},t.prototype.removeReference=function(t,e,n){return If(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return If(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return gf(t).$t(function(r){return ff(t,r,e).next(function(t){return t&&(n=!0),Id.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),wf(t).delete([0,id(s.path)])})});i.push(u)}}).next(function(){return Id.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return If(t,e)},t.prototype.we=function(t,e){var n,r=wf(t),i=Pu.o;return r.Ot({index:bd.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Pu.o&&e(new bc(ad(n)),i),i=s,n=o):i=Pu.o}).next(function(){i!==Pu.o&&e(new bc(ad(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function If(t,e){return wf(t).put(function(t,e){return new bd(0,id(t.path),e)}(e,t.currentSequenceNumber))}var kf=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){tc(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return ec(this.inner)},t}(),Af=function(){function t(){this.changes=new kf(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Ju.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Pc.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Id.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Rf=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Pf(t).put(Df(e),n)},t.prototype.removeEntry=function(t,e){var n=Pf(t),r=Df(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Pf(t).get(Df(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Pf(t).get(Df(e)).next(function(t){return{document:n.ye(e,t),size:hf(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=ah();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=ah(),i=new eh(bc.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,hf(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Id.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Pf(t).Ot({range:r},function(t,e,r){for(var s=bc.fromSegments(t);o&&bc.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ah(),o=e.path.length+1,s={};if(n.isEqual(Ju.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Kd(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=md.collectionReadTimeIndex}return Pf(t).Ot(s,function(t,n,s){if(t.length===o){var a=Wd(r.R,n);e.path.isPrefixOf(a.key.path)?ml(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new jf(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Nf(t).get(gd.key).next(function(t){return Wu(!!t),t})},t.prototype.me=function(t,e){return Nf(t).put(gd.key,e)},t.prototype.ye=function(t,e){if(e){var n=Wd(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Ju.min()))return n}return Pc.newInvalidDocument(t)},t}(),jf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new kf(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Nu.d)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new ih(function(t,e){return Qu(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=zd(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=hf(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=zd(e.Ie.R,Pc.newNoDocument(o,Ju.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Id.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Af);function Nf(t){return Vd(t,gd.store)}function Pf(t){return Vd(t,md.store)}function Df(t){return t.path.toArray()}var Lf=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Wu(n<r&&n>=0&&r<=11);var o=new kd("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(cd.store)}(t),function(t){t.createObjectStore(ld.store,{keyPath:ld.keyPath}),t.createObjectStore(hd.store,{keyPath:hd.keyPath,autoIncrement:!0}).createIndex(hd.userMutationsIndex,hd.userMutationsKeyPath,{unique:!0}),t.createObjectStore(dd.store)}(t),Mf(t),function(t){t.createObjectStore(md.store)}(t));var s=Id.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(bd.store),t.deleteObjectStore(yd.store),t.deleteObjectStore(vd.store)}(t),Mf(t)),s=s.next(function(){return function(t){var e=t.store(vd.store),n=new vd(0,0,Ju.min().toTimestamp(),0);return e.put(vd.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(hd.store).Nt().next(function(n){t.deleteObjectStore(hd.store),t.createObjectStore(hd.store,{keyPath:hd.keyPath,autoIncrement:!0}).createIndex(hd.userMutationsIndex,hd.userMutationsKeyPath,{unique:!0});var r=e.store(hd.store),i=n.map(function(t){return r.put(t)});return Id.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(wd.store,{keyPath:wd.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(gd.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(md.store);e.createIndex(md.readTimeIndex,md.readTimeIndexPath,{unique:!1}),e.createIndex(md.collectionReadTimeIndex,md.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Sd.store,{keyPath:Sd.keyPath})}(t),function(t){t.createObjectStore(Cd.store,{keyPath:Cd.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(md.store).Ot(function(t,n){e+=hf(n)}).next(function(){var n=new gd(e);return t.store(gd.store).put(gd.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(ld.store),r=t.store(hd.store);return n.Nt().next(function(n){return Id.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(hd.userMutationsIndex,i).next(function(r){return Id.forEach(r,function(r){Wu(r.userId===n.userId);var i=Yd(e.R,r);return lf(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(bd.store),n=t.store(md.store);return t.store(vd.store).get(vd.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new rc(n),s=function(t){return[0,id(t)]}(o);r.push(e.get(s).next(function(n){return n?Id.resolve():function(n){return e.put(new bd(0,id(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Id.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(_d.store,{keyPath:_d.keyPath});var n=e.store(_d.store),r=new of,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:id(i)})}};return e.store(md.store).Ot({kt:!0},function(t,e){var n=new rc(t);return i(n.popLast())}).next(function(){return e.store(dd.store).Ot({kt:!0},function(t,e){var n=ad(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(yd.store);return n.Ot(function(t,r){var i=Zd(r),o=Jd(e.R,i);return n.put(o)})},t}();function Mf(t){t.createObjectStore(bd.store,{keyPath:bd.keyPath}).createIndex(bd.documentTargetsIndex,bd.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(yd.store,{keyPath:yd.keyPath}).createIndex(yd.queryTargetsIndexName,yd.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(vd.store)}var Ff="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Vf=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Lu(Du.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xf(this,i),this.Le=n+"main",this.R=new Hd(u),this.Be=new Ad(this.Le,11,new Lf(this.R)),this.qe=new bf(this.referenceDelegate,this.R),this.Ut=new sf,this.Ue=function(t,e){return new Rf(t,e)}(this.R,this.Ut),this.Qe=new tf,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&qu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Lu(Du.FAILED_PRECONDITION,Ff);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Pu(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Nu.b)(e,void 0,void 0,function(){return Object(Nu.e)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Nu.b)(e,void 0,void 0,function(){return Object(Nu.e)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Nu.b)(e,void 0,void 0,function(){return Object(Nu.e)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Uf(e).put(new wd(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Nd(e))return Vu("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Vu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return qf(t).get(cd.key).next(function(t){return Id.resolve(e.tn(t))})},t.prototype.en=function(t){return Uf(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Nu.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Nu.e)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Vd(t,wd.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Id.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Id.resolve(!0):qf(t).get(cd.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Lu(Du.FAILED_PRECONDITION,Ff);return!1}}return!(!e.networkEnabled||!e.inForeground)||Uf(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Vu("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Nu.b)(this,void 0,void 0,function(){var t=this;return Object(Nu.e)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[cd.store,wd.store],function(e){var n=new Fd(e,Pu.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Uf(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return df.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Vu("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Ed,function(o){return r=new Fd(o,i.Ne?i.Ne.next():Pu.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw qu("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Lu(Du.FAILED_PRECONDITION,Od);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return qf(t).get(cd.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Lu(Du.FAILED_PRECONDITION,Ff)})},t.prototype.Ze=function(t){var e=new cd(this.clientId,this.allowTabSynchronization,Date.now());return qf(t).put(cd.key,e)},t.yt=function(){return Ad.yt()},t.prototype.Xe=function(t){var e=this,n=qf(t);return n.get(cd.key).next(function(t){return e.tn(t)?(Vu("IndexedDbPersistence","Releasing primary lease."),n.delete(cd.key)):Id.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(qu("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Vu("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return qu("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){qu("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function qf(t){return Vd(t,cd.store)}function Uf(t){return Vd(t,wd.store)}function Bf(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Hf=function(t,e){this.progress=t,this.wn=e},Wf=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return bc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):ul(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new bc(e)).next(function(t){var e=ch();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=ch();return this.Ut.getCollectionParents(t,i).next(function(s){return Id.forEach(s,function(s){var a=function(t,e){return new el(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Pc.newInvalidDocument(c),r=r.insert(c,l)),Vl(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){ml(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=fh(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Wl&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),zf=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=fh(),i=fh(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Kf=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Ju.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(il(e)||ol(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Fu()<=Ai.a.DEBUG&&Vu("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),pl(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new ih(gl(t));return e.forEach(function(e,r){ml(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Fu()<=Ai.a.DEBUG&&Vu("QueryEngine","Using full collection scan to execute query:",pl(e)),this.Sn.getDocumentsMatchingQuery(t,e,Ju.min())},t}(),$f=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new eh(Qu),this.kn=new kf(function(t){return Mc(t)},Fc),this.On=Ju.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Wf(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Qf(t,e,n,r){return new $f(t,e,n,r)}function Gf(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Nu.e)(this,function(s){switch(s.label){case 0:return n=zu(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Wf(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=fh(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var m=0,g=p.mutations;m<g.length;m++)s=s.add(g[m].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Yf(t,e){var n=zu(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Id.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Wu(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Zf(t){var e=zu(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Jf(t,e){var n=zu(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Wu(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=ah();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Xf(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Ju.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Id.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function Xf(t,e,n,r,i){var o=fh();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=ah();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Ju.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Vu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function tp(t,e){var n=zu(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function ep(t,e){var n=zu(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Id.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Bd(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function np(t,e,n){return Object(Nu.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Nu.e)(this,function(a){switch(a.label){case 0:r=zu(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Nd(s=a.sent()))throw s;return Vu("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function rp(t,e,n){var r=zu(t),i=Ju.min(),o=fh();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=zu(t),i=r.kn.get(n);return void 0!==i?Id.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,ll(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Ju.min(),n?o:fh())}).next(function(t){return{documents:t,Bn:o}})})}function ip(t,e){var n=zu(t),r=zu(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function op(t){var e=zu(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=zu(t),i=ah(),o=Kd(n),s=Pf(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:md.readTimeIndex,range:a},function(t,e){var n=Wd(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:$d(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function sp(t){return Object(Nu.b)(this,void 0,void 0,function(){var e;return Object(Nu.e)(this,function(n){return[2,(e=zu(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Pf(t),n=Ju.min();return e.Ot({index:md.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=$d(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function ap(t,e,n,r){return Object(Nu.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return Object(Nu.e)(this,function(p){switch(p.label){case 0:for(i=zu(t),o=fh(),s=ah(),a=hh(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,ep(i,function(t){return ll(rl(rc.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Xf(t,d,s,Ju.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function up(t,e,n){return void 0===n&&(n=fh()),Object(Nu.b)(this,void 0,void 0,function(){var r,i;return Object(Nu.e)(this,function(o){switch(o.label){case 0:return[4,ep(t,ll(Xd(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=zu(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Rh(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(ac.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var cp=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Id.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Rh(n.createTime)}),Id.resolve()},t.prototype.getNamedQuery=function(t,e){return Id.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Xd(t.bundledQuery),readTime:Rh(t.readTime)}}(e)),Id.resolve()},t}(),lp=function(){function t(){this.Wn=new ih(hp.Gn),this.zn=new ih(hp.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new hp(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new hp(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new bc(new rc([])),r=new hp(n,t),i=new hp(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new bc(new rc([])),n=new hp(e,t),r=new hp(e,t+1),i=fh();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new hp(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),hp=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return bc.comparator(t.key,e.key)||Qu(t.ns,e.ns)},t.Hn=function(t,e){return Qu(t.ns,e.ns)||bc.comparator(t.key,e.key)},t}(),dp=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new ih(hp.Gn)}return t.prototype.checkEmpty=function(t){return Id.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new qd(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new hp(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Id.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Id.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Id.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Id.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Id.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new hp(e,0),i=new hp(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Id.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ih(Qu);return e.forEach(function(t){var e=new hp(t,0),i=new hp(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Id.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;bc.isDocumentKey(i)||(i=i.child(""));var o=new hp(new bc(i),0),s=new ih(Qu);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Id.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Wu(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Id.forEach(e.mutations,function(i){var o=new hp(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new hp(e,0),r=this.rs.firstAfterOrEqual(n);return Id.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Id.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),fp=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new eh(bc.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Id.resolve(n?n.document.clone():Pc.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ah();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Pc.newInvalidDocument(t))}),Id.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ah(),i=new bc(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||ml(e,u)&&(r=r.insert(u.key,u.clone()))}return Id.resolve(r)},t.prototype.fs=function(t,e){return Id.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new pp(this)},t.prototype.getSize=function(t){return Id.resolve(this.size)},t}(),pp=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Nu.d)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Id.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Af),mp=function(){function t(t){this.persistence=t,this.ds=new kf(function(t){return Mc(t)},Fc),this.lastRemoteSnapshotVersion=Ju.min(),this.highestTargetId=0,this.ws=0,this._s=new lp,this.targetCount=0,this.ys=yf.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Id.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Id.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Id.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Id.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Id.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new yf(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Id.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Id.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Id.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Id.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Id.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Id.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Id.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Id.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Id.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Id.resolve(n)},t.prototype.containsKey=function(t,e){return Id.resolve(this._s.containsKey(e))},t}(),gp=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Pu(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new mp(this),this.Ut=new rf,this.Ue=function(t,e){return new fp(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Hd(e),this.Qe=new cp(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new dp(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Vu("MemoryPersistence","Starting transaction:",t);var i=new yp(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Id.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),yp=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Nu.d)(e,t),e}(Td),bp=function(){function t(t){this.persistence=t,this.As=new lp,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Hu()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Id.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Id.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Id.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Id.forEach(this.vs,function(r){var i=bc.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Id.or([function(){return Id.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),vp=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function _p(t,e){return"firestore_clients_"+t+"_"+e}function wp(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Sp(t,e){return"firestore_targets_"+t+"_"+e}vp.UNAUTHENTICATED=new vp(null),vp.GOOGLE_CREDENTIALS=new vp("google-credentials-uid"),vp.FIRST_PARTY=new vp("first-party-uid");var Cp=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Lu(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(qu("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ep=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Lu(i.error.code,i.error.message)),o?new t(e,i.state,r):(qu("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Op=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=mh(),s=0;i&&s<r.activeTargetIds.length;++s)i=yc(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(qu("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Tp=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(qu("SharedClientState","Failed to parse online state: "+e),null)},t}(),xp=function(){function t(){this.activeTargetIds=mh()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ip=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new eh(Qu),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=_p(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new xp),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Nu.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Nu.e)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(_p(this.persistenceKey,r)))&&(o=Op.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Sp(this.persistenceKey,t));if(n){var r=Ep.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Sp(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Vu("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Vu("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Vu("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Vu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void qu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Nu.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Nu.e)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Pu.o;if(null!=t)try{var n=JSON.parse(t);Wu("number"==typeof n),e=n}catch(t){qu("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Pu.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Cp(this.currentUser,t,e,n),i=wp(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=wp(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Sp(this.persistenceKey,t),i=new Ep(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Op.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Cp.Vs(new vp(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Ep.Vs(r,e)},t.prototype.js=function(t){return Tp.Vs(t)},t.prototype.ii=function(t){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Vu("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=mh();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),kp=function(){function t(){this.li=new xp,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new xp,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Ap=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Rp=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Vu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Vu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),jp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Np=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Pp=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Nu.d)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new ju;s.listenOnce(ku.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Iu.NO_ERROR:var e=s.getResponseJson();Vu("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Iu.TIMEOUT:Vu("Connection",'RPC "'+t+'" timed out'),o(new Lu(Du.DEADLINE_EXCEEDED,"Request time out"));break;case Iu.HTTP_ERROR:var n=s.getStatus();if(Vu("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Du).indexOf(e)>=0?e:Du.UNKNOWN}(r.status);o(new Lu(a,r.message))}else o(new Lu(Du.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Lu(Du.UNAVAILABLE,"Connection failed."));break;default:Hu()}}finally{Vu("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Cu,i=Ts(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(ki.u)()||Object(ki.x)()||Object(ki.r)()||Object(ki.t)()||Object(ki.y)()||Object(ki.q)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Vu("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Np({Ei:function(t){c?Vu("Connection","Not sending because WebChannel is closed:",t):(u||(Vu("Connection","Opening WebChannel transport."),a.open(),u=!0),Vu("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Ru.EventType.OPEN,function(){c||Vu("Connection","WebChannel transport opened.")}),h(a,Ru.EventType.CLOSE,function(){c||(c=!0,Vu("Connection","WebChannel transport closed"),l.Vi())}),h(a,Ru.EventType.ERROR,function(t){c||(c=!0,Uu("Connection","WebChannel transport errored:",t),l.Vi(new Lu(Du.UNAVAILABLE,"The operation could not be completed")))}),h(a,Ru.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Wu(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Vu("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Ql[t];if(void 0!==e)return th(e)}(i),s=r.message;void 0===o&&(o=Du.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Lu(o,s)),a.close()}else Vu("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Au.STAT_EVENT,function(t){10===t.stat?Vu("Connection","Detected buffering proxy"):11===t.stat&&Vu("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Vu("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Vu("RestConnection","Received: ",t),t},function(e){throw Uu("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.4.0",t["X-Firebase-GMPID"]=this.databaseInfo.appId,t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+jp[t]},t}());function Dp(){return"undefined"!=typeof window?window:null}function Lp(){return"undefined"!=typeof document?document:null}function Mp(t){return new xh(t,!0)}var Fp=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Vu("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Vp=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Fp(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Du.RESOURCE_EXHAUSTED?(qu(e.toString()),qu("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Du.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Lu(Du.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Nu.b)(t,void 0,void 0,function(){return Object(Nu.e)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Vu("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Vu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),qp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(Nu.d)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Hu()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Wu(void 0===e||"string"==typeof e),ac.fromBase64String(e||"")):(Wu(void 0===e||e instanceof Uint8Array),ac.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Du.UNKNOWN:th(t.code);return new Lu(e,t.message||"")}(a);n=new _h(r,i,o,s||null)}else if("documentChange"in e){i=Dh(t,(r=e.documentChange).document.name),o=Rh(r.document.updateTime);var a=new jc({mapValue:{fields:r.document.fields}}),u=(s=Pc.newFoundDocument(i,o,a),r.targetIds||[]);n=new bh(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Dh(t,(r=e.documentDelete).document),o=r.readTime?Rh(r.readTime):Ju.min(),a=Pc.newNoDocument(i,o),n=new bh([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Dh(t,(r=e.documentRemove).document),n=new bh([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Hu();var c=e.filter;i=new Jl(r=c.count||0),n=new vh(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Ju.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ju.min():e.readTime?Rh(e.readTime):Ju.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Fh(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Vc(r)?{documents:Wh(t,r)}:{query:zh(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=kh(t,e.resumeToken):e.snapshotVersion.compareTo(Ju.min())>0&&(n.readTime=Ih(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Hu()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Fh(this.R),e.removeTarget=t,this.cr(e)},e}(Vp),Up=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(Nu.d)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Wu(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Wu(void 0!==e),t.map(function(t){return function(t,e){var n=Rh(t.updateTime?t.updateTime:e);return n.isEqual(Ju.min())&&(n=Rh(e)),new Pl(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Rh(t.commitTime);return this.listener.Tr(n,e)}return Wu(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Fh(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Bh(e.R,t)})};this.cr(n)},e}(Vp),Bp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Nu.d)(e,t),e.prototype.br=function(){if(this.Rr)throw new Lu(Du.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw t.code===Du.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw t.code===Du.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Rr=!1},e}(function(){}),Hp=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(qu(e),this.Vr=!1):Vu("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Wp=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Nu.b)(o,void 0,void 0,function(){return Object(Nu.e)(this,function(t){switch(t.label){case 0:return Xp(this)?(Vu("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Nu.b)(this,void 0,void 0,function(){var e;return Object(Nu.e)(this,function(n){switch(n.label){case 0:return(e=zu(t)).$r.add(4),[4,Kp(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,zp(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Hp(n,r)};function zp(t){return Object(Nu.b)(this,void 0,void 0,function(){var e,n;return Object(Nu.e)(this,function(r){switch(r.label){case 0:if(!Xp(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Kp(t){return Object(Nu.b)(this,void 0,void 0,function(){var e,n;return Object(Nu.e)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function $p(t,e){var n=zu(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),Jp(n)?Zp(n):pm(n).er()&&Gp(n,e))}function Qp(t,e){var n=zu(t),r=pm(n);n.Or.delete(e),r.er()&&Yp(n,e),0===n.Or.size&&(r.er()?r.ir():Xp(n)&&n.Br.set("Unknown"))}function Gp(t,e){t.qr.U(e.targetId),pm(t).mr(e)}function Yp(t,e){t.qr.U(e),pm(t).yr(e)}function Zp(t){t.qr=new Sh({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),pm(t).start(),t.Br.Sr()}function Jp(t){return Xp(t)&&!pm(t).tr()&&t.Or.size>0}function Xp(t){return 0===zu(t).$r.size}function tm(t){t.qr=void 0}function em(t){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(e){return t.Or.forEach(function(e,n){Gp(t,e)}),[2]})})}function nm(t,e){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(n){return tm(t),Jp(t)?(t.Br.Nr(e),Zp(t)):t.Br.set("Unknown"),[2]})})}function rm(t,e,n){return Object(Nu.b)(this,void 0,void 0,function(){var r,i,o;return Object(Nu.e)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof _h&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Nu.e)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Vu("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,im(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof bh?t.qr.X(e):e instanceof vh?t.qr.rt(e):t.qr.et(e),n.isEqual(Ju.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Zf(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(ac.EMPTY_BYTE_STRING,n.snapshotVersion)),Yp(t,e);var r=new Bd(n.target,e,1,n.sequenceNumber);Gp(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Vu("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,im(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function im(t,e,n){return Object(Nu.b)(this,void 0,void 0,function(){var r=this;return Object(Nu.e)(this,function(i){switch(i.label){case 0:if(!Nd(e))throw e;return t.$r.add(1),[4,Kp(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Zf(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Nu.b)(r,void 0,void 0,function(){return Object(Nu.e)(this,function(e){switch(e.label){case 0:return Vu("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,zp(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function om(t,e){return e().catch(function(n){return im(t,n,e)})}function sm(t){return Object(Nu.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Nu.e)(this,function(s){switch(s.label){case 0:e=zu(t),n=mm(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Xp(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,tp(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=mm(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,im(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return am(e)&&um(e),[2]}})})}function am(t){return Xp(t)&&!mm(t).tr()&&t.kr.length>0}function um(t){mm(t).start()}function cm(t){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(e){return mm(t).Ar(),[2]})})}function lm(t){return Object(Nu.b)(this,void 0,void 0,function(){var e,n,r;return Object(Nu.e)(this,function(i){for(e=mm(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function hm(t,e,n){return Object(Nu.b)(this,void 0,void 0,function(){var r,i;return Object(Nu.e)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Ud.from(r,e,n),[4,om(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,sm(t)];case 2:return o.sent(),[2]}})})}function dm(t,e){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(n){switch(n.label){case 0:return e&&mm(t).pr?[4,function(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r;return Object(Nu.e)(this,function(i){switch(i.label){case 0:return Xl(r=e.code)&&r!==Du.ABORTED?(n=t.kr.shift(),mm(t).sr(),[4,om(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,sm(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return am(t)&&um(t),[2]}})})}function fm(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n;return Object(Nu.e)(this,function(r){switch(r.label){case 0:return n=zu(t),e?(n.$r.delete(2),[4,zp(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Kp(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function pm(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=zu(t);return r.br(),new qp(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:em.bind(null,t),Ri:nm.bind(null,t),_r:rm.bind(null,t)}),t.Mr.push(function(n){return Object(Nu.b)(e,void 0,void 0,function(){return Object(Nu.e)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Jp(t)?Zp(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),tm(t),e.label=3;case 3:return[2]}})})})),t.Ur}function mm(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=zu(t);return r.br(),new Up(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:cm.bind(null,t),Ri:dm.bind(null,t),Ir:lm.bind(null,t),Tr:hm.bind(null,t)}),t.Mr.push(function(n){return Object(Nu.b)(e,void 0,void 0,function(){return Object(Nu.e)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,sm(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Vu("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var gm=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new xd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lu(Du.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ym(t,e){if(qu("AsyncQueue",e+": "+t),Nd(t))return new Lu(Du.UNAVAILABLE,e+": "+t);throw t}var bm=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||bc.comparator(e.key,n.key)}:function(t,e){return bc.comparator(t.key,e.key)},this.keyedMap=ch(),this.sortedSet=new eh(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),vm=function(){function t(){this.Kr=new eh(bc.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Hu():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),_m=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,bm.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&dl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),wm=function(){this.Wr=void 0,this.listeners=[]},Sm=function(){this.queries=new kf(function(t){return fl(t)},dl),this.onlineState="Unknown",this.Gr=new Set};function Cm(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Nu.e)(this,function(c){switch(c.label){case 0:if(n=zu(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new wm),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=ym(a,"Initialization of query '"+pl(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&xm(n),[2]}})})}function Em(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Nu.e)(this,function(a){return n=zu(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Om(t,e){for(var n=zu(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&xm(n)}function Tm(t,e,n){var r=zu(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function xm(t){t.Gr.forEach(function(t){t.next()})}var Im=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new _m(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=_m.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),km=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Am=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Dh(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Uh(this.R,t.document,!1):Pc.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Rh(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Am(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||fh()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Nu.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Nu.e)(this,function(o){switch(o.label){case 0:return[4,ap(this.localStore,new Am(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,up(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Hf(Object.assign({},this.progress),t))]}})})}}();var Rm=function(t){this.key=t},jm=function(t){this.key=t},Nm=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=fh(),this.mutatedKeys=fh(),this.lo=gl(t),this.fo=new bm(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new vm,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=il(this.query)&&i.size===this.query.limit?i.last():null,c=ol(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=ml(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),il(this.query)||ol(this.query))for(;s.size>this.query.limit;){var l=il(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hu()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new _m(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new vm,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=fh(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new jm(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Rm(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=fh();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return _m.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Pm=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Dm=function(t){this.key=t,this.bo=!1},Lm=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new kf(function(t){return fl(t)},dl),this.Vo=new Map,this.So=new Set,this.Do=new eh(bc.comparator),this.Co=new Map,this.No=new lp,this.xo={},this.Fo=new Map,this.ko=yf.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function Mm(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Nu.e)(this,function(a){switch(a.label){case 0:return n=dg(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,ep(n.localStore,ll(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Fm(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&$p(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Fm(t,e,n,r){return Object(Nu.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Nu.e)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(Nu.b)(this,void 0,void 0,function(){var i,o,s;return Object(Nu.e)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,rp(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Zm(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,rp(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Nm(e,i.Bn),s=o._o(i.documents),a=yh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Zm(t,n,u.To),c=new Pm(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Vm(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r,i;return Object(Nu.e)(this,function(o){switch(o.label){case 0:return n=zu(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!dl(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,np(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Qp(n.remoteStore,r.targetId),Gm(n,r.targetId)}).catch(Sf)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Gm(n,r.targetId),[4,np(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function qm(t,e,n){return Object(Nu.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Nu.e)(this,function(a){switch(a.label){case 0:r=fg(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=zu(t),i=Zu.now(),o=e.reduce(function(t,e){return t.add(e.key)},fh());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=ql(c,n.get(c.key));null!=l&&s.push(new Wl(c.key,l,Nc(l.toProto().mapValue),Dl.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new eh(Qu)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,tg(r,i.changes)];case 3:return a.sent(),[4,sm(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=ym(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Um(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r;return Object(Nu.e)(this,function(i){switch(i.label){case 0:n=zu(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Jf(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Wu(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Wu(r.bo):t.removedDocuments.size>0&&(Wu(r.bo),r.bo=!1))}),[4,tg(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Sf(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Bm(t,e,n){var r=zu(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=zu(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&xm(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Hm(t,e,n){return Object(Nu.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Nu.e)(this,function(c){switch(c.label){case 0:return(r=zu(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new eh(bc.comparator)).insert(o,Pc.newNoDocument(o,Ju.min())),a=fh().add(o),u=new gh(Ju.min(),new Map,new ih(Qu),s,a),[4,Um(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Xm(r),[3,4];case 2:return[4,np(r.localStore,e,!1).then(function(){return Gm(r,e,n)}).catch(Sf)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Wm(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r,i;return Object(Nu.e)(this,function(o){switch(o.label){case 0:n=zu(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Yf(n.localStore,e)];case 2:return i=o.sent(),Qm(n,r,null),$m(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,tg(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Sf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function zm(t,e,n){return Object(Nu.b)(this,void 0,void 0,function(){var r,i;return Object(Nu.e)(this,function(o){switch(o.label){case 0:r=zu(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=zu(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Wu(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Qm(r,e,n),$m(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,tg(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Sf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Km(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Nu.e)(this,function(a){switch(a.label){case 0:Xp((n=zu(t)).remoteStore)||Vu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=zu(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=ym(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function $m(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Qm(t,e,n){var r=zu(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Gm(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Ym(t,e)})}function Ym(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Qp(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Xm(t))}function Zm(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Rm?(t.No.addReference(o.key,e),Jm(t,o)):o instanceof jm?(Vu("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Ym(t,o.key)):Hu()}}function Jm(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Vu("SyncEngine","New document in limbo: "+n),t.So.add(r),Xm(t))}function Xm(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new bc(rc.fromString(e)),r=t.ko.next();t.Co.set(r,new Dm(n)),t.Do=t.Do.insert(n,r),$p(t.remoteStore,new Bd(ll(rl(n.path)),r,2,Pu.o))}}function tg(t,e,n){return Object(Nu.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Nu.e)(this,function(a){switch(a.label){case 0:return r=zu(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=zf.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Nu.e)(this,function(l){switch(l.label){case 0:n=zu(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Id.forEach(e,function(e){return Id.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Id.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Nd(r=l.sent()))throw r;return Vu("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function eg(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r;return Object(Nu.e)(this,function(i){switch(i.label){case 0:return(n=zu(t)).currentUser.isEqual(e)?[3,3]:(Vu("SyncEngine","User change. New user:",e.toKey()),[4,Gf(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Lu(Du.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,tg(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function ng(t,e){var n=zu(t),r=n.Co.get(e);if(r&&r.bo)return fh().add(r.key);var i=fh(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function rg(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r,i;return Object(Nu.e)(this,function(o){switch(o.label){case 0:return[4,rp((n=zu(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Zm(n,e.targetId,i.To),i)]}})})}function ig(t){return Object(Nu.b)(this,void 0,void 0,function(){var e;return Object(Nu.e)(this,function(n){return[2,op((e=zu(t)).localStore).then(function(t){return tg(e,t)})]})})}function og(t,e,n,r){return Object(Nu.b)(this,void 0,void 0,function(){var i,o;return Object(Nu.e)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=zu(t),r=zu(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Id.resolve(null)})})}((i=zu(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,sm(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Qm(i,e,r||null),$m(i,e),function(t,e){zu(zu(t)._n).Gt(e)}(i.localStore,e)):Hu(),s.label=4;case 4:return[4,tg(i,o)];case 5:return s.sent(),[3,7];case 6:Vu("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function sg(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Nu.e)(this,function(c){switch(c.label){case 0:return dg(n=zu(t)),fg(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,ag(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,fm(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)$p(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Gm(n,e),np(n.localStore,e,!0)}),Qp(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,ag(n,a)];case 5:return c.sent(),function(t){var e=zu(t);e.Co.forEach(function(t,n){Qp(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new eh(bc.comparator)}(n),n.Oo=!1,[4,fm(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function ag(t,e,n){return Object(Nu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(Nu.e)(this,function(m){switch(m.label){case 0:n=zu(t),r=[],i=[],o=0,s=e,m.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,ep(n.localStore,ll(c[0]))]:[3,7]):[3,13];case 2:u=m.sent(),l=0,h=c,m.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,rg(n,d)]):[3,6];case 4:(f=m.sent()).snapshot&&i.push(f.snapshot),m.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,ip(n.localStore,a)];case 8:return p=m.sent(),[4,ep(n.localStore,p)];case 9:return u=m.sent(),[4,Fm(n,ug(p),a,!1)];case 10:m.sent(),m.label=11;case 11:r.push(u),m.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function ug(t){return nl(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function cg(t){var e=zu(t);return zu(zu(e.localStore).persistence).fn()}function lg(t,e,n,r){return Object(Nu.b)(this,void 0,void 0,function(){var i,o,s;return Object(Nu.e)(this,function(a){switch(a.label){case 0:return(i=zu(t)).Oo?(Vu("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,op(i.localStore)];case 3:return o=a.sent(),s=gh.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,tg(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,np(i.localStore,e,!0)];case 6:return a.sent(),Gm(i,e,r),[3,8];case 7:Hu(),a.label=8;case 8:return[2]}})})}function hg(t,e,n){return Object(Nu.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Nu.e)(this,function(d){switch(d.label){case 0:if(!(r=dg(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Vu("SyncEngine","Adding an already active target "+s),[3,5]):[4,ip(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,ep(r.localStore,a)];case 3:return u=d.sent(),[4,Fm(r,ug(a),u.targetId,!1)];case 4:d.sent(),$p(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Nu.e)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,np(r.localStore,t,!1).then(function(){Qp(r.remoteStore,t),Gm(r,t)}).catch(Sf)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function dg(t){var e=zu(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Um.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ng.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Hm.bind(null,e),e.vo._r=Om.bind(null,e.eventManager),e.vo.Mo=Tm.bind(null,e.eventManager),e}function fg(t){var e=zu(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zm.bind(null,e),e}var pg=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(e){switch(e.label){case 0:return this.R=Mp(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Qf(this.persistence,new Kf,t.initialUser,this.R)},t.prototype.qo=function(t){return new gp(bp.bs,this.R)},t.prototype.Bo=function(t){return new kp},t.prototype.terminate=function(){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),mg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Nu.d)(e,t),e.prototype.initialize=function(e){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,sp(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,fg(this.Ko.syncEngine)];case 4:return n.sent(),[4,sm(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return Qf(this.persistence,new Kf,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Of(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Bf(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?cf.withCacheSize(this.cacheSizeBytes):cf.DEFAULT;return new Vf(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Dp(),Lp(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new kp},e}(pg),gg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Nu.d)(e,t),e.prototype.initialize=function(e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r=this;return Object(Nu.e)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Ip?(this.sharedClientState.syncEngine={ui:og.bind(null,n),ai:lg.bind(null,n),hi:hg.bind(null,n),fn:cg.bind(null,n),ci:ig.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Nu.b)(r,void 0,void 0,function(){return Object(Nu.e)(this,function(e){switch(e.label){case 0:return[4,sg(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Dp();if(!Ip.yt(e))throw new Lu(Du.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Bf(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ip(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(mg),yg=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n=this;return Object(Nu.e)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Bm(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=eg.bind(null,this.syncEngine),[4,fm(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Sm},t.prototype.createDatastore=function(t){var e=Mp(t.databaseInfo.databaseId),n=new Pp(t.databaseInfo);return function(t,e,n){return new Bp(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Bm(s.syncEngine,t,0)},o=Rp.yt()?new Rp:new Ap,new Wp(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Lm(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Nu.b)(this,void 0,void 0,function(){var e;return Object(Nu.e)(this,function(n){switch(n.label){case 0:return e=zu(t),Vu("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Kp(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),bg=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),vg=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new xd,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Nu.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Nu.e)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new km(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Nu.b)(this,void 0,void 0,function(){var t,e;return Object(Nu.e)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Nu.b)(this,void 0,void 0,function(){var e;return Object(Nu.e)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Nu.b)(this,void 0,void 0,function(){var t,e;return Object(Nu.e)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Nu.b)(this,void 0,void 0,function(){var e,n=this;return Object(Nu.e)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Lu(Du.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Nu.e)(this,function(u){switch(u.label){case 0:return n=zu(t),r=Fh(n.R)+"/documents",i={documents:e.map(function(t){return Ph(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Wu(!!e.found);var n=Dh(t,e.found.name),r=Rh(e.found.updateTime),i=new jc({mapValue:{fields:e.found.fields}});return Pc.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Wu(!!e.missing),Wu(!!e.readTime);var n=Dh(t,e.missing),r=Rh(e.readTime);return Pc.newNoDocument(n,r)}(t,e):Hu()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Wu(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Yl(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Nu.b)(this,void 0,void 0,function(){var t,e=this;return Object(Nu.e)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=bc.fromPath(n);e.mutations.push(new Zl(r,e.precondition(r)))}),[4,function(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r,i;return Object(Nu.e)(this,function(o){switch(o.label){case 0:return n=zu(t),r=Fh(n.R)+"/documents",i={writes:e.map(function(t){return Bh(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Hu();e=Ju.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Lu(Du.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Dl.updateTime(e):Dl.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Ju.min()))throw new Lu(Du.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dl.updateTime(e)}return Dl.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),_g=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Fp(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Nu.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Nu.e)(this,function(r){return t=new vg(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!mc(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Xl(e)}return!1},t}(),wg=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=vp.UNAUTHENTICATED,this.clientId=$u.u(),this.credentialListener=function(){},this.receivedInitialUser=new xd,this.credentials.setChangeListener(function(t){Vu("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Lu(Du.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new xd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Nu.b)(t,void 0,void 0,function(){var t,n;return Object(Nu.e)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ym(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Sg(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Nu.e)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Vu("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Nu.b)(i,void 0,void 0,function(){return Object(Nu.e)(this,function(t){switch(t.label){case 0:return[4,Gf(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Cg(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r;return Object(Nu.e)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Eg(t)];case 1:return n=i.sent(),Vu("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Nu.b)(this,void 0,void 0,function(){var n,r;return Object(Nu.e)(this,function(i){switch(i.label){case 0:return(n=zu(t)).asyncQueue.verifyOperationInProgress(),Vu("RemoteStore","RemoteStore received new credentials"),r=Xp(n),n.$r.add(3),[4,Kp(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,zp(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function Eg(t){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Vu("FirestoreClient","Using default OfflineComponentProvider"),[4,Sg(t,new pg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Og(t){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Vu("FirestoreClient","Using default OnlineComponentProvider"),[4,Cg(t,new yg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Tg(t){return Eg(t).then(function(t){return t.persistence})}function xg(t){return Eg(t).then(function(t){return t.localStore})}function Ig(t){return Og(t).then(function(t){return t.remoteStore})}function kg(t){return Og(t).then(function(t){return t.syncEngine})}function Ag(t){return Object(Nu.b)(this,void 0,void 0,function(){var e,n;return Object(Nu.e)(this,function(r){switch(r.label){case 0:return[4,Og(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Mm.bind(null,e.syncEngine),n.onUnlisten=Vm.bind(null,e.syncEngine),n)]}})})}function Rg(t,e,n){var r=this;void 0===n&&(n={});var i=new xd;return t.asyncQueue.enqueueAndForget(function(){return Object(Nu.b)(r,void 0,void 0,function(){var r;return Object(Nu.e)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new bg({next:function(o){e.enqueueAndForget(function(){return Em(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Lu(Du.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Lu(Du.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Im(rl(n.path),o,{includeMetadataChanges:!0,so:!0});return Cm(t,s)},[4,Ag(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function jg(t,e,n){var r=this;void 0===n&&(n={});var i=new xd;return t.asyncQueue.enqueueAndForget(function(){return Object(Nu.b)(r,void 0,void 0,function(){var r;return Object(Nu.e)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new bg({next:function(n){e.enqueueAndForget(function(){return Em(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Lu(Du.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Im(n,o,{includeMetadataChanges:!0,so:!0});return Cm(t,s)},[4,Ag(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Ng=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},Pg=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Dg=new Map,Lg=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Mg=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(vp.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Fg=function(){function t(t){var e=this;this.oc=null,this.currentUser=vp.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Vu("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Wu("string"==typeof n.accessToken),new Lg(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Wu(null===t||"string"==typeof t),new vp(t)},t}(),Vg=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=vp.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),qg=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new Vg(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(vp.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Ug(t,e,n){if(!n)throw new Lu(Du.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Bg(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Lu(Du.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Hg(t,e,n,r){if(!0===e&&!0===r)throw new Lu(Du.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Wg(t){if(!bc.isDocumentKey(t))throw new Lu(Du.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function zg(t){if(bc.isDocumentKey(t))throw new Lu(Du.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Kg(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Hu()}function $g(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Lu(Du.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Kg(t);throw new Lu(Du.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Qg(t,e){if(e<=0)throw new Lu(Du.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Gg=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Lu(Du.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Lu(Du.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Hg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Yg=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Gg({}),this._settingsFrozen=!1,t instanceof Pg?(this._databaseId=t,this._credentials=new Mg):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Lu(Du.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pg(t.options.projectId)}(t),this._credentials=new Fg(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Lu(Du.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Lu(Du.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gg(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Mg;switch(t.type){case"gapi":var e=t.client;return Wu(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new qg(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Lu(Du.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Dg.get(this))&&(Vu("ComponentProvider","Removing Datastore"),Dg.delete(this),t.terminate()),Promise.resolve();var t},t}(),Zg=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Xg(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Jg=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Xg=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,rl(r))||this)._path=r,i.type="collection",i}return Object(Nu.d)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Zg(this.firestore,null,new bc(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Jg);function ty(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(ki.m)(t),Ug("collection","path",e),t instanceof Yg)return zg(n=rc.fromString.apply(rc,Object(Nu.h)([e],r))),new Xg(t,null,n);if(!(t instanceof Zg||t instanceof Xg))throw new Lu(Du.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return zg(n=rc.fromString.apply(rc,Object(Nu.h)([t.path],r)).child(rc.fromString(e))),new Xg(t.firestore,null,n)}function ey(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(ki.m)(t),1===arguments.length&&(e=$u.u()),Ug("doc","path",e),t instanceof Yg)return Wg(n=rc.fromString.apply(rc,Object(Nu.h)([e],r))),new Zg(t,null,new bc(n));if(!(t instanceof Zg||t instanceof Xg))throw new Lu(Du.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Wg(n=t._path.child(rc.fromString.apply(rc,Object(Nu.h)([e],r)))),new Zg(t.firestore,t instanceof Xg?t._converter:null,new bc(n))}function ny(t,e){return t=Object(ki.m)(t),e=Object(ki.m)(e),(t instanceof Zg||t instanceof Xg)&&(e instanceof Zg||e instanceof Xg)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function ry(t,e){return t=Object(ki.m)(t),e=Object(ki.m)(e),t instanceof Jg&&e instanceof Jg&&t.firestore===e.firestore&&dl(t._query,e._query)&&t._converter===e._converter}var iy=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new Fp(this,"async_queue_retry"),this.Ec=function(){var e=Lp();e&&Vu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Lp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=Lp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(Nu.b)(this,void 0,void 0,function(){var t,e=this;return Object(Nu.e)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!Nd(t=n.sent()))throw t;return Vu("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,qu("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=gm.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&Hu()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(Nu.b)(this,void 0,void 0,function(){var t;return Object(Nu.e)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function oy(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new xd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var sy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new iy,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Nu.d)(e,t),e.prototype._terminate=function(){return this._firestoreClient||uy(this),this._firestoreClient.terminate()},e}(Yg);function ay(t){return t._firestoreClient||uy(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function uy(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Ng(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new wg(t._credentials,t._queue,r)}function cy(t,e,n){var r=this,i=new xd;return t.asyncQueue.enqueue(function(){return Object(Nu.b)(r,void 0,void 0,function(){var r;return Object(Nu.e)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Sg(t,n)];case 1:return o.sent(),[4,Cg(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Du.FAILED_PRECONDITION||t.code===Du.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function ly(t){if(t._initialized||t._terminated)throw new Lu(Du.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var hy=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Lu(Du.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oc(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),dy=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(ac.fromBase64String(e))}catch(e){throw new Lu(Du.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(ac.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),fy=function(t){this._methodName=t},py=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Lu(Du.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Lu(Du.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Qu(this._lat,t._lat)||Qu(this._long,t._long)},t}(),my=/^__.*__$/,gy=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Wl(t,this.data,this.fieldMask,e,this.fieldTransforms):new Hl(t,this.data,e,this.fieldTransforms)},t}(),yy=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Wl(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function by(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hu()}}var vy=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return Vy(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(by(this.Dc)&&my.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),_y=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Mp(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new vy({Dc:t,methodName:e,Lc:n,path:oc.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function wy(t){var e=t._freezeSettings(),n=Mp(t._databaseId);return new _y(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sy(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);Dy("Data must be an object, but it was:",s,r);var a,u,c=Ny(r,s);if(o.merge)a=new sc(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Ly(e,d[h],n);if(!s.contains(f))throw new Lu(Du.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");qy(l,f)||l.push(f)}a=new sc(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new gy(new jc(c),a,u)}var Cy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nu.d)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(fy);function Ey(t,e,n){return new vy({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Oy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nu.d)(e,t),e.prototype._toFieldTransform=function(t){return new Nl(t.path,new Ol)},e.prototype.isEqual=function(t){return t instanceof e},e}(fy),Ty=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Nu.d)(e,t),e.prototype._toFieldTransform=function(t){var e=Ey(this,t,!0),n=this.qc.map(function(t){return jy(t,e)}),r=new Tl(n);return new Nl(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(fy),xy=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Nu.d)(e,t),e.prototype._toFieldTransform=function(t){var e=Ey(this,t,!0),n=this.qc.map(function(t){return jy(t,e)}),r=new Il(n);return new Nl(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(fy),Iy=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Nu.d)(e,t),e.prototype._toFieldTransform=function(t){var e=new Al(t.R,_l(t.R,this.Uc));return new Nl(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(fy);function ky(t,e,n,r){var i=t.Bc(1,e,n);Dy("Data must be an object, but it was:",i,r);var o=[],s=jc.empty();tc(r,function(t,r){var a=Fy(e,t,n);r=Object(ki.m)(r);var u=i.kc(a);if(r instanceof Cy)o.push(a);else{var c=jy(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new sc(o);return new yy(s,a,i.fieldTransforms)}function Ay(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[Ly(e,r,n)],u=[i];if(o.length%2!=0)throw new Lu(Du.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Ly(e,o[c])),u.push(o[c+1]);for(var l=[],h=jc.empty(),d=a.length-1;d>=0;--d)if(!qy(l,a[d])){var f=a[d],p=u[d];p=Object(ki.m)(p);var m=s.kc(f);if(p instanceof Cy)l.push(f);else{var g=jy(p,m);null!=g&&(l.push(f),h.set(f,g))}}var y=new sc(l);return new yy(h,y,s.fieldTransforms)}function Ry(t,e,n,r){return void 0===r&&(r=!1),jy(n,t.Bc(r?4:3,e))}function jy(t,e){if(Py(t=Object(ki.m)(t)))return Dy("Unsupported field value:",e,t),Ny(t,e);if(t instanceof fy)return function(t,e){if(!by(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=jy(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(ki.m)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _l(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Zu.fromDate(t);return{timestampValue:Ih(e.R,n)}}if(t instanceof Zu)return n=new Zu(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ih(e.R,n)};if(t instanceof py)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof dy)return{bytesValue:kh(e.R,t._byteString)};if(t instanceof Zg){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:jh(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+Kg(t))}(t,e)}function Ny(t,e){var n={};return ec(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tc(t,function(t,r){var i=jy(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Py(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Zu||t instanceof py||t instanceof dy||t instanceof Zg||t instanceof fy)}function Dy(t,e,n){if(!Py(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Kg(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function Ly(t,e,n){if((e=Object(ki.m)(e))instanceof hy)return e._internalPath;if("string"==typeof e)return Fy(t,e);throw Vy("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var My=new RegExp("[~\\*/\\[\\]]");function Fy(t,e,n){if(e.search(My)>=0)throw Vy("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(hy.bind.apply(hy,Object(Nu.h)([void 0],e.split(".")))))._internalPath}catch(r){throw Vy("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Vy(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Lu(Du.INVALID_ARGUMENT,(a+=". ")+t+u)}function qy(t,e){return t.some(function(t){return t.isEqual(e)})}var Uy=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Zg(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new By(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Hy("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),By=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nu.d)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Uy);function Hy(t,e){return"string"==typeof e?Fy(t,e):e instanceof hy?e._internalPath:e._delegate._internalPath}var Wy=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),zy=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Nu.d)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Ky(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Hy("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Uy),Ky=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nu.d)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(zy),$y=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Wy(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Ky(n._firestore,n._userDataWriter,r.key,r,new Wy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Lu(Du.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Ky(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Wy(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Ky(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Wy(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Qy(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Qy(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hu()}}function Gy(t,e){return t instanceof zy&&e instanceof zy?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof $y&&e instanceof $y&&t._firestore===e._firestore&&ry(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Yy(t){if(ol(t)&&0===t.explicitOrderBy.length)throw new Lu(Du.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Zy=function(){};function Jy(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Xy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(Nu.d)(e,t),e.prototype._apply=function(t){var e=wy(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Lu(Du.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){sb(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(ob(r,t,l[c]));a={arrayValue:{values:u}}}else a=ob(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||sb(s,o),a=Ry(n,"where",s,"in"===o||"not-in"===o);var h=qc.create(i,o,a);return function(t,e){if(e.g()){var n=al(t);if(null!==n&&!n.isEqual(e.field))throw new Lu(Du.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=sl(t);null!==r&&ab(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Lu(Du.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new Jg(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new el(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Zy),tb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(Nu.d)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Lu(Du.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Lu(Du.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Zc(e,n);return function(t,e){if(null===sl(t)){var n=al(t);null!==n&&ab(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new Jg(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new el(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Zy),eb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(Nu.d)(e,t),e.prototype._apply=function(t){return new Jg(t.firestore,t._converter,hl(t._query,this.Gc,this.zc))},e}(Zy),nb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Nu.d)(e,t),e.prototype._apply=function(t){var e=ib(t,this.type,this.Hc,this.Jc);return new Jg(t.firestore,t._converter,function(t,e){return new el(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Zy),rb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Nu.d)(e,t),e.prototype._apply=function(t){var e=ib(t,this.type,this.Hc,this.Jc);return new Jg(t.firestore,t._converter,function(t,e){return new el(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Zy);function ib(t,e,n,r){if(n[0]=Object(ki.m)(n[0]),n[0]instanceof Uy)return function(t,e,n,r,i){if(!r)throw new Lu(Du.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=cl(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Tc(e,r.key));else{var c=r.data.field(u.field);if(dc(c))throw new Lu(Du.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Lu(Du.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Gc(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=wy(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Lu(Du.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Lu(Du.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ul(t)&&-1!==c.indexOf("/"))throw new Lu(Du.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(rc.fromString(c));if(!bc.isDocumentKey(l))throw new Lu(Du.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new bc(l);a.push(Tc(e,h))}else{var d=Ry(n,r,c);a.push(d)}}return new Gc(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function ob(t,e,n){if("string"==typeof(n=Object(ki.m)(n))){if(""===n)throw new Lu(Du.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ul(e)&&-1!==n.indexOf("/"))throw new Lu(Du.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(rc.fromString(n));if(!bc.isDocumentKey(r))throw new Lu(Du.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Tc(t,new bc(r))}if(n instanceof Zg)return Tc(t,n._key);throw new Lu(Du.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Kg(n)+".")}function sb(t,e){if(!Array.isArray(t)||0===t.length)throw new Lu(Du.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Lu(Du.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function ab(t,e,n){if(!n.isEqual(e))throw new Lu(Du.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var ub=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),vc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return lc(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(hc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Hu()}},t.prototype.convertObject=function(t,e){var n=this,r={};return tc(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new py(lc(t.latitude),lc(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=fc(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(pc(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=cc(t);return new Zu(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=rc.fromString(t);Wu(rd(n));var r=new Pg(n.get(1),n.get(3)),i=new bc(n.popFirst(5));return r.isEqual(e)||qu("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function cb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var lb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Nu.d)(e,t),e.prototype.convertBytes=function(t){return new dy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Zg(this.firestore,null,e)},e}(ub),hb=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=wy(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=db(t,this._firestore),i=cb(r._converter,e,n),o=Sy(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,Dl.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=db(t,this._firestore);return o="string"==typeof(e=Object(ki.m)(e))||e instanceof hy?Ay(this._dataReader,"WriteBatch.update",s._key,e,n,r):ky(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Dl.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=db(t,this._firestore);return this._mutations=this._mutations.concat(new Yl(e._key,Dl.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Lu(Du.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function db(t,e){if((t=Object(ki.m)(t)).firestore!==e)throw new Lu(Du.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var fb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Nu.d)(e,t),e.prototype.convertBytes=function(t){return new dy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Zg(this.firestore,null,e)},e}(ub);function pb(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=$g(t,Zg);var o=$g(t.firestore,sy),s=wy(o);return gb(o,[("string"==typeof(e=Object(ki.m)(e))||e instanceof hy?Ay(s,"updateDoc",t._key,e,n,r):ky(s,"updateDoc",t._key,e)).toMutation(t._key,Dl.exists(!0))])}function mb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(ki.m)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||oy(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(oy(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Zg)c=$g(t.firestore,sy),l=rl(t._key.path),u={next:function(e){i[a]&&i[a](yb(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=$g(t,Jg);c=$g(f.firestore,sy),l=f._query;var p=new fb(c);u={next:function(t){i[a]&&i[a](new $y(c,p,f,t))},error:i[a+1],complete:i[a+2]},Yy(t._query)}return function(t,e,n,r){var i=this,o=new bg(r),s=new Im(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Nu.b)(i,void 0,void 0,function(){var e;return Object(Nu.e)(this,function(n){switch(n.label){case 0:return e=Cm,[4,Ag(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Nu.b)(i,void 0,void 0,function(){var e;return Object(Nu.e)(this,function(n){switch(n.label){case 0:return e=Em,[4,Ag(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(ay(c),l,h,u)}function gb(t,e){return function(t,e){var n=this,r=new xd;return t.asyncQueue.enqueueAndForget(function(){return Object(Nu.b)(n,void 0,void 0,function(){var n;return Object(Nu.e)(this,function(i){switch(i.label){case 0:return n=qm,[4,kg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(ay(t),e)}function yb(t,e,n){var r=n.docs.get(e._key),i=new fb(t);return new zy(t,i,e._key,r,new Wy(n.hasPendingWrites,n.fromCache),e._converter)}var bb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Nu.d)(e,t),e.prototype.get=function(e){var n=this,r=db(e,this._firestore),i=new fb(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new zy(n._firestore,i,r._key,t._document,new Wy(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=wy(t)}return t.prototype.get=function(t){var e=this,n=db(t,this._firestore),r=new lb(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Hu();var i=t[0];if(i.isFoundDocument())return new Uy(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new Uy(e._firestore,r,n._key,null,n._converter);throw Hu()})},t.prototype.set=function(t,e,n){var r=db(t,this._firestore),i=cb(r._converter,e,n),o=Sy(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=db(t,this._firestore);return o="string"==typeof(e=Object(ki.m)(e))||e instanceof hy?Ay(this._dataReader,"Transaction.update",s._key,e,n,r):ky(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=db(t,this._firestore);return this._transaction.delete(e._key),this},t}());function vb(){if("undefined"==typeof Uint8Array)throw new Lu(Du.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function _b(){if("undefined"==typeof atob)throw new Lu(Du.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var wb=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return _b(),new t(dy.fromBase64String(e))},t.fromUint8Array=function(e){return vb(),new t(dy.fromUint8Array(e))},t.prototype.toBase64=function(){return _b(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return vb(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Sb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){ly(t=$g(t,sy));var n=ay(t),r=t._freezeSettings(),i=new yg;return cy(n,i,new mg(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){ly(t=$g(t,sy));var e=ay(t),n=t._freezeSettings(),r=new yg;return cy(e,r,new gg(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Lu(Du.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new xd;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Nu.b)(e,void 0,void 0,function(){var e;return Object(Nu.e)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Nu.b)(this,void 0,void 0,function(){return Object(Nu.e)(this,function(e){switch(e.label){case 0:return Ad.yt()?[4,Ad.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Bf(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Cb=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Pg||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=$g(t,Yg))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Uu("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Nu.b)(e,void 0,void 0,function(){var e,n;return Object(Nu.e)(this,function(r){switch(r.label){case 0:return[4,Tg(t)];case 1:return e=r.sent(),[4,Ig(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=zu(t);return e.$r.delete(0),zp(e)}(n))]}})})})}(ay($g(this._delegate,sy)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Nu.b)(e,void 0,void 0,function(){var e,n;return Object(Nu.e)(this,function(r){switch(r.label){case 0:return[4,Tg(t)];case 1:return e=r.sent(),[4,Ig(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Nu.b)(this,void 0,void 0,function(){var e;return Object(Nu.e)(this,function(n){switch(n.label){case 0:return(e=zu(t)).$r.add(0),[4,Kp(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(ay($g(this._delegate,sy)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Hg("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new xd;return t.asyncQueue.enqueueAndForget(function(){return Object(Nu.b)(e,void 0,void 0,function(){var e;return Object(Nu.e)(this,function(r){switch(r.label){case 0:return e=Km,[4,kg(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(ay($g(this._delegate,sy)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new bg(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Nu.b)(n,void 0,void 0,function(){var e;return Object(Nu.e)(this,function(n){switch(n.label){case 0:return e=function(t,e){zu(t).Gr.add(e),e.next()},[4,Ag(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Nu.b)(n,void 0,void 0,function(){var e;return Object(Nu.e)(this,function(n){switch(n.label){case 0:return e=function(t,e){zu(t).Gr.delete(e)},[4,Ag(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(ay(t=$g(t,sy)),oy(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new Lu(Du.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Mb(this,ty(this._delegate,t))}catch(t){throw kb(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Ib(this,ey(this._delegate,t))}catch(t){throw kb(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Pb(this,function(t,e){if(t=$g(t,Yg),Ug("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Lu(Du.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Jg(t,null,function(t){return new el(rc.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw kb(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new xd;return t.asyncQueue.enqueueAndForget(function(){return Object(Nu.b)(n,void 0,void 0,function(){var n;return Object(Nu.e)(this,function(i){switch(i.label){case 0:return[4,function(t){return Og(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new _g(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(ay(t),function(n){return e(new bb(t,n))})}(this._delegate,function(n){return t(new Ob(e,n))})},t.prototype.batch=function(){var t=this;return ay(this._delegate),new Tb(new hb(this._delegate,function(e){return gb(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Lu(Du.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Lu(Du.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Eb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Nu.d)(e,t),e.prototype.convertBytes=function(t){return new wb(new dy(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Ib.Zc(e,this.firestore,null)},e}(ub),Ob=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Eb(t)}return t.prototype.get=function(t){var e=this,n=Fb(t);return this._delegate.get(n).then(function(t){return new jb(e._firestore,new zy(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},t.prototype.set=function(t,e,n){var r=Fb(t);return n?(Bg("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Fb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Nu.h)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Fb(t);return this._delegate.delete(e),this},t}(),Tb=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Fb(t);return n?(Bg("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Fb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Nu.h)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Fb(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),xb=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Ky(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Nb(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Eb(e),n),i.set(n,o)),o},t}();xb.eu=new WeakMap;var Ib=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Eb(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new Lu(Du.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Zg(n._delegate,r,new bc(e)))},t.Zc=function(e,n,r){return new t(n,new Zg(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Mb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Mb(this.firestore,ty(this._delegate,t))}catch(t){throw kb(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(ki.m)(t))instanceof Zg&&ny(this._delegate,t)},t.prototype.set=function(t,e){e=Bg("DocumentReference.set",e);try{return function(t,e,n){t=$g(t,Zg);var r=$g(t.firestore,sy),i=cb(t._converter,e,n);return gb(r,[Sy(wy(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,Dl.none())])}(this._delegate,t,e)}catch(t){throw kb(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?pb(this._delegate,t):pb.apply(void 0,Object(Nu.h)([this._delegate,t,e],n))}catch(t){throw kb(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return gb($g((t=this._delegate).firestore,sy),[new Yl(t._key,Dl.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ab(e),i=Rb(e,function(e){return new jb(t.firestore,new zy(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return mb(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=$g(t,Zg);var e=$g(t.firestore,sy),n=ay(e),r=new fb(e);return function(t,e){var n=this,r=new xd;return t.asyncQueue.enqueueAndForget(function(){return Object(Nu.b)(n,void 0,void 0,function(){var n;return Object(Nu.e)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Nu.b)(this,void 0,void 0,function(){var r,i;return Object(Nu.e)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=zu(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Lu(Du.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ym(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,xg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new zy(e,r,t._key,n,new Wy(null!==n&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=$g(t,Zg);var e=$g(t.firestore,sy);return Rg(ay(e),t._key,{source:"server"}).then(function(n){return yb(e,t,n)})}(this._delegate):function(t){t=$g(t,Zg);var e=$g(t.firestore,sy);return Rg(ay(e),t._key).then(function(n){return yb(e,t,n)})}(this._delegate)).then(function(t){return new jb(e.firestore,new zy(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?xb.tu(this.firestore,e):null))},t}();function kb(t,e,n){return t.message=t.message.replace(e,n),t}function Ab(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!oy(r))return r}return{}}function Rb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=oy(t[0])?t[0]:oy(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var jb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Ib(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Gy(this._delegate,t._delegate)},t}(),Nb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nu.d)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(jb),Pb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Eb(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Jy(this._delegate,function(t,e,n){var r=e,i=Hy("where",t);return new Xy(i,r,n)}(e,n,r)))}catch(e){throw kb(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Jy(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Hy("orderBy",t);return new tb(r,n)}(e,n)))}catch(e){throw kb(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Jy(this._delegate,function(t){return Qg("limit",t),new eb("limit",t,"F")}(e)))}catch(e){throw kb(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Jy(this._delegate,function(t){return Qg("limitToLast",t),new eb("limitToLast",t,"L")}(e)))}catch(e){throw kb(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Jy(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nb("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw kb(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Jy(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nb("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw kb(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Jy(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rb("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw kb(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Jy(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rb("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw kb(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return ry(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=$g(t,Jg);var e=$g(t.firestore,sy),n=ay(e),r=new fb(e);return function(t,e){var n=this,r=new xd;return t.asyncQueue.enqueueAndForget(function(){return Object(Nu.b)(n,void 0,void 0,function(){var n;return Object(Nu.e)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Nu.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Nu.e)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,rp(t,e,!0)];case 1:return a=u.sent(),r=new Nm(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=ym(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,xg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new $y(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=$g(t,Jg);var e=$g(t.firestore,sy),n=ay(e),r=new fb(e);return jg(n,t._query,{source:"server"}).then(function(n){return new $y(e,r,t,n)})}(this._delegate):function(t){t=$g(t,Jg);var e=$g(t.firestore,sy),n=ay(e),r=new fb(e);return Yy(t._query),jg(n,t._query).then(function(n){return new $y(e,r,t,n)})}(this._delegate)).then(function(t){return new Lb(e.firestore,new $y(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ab(e),i=Rb(e,function(e){return new Lb(t.firestore,new $y(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return mb(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?xb.tu(this.firestore,e):null))},t}(),Db=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Nb(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Lb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Pb(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Nb(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Db(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Nb(n._firestore,r))})},t.prototype.isEqual=function(t){return Gy(this._delegate,t._delegate)},t}(),Mb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Nu.d)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Ib(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Ib(this.firestore,void 0===t?ey(this._delegate):ey(this._delegate,t))}catch(t){throw kb(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=$g(t.firestore,sy),r=ey(t),i=cb(t._converter,e);return gb(n,[Sy(wy(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,Dl.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Ib(e.firestore,t)})},e.prototype.isEqual=function(t){return ny(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?xb.tu(this.firestore,t):null))},e}(Pb);function Fb(t){return $g(t,Zg)}var Vb,qb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(hy.bind.apply(hy,Object(Nu.h)([void 0],t)))}return t.documentId=function(){return new t(oc.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(ki.m)(t))instanceof hy&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Ub=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Oy("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Cy("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ty("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xy("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Iy("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Bb=n("/6Yf"),Hb={Firestore:Cb,GeoPoint:py,Timestamp:Zu,Blob:wb,Transaction:Ob,WriteBatch:Tb,DocumentReference:Ib,DocumentSnapshot:jb,Query:Pb,QueryDocumentSnapshot:Nb,QuerySnapshot:Lb,CollectionReference:Mb,FieldPath:qb,FieldValue:Ub,setLogLevel:function(t){Mu.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Bb.a("firestore",function(t){return function(t,e){return new Cb(t,new sy(t,e),new Sb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Hb)))})(Vb=Ii.a),Vb.registerVersion("@firebase/firestore","2.2.4");var Wb=n("VRyK"),zb=n("qgXg"),Kb=n("Ylt2");class $b extends vt.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Qb(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new _t.a;if(this.isStopped||this.hasError?o=we.a.EMPTY:(this.observers.push(t),o=new Kb.a(this,t)),r&&t.add(t=new Ti.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||zb.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Qb{constructor(t,e){this.time=t,this.value=e}}function Gb(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new $b(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Yb(t,e){return e?Bt(()=>t,e):Bt(()=>t)}var Zb=n("tf+s");const Jb=new r.r("angularfire2.auth.use-emulator"),Xb=new r.r("angularfire2.auth.settings"),tv=new r.r("angularfire2.auth.tenant-id"),ev=new r.r("angularfire2.auth.langugage-code"),nv=new r.r("angularfire2.auth.use-device-language"),rv=new r.r("angularfire.auth.persistence");let iv=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new xi.d(i),d=Object(xi.h)(h),f=new vt.a,p=Object(bt.a)(void 0).pipe(Object(Ti.b)(h.outsideAngular),Bt(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(qt.a)(()=>Object(xi.g)(t,i,e)),Object(qt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(xi.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Gb({bufferSize:1,refCount:!1}));if(F(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(bt.a)(null);else{p.pipe(be()).subscribe();const t=p.pipe(Bt(t=>t.getRedirectResult().then(t=>t,()=>null)),d,Gb({bufferSize:1,refCount:!1})),e=t=>new It.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Bt(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Bt(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Yb(n),Object(Zb.a)(h.outsideAngular),Object(Ti.b)(h.insideAngular)),this.user=t.pipe(Yb(r),Object(Zb.a)(h.outsideAngular),Object(Ti.b)(h.insideAngular)),this.idToken=this.user.pipe(Bt(t=>t?Object(yt.a)(t.getIdToken()):Object(bt.a)(null))),this.idTokenResult=this.user.pipe(Bt(t=>t?Object(yt.a)(t.getIdTokenResult()):Object(bt.a)(null))),this.credential=Object(Wb.a)(t,f,this.authState.pipe(Xt(t=>!t))).pipe(Object(qt.a)(t=>(null==t?void 0:t.user)?t:null),Object(Zb.a)(h.outsideAngular),Object(Ti.b)(h.insideAngular))}return Object(xi.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(xi.c),r.Wb(xi.b,8),r.Wb(r.C),r.Wb(r.A),r.Wb(Jb,8),r.Wb(Xb,8),r.Wb(tv,8),r.Wb(ev,8),r.Wb(nv,8),r.Wb(rv,8))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Wb)(xi.c),Object(r.Wb)(xi.b,8),Object(r.Wb)(r.C),Object(r.Wb)(r.A),Object(r.Wb)(Jb,8),Object(r.Wb)(Xb,8),Object(r.Wb)(tv,8),Object(r.Wb)(ev,8),Object(r.Wb)(nv,8),Object(r.Wb)(rv,8))},token:t,providedIn:"any"}),t})();Object(xi.e)(iv,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let ov=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({providers:[iv]}),t})();function sv(t,e){return function(t,e=vi.b){return new It.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function av(t,e){return sv(t,e).pipe(Object(qt.a)(t=>({payload:t,type:"query"})))}function uv(t,e){return av(t,e).pipe(Gt(void 0),_i(),Object(qt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function cv(t,e,n){return uv(t,n).pipe(Yt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return lv(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return lv(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return lv(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Ci(),Object(qt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function lv(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function hv(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class dv{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=uv(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(qt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Gt(void 0),_i(),Xt(([t,e])=>e.length>0||!t),Object(qt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Yt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=hv(t);return cv(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return av(this.query,this.afs.schedulers.outsideAngular).pipe(Object(qt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(yt.a)(this.query.get(t)).pipe(Object(Ti.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new fv(this.ref.doc(t),this.afs)}}class fv{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=vv(n,e);return new dv(r,i,this.afs)}snapshotChanges(){return sv(this.ref,this.afs.schedulers.outsideAngular).pipe(Gt(void 0),_i(),Object(qt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(qt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(yt.a)(this.ref.get(t)).pipe(Object(Ti.b)(this.afs.schedulers.insideAngular))}}class pv{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?uv(this.query,this.afs.schedulers.outsideAngular).pipe(Object(qt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Xt(t=>t.length>0),this.afs.keepUnstableUntilFirst):uv(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Yt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=hv(t);return cv(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return av(this.query,this.afs.schedulers.outsideAngular).pipe(Object(qt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(yt.a)(this.query.get(t)).pipe(Object(Ti.b)(this.afs.schedulers.insideAngular))}}const mv=new r.r("angularfire2.enableFirestorePersistence"),gv=new r.r("angularfire2.firestore.persistenceSettings"),yv=new r.r("angularfire2.firestore.settings"),bv=new r.r("angularfire2.firestore.use-emulator");function vv(t,e=(t=>t)){return{query:e(t),ref:t}}let _v=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new xi.d(o),this.keepUnstableUntilFirst=Object(xi.h)(this.schedulers);const c=Object(xi.g)(t,o,e);!bi.a.auth&&u&&Object(xi.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(xi.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!F(i)){const e=()=>{try{return Object(yt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Vb){return"undefined"!=typeof console&&console.warn(Vb),Object(bt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(bt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=vv(n,e),o=this.schedulers.ngZone.run(()=>r);return new dv(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new pv(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new fv(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(xi.c),r.Wb(xi.b,8),r.Wb(mv,8),r.Wb(yv,8),r.Wb(r.C),r.Wb(r.A),r.Wb(gv,8),r.Wb(bv,8),r.Wb(Jb,8))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Wb)(xi.c),Object(r.Wb)(xi.b,8),Object(r.Wb)(mv,8),Object(r.Wb)(yv,8),Object(r.Wb)(r.C),Object(r.Wb)(r.A),Object(r.Wb)(gv,8),Object(r.Wb)(bv,8),Object(r.Wb)(Jb,8))},token:t,providedIn:"any"}),t})(),wv=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:mv,useValue:!0},{provide:gv,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({providers:[_v]}),t})(),Sv=(()=>{class t{constructor(t,e,n,r){this.firestore=t,this.fireAuth=e,this.router=n,this.ngZone=r,this.fireAuth.authState.subscribe(t=>{t?(this.userState=t,localStorage.setItem("user",JSON.stringify(this.userState)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user",null),JSON.parse(localStorage.getItem("user")))})}login(t,e){return this.fireAuth.signInWithEmailAndPassword(t,e).then(t=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.setUserData(t.user)}).catch(t=>{window.alert(t.message)})}registrar(t,e){return this.fireAuth.createUserWithEmailAndPassword(t,e).then(t=>{this.sendVerificationMail(),this.setUserData(t.user)}).catch(t=>{window.alert(t.message)})}sendVerificationMail(){return this.fireAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verificar-email"])})}forgotPassword(t){return this.fireAuth.sendPasswordResetEmail(t).then(()=>{window.alert("se envio un email para restablecer su contrase\xf1a")}).catch(t=>{window.alert(t)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!=t&&0!=t.emailVerified}googleAuth(){return this.authLogin(new bi.a.auth.GoogleAuthProvider)}authLogin(t){return this.fireAuth.signInWithPopup(t).then(t=>{this.ngZone.run(()=>{this.router.navigate(["home"])}),this.setUserData(t.user)}).catch(t=>{window.alert(t)})}setUserData(t){return this.firestore.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoUrl:t.photoUrl,emailVerified:t.emailVerified},{merge:!0})}cerrarSesion(){return this.fireAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["/home"])})}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(_v),r.Wb(iv),r.Wb(Gr),r.Wb(r.A))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Cv=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Sv))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-forgot-password"]],decls:10,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","E-Mail","required","",1,"form-control"],["passwordResetEmail",""],["type","submit","value","Reestablecer Contrase\xf1a",1,"btn","btn-primary","btn-block",3,"click"]],template:function(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div",0),r.Sb(1,"div",1),r.Sb(2,"div",2),r.Sb(3,"h3"),r.wc(4,"Olvide mi contrase\xf1a"),r.Rb(),r.Sb(5,"div",3),r.Qb(6,"input",4,5),r.Rb(),r.Sb(8,"div",3),r.Sb(9,"input",6),r.Zb("click",function(){r.pc(t);const n=r.mc(7);return e.authService.forgotPassword(n.value)}),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()}},styles:[""]}),t})(),Ev=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Sv))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-login"]],decls:16,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","E-Mail","required","",1,"form-control"],["userName",""],["type","password","placeholder","Contrase\xf1a","required","",1,"form-control"],["userPassword",""],["type","button","value","Iniciar Sesi\xf3n",1,"btn","btn-primary","btn-block",3,"click"],[1,"forgotPassword"],["routerLink","/forgot-password"]],template:function(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div",0),r.Sb(1,"div",1),r.Sb(2,"div",2),r.Sb(3,"h3"),r.wc(4,"Iniciar Sesion"),r.Rb(),r.Sb(5,"div",3),r.Qb(6,"input",4,5),r.Rb(),r.Sb(8,"div",3),r.Qb(9,"input",6,7),r.Rb(),r.Sb(11,"div",3),r.Sb(12,"input",8),r.Zb("click",function(){r.pc(t);const n=r.mc(7),i=r.mc(10);return e.authService.login(n.value,i.value)}),r.Rb(),r.Rb(),r.Sb(13,"div",9),r.Sb(14,"span",10),r.wc(15,"\xbfOlvidaste la contrase\xf1a?"),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()}},directives:[Yr],styles:[""]}),t})(),Ov=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Sv))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-registro"]],decls:21,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","E-Mail","required","",1,"form-control"],["userName",""],["type","password","placeholder","Contrase\xf1a","required","",1,"form-control"],["userPassword",""],["type","button","value","Registrarme",1,"btn","btn-primary","btn-block",3,"click"],["type","button",1,"btn","btn-danger","btn-block",3,"click"],[1,"redirectToLogin"],["routerLink","/login",1,"redirect"]],template:function(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div",0),r.Sb(1,"div",1),r.Sb(2,"div",2),r.Sb(3,"h3"),r.wc(4,"Nuevo Usuario"),r.Rb(),r.Sb(5,"div",3),r.Qb(6,"input",4,5),r.Rb(),r.Sb(8,"div",3),r.Qb(9,"input",6,7),r.Rb(),r.Sb(11,"div",3),r.Sb(12,"input",8),r.Zb("click",function(){r.pc(t);const n=r.mc(7),i=r.mc(10);return e.authService.registrar(n.value,i.value)}),r.Rb(),r.Rb(),r.Sb(13,"div",3),r.Sb(14,"button",9),r.Zb("click",function(){return e.authService.googleAuth()}),r.wc(15," Continuar con Google "),r.Rb(),r.Rb(),r.Rb(),r.Sb(16,"div",10),r.Sb(17,"span"),r.wc(18,"\xbfYa tienes cuentas?"),r.Sb(19,"span",11),r.wc(20,"Inicia Sesion"),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()}},directives:[Yr],styles:[""]}),t})();function Tv(t,e){if(1&t&&(r.Sb(0,"div",4),r.Sb(1,"p",6),r.wc(2," Se envi\xf3 un correo de confirmaci\xf3n a "),r.Sb(3,"strong"),r.wc(4),r.Rb(),r.Rb(),r.Rb()),2&t){const t=e.ngIf;r.Bb(4),r.xc(t.email)}}let xv=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Sv))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-verificar-email"]],decls:9,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btn-success","btn-block",3,"click"],[1,"text-center"]],template:function(t,e){1&t&&(r.Sb(0,"div",0),r.Sb(1,"div",1),r.Sb(2,"div",2),r.Sb(3,"h3"),r.wc(4,"Gracias por ser parte de nuestra comunidad de administradores"),r.Rb(),r.vc(5,Tv,5,1,"div",3),r.Sb(6,"div",4),r.Sb(7,"button",5),r.Zb("click",function(){return e.authService.sendVerificationMail()}),r.wc(8," Reenviar correo de confirmaci\xf3n "),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Bb(5),r.ec("ngIf",e.authService.userState))},directives:[j],styles:[""]}),t})(),Iv=(()=>{class t{constructor(t,e){this.authService=t,this.router=e}canActivate(t,e){return 1!=this.authService.isLoggedIn&&this.router.navigate(["login"]),!0}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(Sv),r.Wb(Gr))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class kv{}class Av{}let Rv=(()=>{class t{constructor(t){this.firestore=t}getCategorias(){return this.firestore.collection("categorias").snapshotChanges()}getProdCat(){return this.firestore.collection("quirurgicos").snapshotChanges()}getProducto(t){return this.firestore.collection("quirurgicos").doc(t).snapshotChanges()}getProductos(){return this.firestore.collection("quirurgicos").snapshotChanges()}createProducto(t){return this.firestore.collection("quirurgicos").add(Object.assign({},t))}updateProducto(t){this.firestore.doc("quirurgicos/"+t.id).update(t)}deleteProducto(t){this.firestore.doc("quirurgicos/"+t).delete()}createCategoria(t){return this.firestore.collection("quirurgicos").add(Object.assign({},t))}updateCategoria(t){this.firestore.doc("quirurgicos/"+t.id).update(t)}deleteCategoria(t){this.firestore.doc("quirurgicos/"+t).delete()}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(_v))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var jv=n("XoHu");function Nv(t,e){return new It.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(yt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const Pv=new r.r("NgValueAccessor"),Dv={provide:Pv,useExisting:Object(r.V)(()=>Mv),multi:!0},Lv=new r.r("CompositionEventMode");let Mv=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.F),r.Pb(r.l),r.Pb(Lv,8))},t.\u0275dir=r.Kb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Zb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.Ab([Dv])]}),t})();const Fv=new r.r("NgValidators"),Vv=new r.r("NgAsyncValidators");function qv(t){return null!=t}function Uv(t){const e=Object(r.sb)(t)?Object(yt.a)(t):t;return Object(r.rb)(e),e}function Bv(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Hv(t,e){return e.map(e=>e(t))}function Wv(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function zv(t){return null!=t?function(t){if(!t)return null;const e=t.filter(qv);return 0==e.length?null:function(t){return Bv(Hv(t,e))}}(Wv(t)):null}function Kv(t){return null!=t?function(t){if(!t)return null;const e=t.filter(qv);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Ct.a)(e))return Nv(e,null);if(Object(jv.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Nv(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Nv(t=1===t.length&&Object(Ct.a)(t[0])?t[0]:t,null).pipe(Object(qt.a)(t=>e(...t)))}return Nv(t,null)}(Hv(t,e).map(Uv)).pipe(Object(qt.a)(Bv))}}(Wv(t)):null}function $v(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let Qv=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=zv(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Kv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Kb({type:t}),t})(),Gv=(()=>{class t extends Qv{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Yv(e||t)},t.\u0275dir=r.Kb({type:t,features:[r.yb]}),t})();const Yv=r.Ub(Gv);class Zv extends Qv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Jv=(()=>{class t extends class{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Zv,2))},t.\u0275dir=r.Kb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Hb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.yb]}),t})();function Xv(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function t_(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function e_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const n_="VALID",r_="INVALID",i_="PENDING",o_="DISABLED";function s_(t){return(l_(t)?t.validators:t)||null}function a_(t){return Array.isArray(t)?zv(t):t||null}function u_(t,e){return(l_(e)?e.asyncValidators:t)||null}function c_(t){return Array.isArray(t)?Kv(t):t||null}function l_(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class h_{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=a_(this._rawValidators),this._composedAsyncValidatorFn=c_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===n_}get invalid(){return this.status===r_}get pending(){return this.status==i_}get disabled(){return this.status===o_}get enabled(){return this.status!==o_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=a_(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=c_(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=i_,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=o_,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=n_,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==n_&&this.status!==i_||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?o_:n_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=i_,this._hasOwnPendingAsyncValidator=!0;const e=Uv(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof f_?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof p_&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?o_:this.errors?r_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(i_)?i_:this._anyControlsHaveStatus(r_)?r_:n_}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){l_(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class d_ extends h_{constructor(t=null,e,n){super(s_(e),u_(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){e_(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){e_(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class f_ extends h_{constructor(t,e,n){super(s_(e),u_(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof d_?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class p_ extends h_{constructor(t,e,n){super(s_(e),u_(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof d_?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const m_={provide:Zv,useExisting:Object(r.V)(()=>y_)},g_=(()=>Promise.resolve(null))();let y_=(()=>{class t extends Zv{constructor(t,e,n,i){super(),this.control=new d_,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Mv?n=t:Object.getPrototypeOf(t.constructor)===class{}?r=t:i=t}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){var t,e;(function(t,e,n){const r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators($v(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators($v(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);{const n=()=>t.updateValueAndValidity();Xv(e._rawValidators,n),Xv(e._rawAsyncValidators,n)}})(t=this.control,e=this),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&t_(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&t_(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){g_.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;g_.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Gv,9),r.Pb(Fv,10),r.Pb(Vv,10),r.Pb(Pv,10))},t.\u0275dir=r.Kb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.Ab([m_]),r.yb,r.zb]}),t})(),b_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({}),t})();const v_=new r.r("NgModelWithFormControlWarning");let __=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[b_]]}),t})(),w_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[__]}),t})(),S_=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:v_,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[__]}),t})();function C_(t){return e=>e.lift(new E_(t))}class E_{constructor(t){this.notifier=t}call(t,e){const n=new O_(t),r=Object(Ut.c)(this.notifier,new Ut.a(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class O_ extends Ut.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}var T_=n("w1tV"),x_=n("Y7HM");function I_(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}var k_=n("n6bG");function A_(t,e,n,r){return Object(k_.a)(n)&&(r=n,n=void 0),r?A_(t,e,n).pipe(Object(qt.a)(t=>Object(Ct.a)(t)?r(...t):r(t))):new It.a(r=>{R_(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function R_(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)R_(t[o],e,n,r,i)}r.add(o)}var j_=n("3N8a");class N_ extends j_.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}}var P_=n("IjjT");class D_ extends P_.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const L_=new D_(N_);class M_{}const F_="*";function V_(t,e=null){return{type:2,steps:t,options:e}}function q_(t){return{type:6,styles:t,offset:null}}function U_(t){Promise.resolve(null).then(t)}class B_{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){U_(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class H_{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?U_(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function W_(t){return null!=t&&"false"!=`${t}`}let z_;try{z_="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(FT){z_=!1}let K_=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?M(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!z_)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(r.C,8))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Wb)(r.C,8))},token:t,providedIn:"root"}),t})(),$_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({}),t})(),Q_=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Lb)({factory:function(){return new t},token:t,providedIn:"root"}),t})(),G_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({providers:[Q_]}),t})(),Y_=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch(FT){return null}}((n=t).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(e){const t=e&&e.nodeName.toLowerCase();if(-1===J_(e))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===t)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(e))return!1}let r=t.nodeName.toLowerCase(),i=J_(t);if(t.hasAttribute("contenteditable"))return-1!==i;if("iframe"===r)return!1;if("audio"===r){if(!t.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===r){if(!t.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==r||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&t.tabIndex>=0}isFocusable(t){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||Z_(t))}(t)&&!this.isDisabled(t)&&this.isVisible(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(K_))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Wb)(K_))},token:t,providedIn:"root"}),t})();function Z_(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function J_(t){if(!Z_(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class X_{constructor(t,e,n,r,i=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,i||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement()))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]):e[n].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return t?(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),Object(r.W)()&&!this._checker.isFocusable(t)&&console.warn("Element matching '[cdkFocusInitial]' is not focusable.",t),t.focus(),!0):this.focusFirstTabbableElement()}focusFirstTabbableElement(){const t=this._getRegionBoundary("start");return t&&t.focus(),!!t}focusLastTabbableElement(){const t=this._getRegionBoundary("end");return t&&t.focus(),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.asObservable().pipe(Kt(1)).subscribe(t)}}let tw=(()=>{class t{constructor(t,e,n){this._checker=t,this._ngZone=e,this._document=n}create(t,e=!1){return new X_(t,this._checker,this._ngZone,this._document,e)}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(Y_),r.Wb(r.A),r.Wb(s))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Wb)(Y_),Object(r.Wb)(r.A),Object(r.Wb)(s))},token:t,providedIn:"root"}),t})(),ew=(()=>{class t{constructor(t,e,n){this._elementRef=t,this._focusTrapFactory=e,this._previouslyFocusedElement=null,this._document=n,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=W_(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=W_(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&(this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady())}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(tw),r.Pb(s))},t.\u0275dir=r.Kb({type:t,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"]}),t})();"undefined"!=typeof Element&&Element;const nw="cdk-high-contrast-black-on-white",rw="cdk-high-contrast-white-on-black",iw="cdk-high-contrast-active";let ow=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(iw),t.remove(nw),t.remove(rw);const e=this.getHighContrastMode();1===e?(t.add(iw),t.add(nw)):2===e&&(t.add(iw),t.add(rw))}}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(K_),r.Wb(s))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Wb)(K_),Object(r.Wb)(s))},token:t,providedIn:"root"}),t})(),sw=(()=>{class t{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(ow))},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[$_,G_]]}),t})();const aw=["*"],uw=["card"],cw=["input"],lw=function(t,e,n,r){return{"custom-control custom-checkbox":t,"form-check":e,"custom-control-inline":n,"form-check-inline":r}},hw=function(t,e,n){return{"filled-in":t,"custom-control-input":e,"form-check-input":n}},dw=function(t,e,n,r,i){return{"custom-control-label":t,"form-check-label":e,"label-before":n,"checkbox-rounded":r,disabled:i}},fw=["mdbDropdown",""],pw=function(t,e,n,r,i){return{fas:t,far:e,fab:n,fal:r,fad:i}},mw=["navbar"],gw=["mobile"],yw=["nav"],bw=["container"],vw=["toggler"];function _w(t,e){1&t&&r.cc(0,4,["*ngIf","this.doubleNav == true"])}function ww(t,e){if(1&t){const t=r.Tb();r.Sb(0,"button",7,8),r.Zb("click",function(e){return r.pc(t),r.bc(2).toggle(),e.preventDefault()}),r.Qb(2,"span",9),r.Rb()}if(2&t){const t=r.bc(2);r.Cb("aria-controls",t.collapseId)("aria-expanded",t.ariaExpanded)}}function Sw(t,e){if(1&t&&(r.Sb(0,"div"),r.vc(1,ww,3,2,"button",6),r.Rb()),2&t){const t=r.bc();r.Bb(1),r.ec("ngIf",0!==t.el.nativeElement.children.length)}}const Cw=[[["mdb-navbar-brand"]],[["logo"]],"*",[["links"]],[["navlinks"]]],Ew=function(t){return{container:t}},Ow=function(t){return{display:t}},Tw=function(t,e,n){return{collapse:t,show:e,collapsing:n}},xw=["mdb-navbar-brand","logo","*","links","navlinks"];let Iw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({}),t})(),kw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[L]]}),t})();const Aw={provide:Pv,useExisting:Object(r.V)(()=>Rw),multi:!0};let Rw=(()=>{class t{constructor(){this.btnCheckboxTrue=!0,this.btnCheckboxFalse=!1,this.state=!1,this.onChange=Function.prototype,this.onTouched=Function.prototype}onClick(){this.isDisabled||(this.toggle(!this.state),this.onChange(this.value))}ngOnInit(){this.toggle(this.trueValue===this.value)}get trueValue(){return void 0===this.btnCheckboxTrue||this.btnCheckboxTrue}get falseValue(){return void 0!==this.btnCheckboxFalse&&this.btnCheckboxFalse}toggle(t){this.state=t,this.value=this.state?this.trueValue:this.falseValue}writeValue(t){this.state=this.trueValue===t,this.value=t?this.trueValue:this.falseValue}setDisabledState(t){this.isDisabled=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Kb({type:t,selectors:[["","mdbCheckbox",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Zb("click",function(){return e.onClick()}),2&t&&r.Hb("active",e.state)},inputs:{btnCheckboxTrue:"btnCheckboxTrue",btnCheckboxFalse:"btnCheckboxFalse"},features:[r.Ab([Aw])]}),t})();const jw={provide:Pv,useExisting:Object(r.V)(()=>Nw),multi:!0};let Nw=(()=>{class t{constructor(t,e){this.el=t,this.renderer=e,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.radioElementsArray=[],this.disabled=!1}get isActive(){return this.mdbRadio===this.value}onClick(t){if(!this.disabled){try{this.el.nativeElement.parentElement.childNodes.forEach(t=>{this.radioElementsArray.push(t)}),this.radioElementsArray.forEach(t=>{this.renderer.removeClass(t,"active")}),this.renderer.addClass(t.target,"active")}catch(e){}this.el.nativeElement.attributes.disabled||(this.value=this.uncheckable&&this.mdbRadio===this.value?void 0:this.mdbRadio,this.onTouched(),this.onChange(this.value))}}ngOnInit(){this.uncheckable=void 0!==this.uncheckable}onBlur(){this.onTouched()}writeValue(t){this.value=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(r.F))},t.\u0275dir=r.Kb({type:t,selectors:[["","mdbRadio",""]],hostVars:4,hostBindings:function(t,e){1&t&&r.Zb("click",function(t){return e.onClick(t)}),2&t&&r.Hb("disabled",e.disabled)("active",e.isActive)},inputs:{disabled:"disabled",value:"value",uncheckable:"uncheckable",mdbRadio:"mdbRadio"},features:[r.Ab([jw])]}),t})(),Pw=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({}),t})(),Dw=(()=>{class t{constructor(t,e){this._el=t,this._r=e}ngOnInit(){this._r.addClass(this._el.nativeElement,"card-title")}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(r.F))},t.\u0275cmp=r.Jb({type:t,selectors:[["mdb-card-title"]],ngContentSelectors:aw,decls:1,vars:0,template:function(t,e){1&t&&(r.dc(),r.cc(0))},encapsulation:2,changeDetection:0}),t})(),Lw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Jb({type:t,selectors:[["mdb-card-text"]],inputs:{class:"class"},ngContentSelectors:aw,decls:2,vars:3,template:function(t,e){1&t&&(r.dc(),r.Sb(0,"p"),r.cc(1),r.Rb()),2&t&&r.Eb("card-text ",e.class," ")},encapsulation:2,changeDetection:0}),t})(),Mw=(()=>{class t{constructor(t,e){this._el=t,this._r=e}set cascade(t){t&&this._r.addClass(this._el.nativeElement,"card-body-cascade")}ngOnInit(){this._r.addClass(this._el.nativeElement,"card-body"),this.class&&this.class.split(" ").forEach(t=>{this._r.addClass(this._el.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(r.F))},t.\u0275cmp=r.Jb({type:t,selectors:[["mdb-card-body"]],inputs:{cascade:"cascade",class:"class"},ngContentSelectors:aw,decls:1,vars:0,template:function(t,e){1&t&&(r.dc(),r.cc(0))},encapsulation:2,changeDetection:0}),t})(),Fw=(()=>{class t{constructor(t,e){this._el=t,this._r=e}set narrower(t){t?this._r.addClass(this._el.nativeElement,"narrower"):!t&&this._el.nativeElement.classList.contains("narrower")&&this._r.removeClass(this._el.nativeElement,"narrower")}set reverse(t){t?this._r.addClass(this._el.nativeElement,"reverse"):!t&&this._el.nativeElement.classList.contains("reserse")&&this._r.removeClass(this._el.nativeElement,"reverse")}set dark(t){t?this._r.addClass(this._el.nativeElement,"card-dark"):!t&&this._el.nativeElement.classList.contains("card-dark")&&this._r.removeClass(this._el.nativeElement,"card-dark")}set bgColor(t){t&&this._r.addClass(this._el.nativeElement,t)}set borderColor(t){t&&this._r.addClass(this._el.nativeElement,t)}ngOnInit(){this._r.addClass(this._el.nativeElement,"card"),this.cascade&&this._r.addClass(this._el.nativeElement,"card-cascade"),this.wider&&this._r.addClass(this._el.nativeElement,"wider"),this.narrower&&this._r.addClass(this._el.nativeElement,"narrower"),this.class&&this.class.split(" ").forEach(t=>{this._r.addClass(this._el.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(r.F))},t.\u0275cmp=r.Jb({type:t,selectors:[["mdb-card"]],viewQuery:function(t,e){if(1&t&&r.Ac(uw,3),2&t){let t;r.lc(t=r.ac())&&(e.card=t.first)}},inputs:{narrower:"narrower",reverse:"reverse",dark:"dark",bgColor:"bgColor",borderColor:"borderColor",class:"class",cascade:"cascade",wider:"wider",imageBackground:"imageBackground"},ngContentSelectors:aw,decls:1,vars:0,template:function(t,e){1&t&&(r.dc(),r.cc(0))},styles:[".card{box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12);border:0;font-weight:400}.card[class*=border]{border:1px solid #9e9e9e;box-shadow:none}.card .card-body h1,.card .card-body h2,.card .card-body h3,.card .card-body h4,.card .card-body h5,.card .card-body h6{font-weight:400}.card .card-body .card-title a,.card .card-body .card-title a:hover{transition:.2s ease-in-out}.card .card-body .card-text{color:#747373;font-size:.9rem;font-weight:400}.card .md-form label{font-weight:300}.card-text:last-child{margin-bottom:1rem!important}mdb-card-img img.img-fluid{width:100%}"],encapsulation:2,changeDetection:0}),t})(),Vw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Jb({type:t,selectors:[["mdb-card-img"]],inputs:{src:"src",alt:"alt"},decls:1,vars:2,consts:[[1,"img-fluid",3,"src","alt"]],template:function(t,e){1&t&&r.Qb(0,"img",0),2&t&&r.ec("src",e.src,r.qc)("alt",e.alt)},encapsulation:2,changeDetection:0}),t})(),qw=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[L]]}),t})();var Uw="undefined"!=typeof window&&window||{},Bw=Uw.document;function Hw(){return"bs4"===Uw.__theme}let Ww=(()=>{class t{constructor(){this.interval=5e3,this.noPause=!1,this.noWrap=!1,this.keyboard=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),zw=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({providers:[Ww],imports:[[L,Pw]]}),t})(),Kw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({}),t})();const $w={provide:Pv,useExisting:Object(r.V)(()=>Yw),multi:!0};let Qw=0;class Gw{}let Yw=(()=>{class t{constructor(t){this._cdRef=t,this.defaultId="mdb-checkbox-"+ ++Qw,this.id=this.defaultId,this.checked=!1,this.filledIn=!1,this.indeterminate=!1,this.rounded=!1,this.checkboxPosition="left",this.default=!1,this.inline=!1,this.change=new r.n,this.checkboxClicked=new vt.a,this.onChange=t=>{},this.onTouched=()=>{}}onLabelClick(t){t.stopPropagation(),this.checkboxClicked.next(!0)}onDocumentClick(){this.checkboxClicked.next(!1)}ngOnInit(){!this.indeterminate||this.filledIn||this.rounded||(this.inputEl.indeterminate=!0)}ngOnChanges(t){t.hasOwnProperty("checked")&&(this.checked=t.checked.currentValue)}get changeEvent(){const t=new Gw;return t.element=this,t.checked=this.checked,t}toggle(){this.disabled||(this.checked=!this.checked,this.indeterminate=!1,this.onChange(this.checked),this._cdRef.markForCheck())}onCheckboxClick(t){t.stopPropagation(),this.toggle()}onCheckboxChange(t){t.stopPropagation(),function(t=0,e,n){let r=-1;return Object(x_.a)(e)?r=Number(e)<1?1:Number(e):Object(St.a)(e)&&(n=e),Object(St.a)(n)||(n=vi.a),new It.a(e=>{const i=Object(x_.a)(t)?t:+t-n.now();return n.schedule(I_,i,{index:0,period:r,subscriber:e})})}(0).subscribe(()=>this.change.emit(this.changeEvent))}onBlur(){this.checkboxClicked.pipe(Kt(1)).subscribe(t=>{t||this.onTouched()})}writeValue(t){this.value=t,this.checked=!!t,this._cdRef.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.h))},t.\u0275cmp=r.Jb({type:t,selectors:[["mdb-checkbox"]],viewQuery:function(t,e){if(1&t&&r.Ac(cw,3),2&t){let t;r.lc(t=r.ac())&&(e.inputEl=t.first)}},hostBindings:function(t,e){1&t&&r.Zb("click",function(t){return e.onLabelClick(t)})("click",function(){return e.onDocumentClick()},!1,r.nc)},inputs:{id:"id",checked:"checked",filledIn:"filledIn",indeterminate:"indeterminate",rounded:"rounded",checkboxPosition:"checkboxPosition",default:"default",inline:"inline",value:"value",disabled:"disabled",class:"class",required:"required",name:"name",tabIndex:"tabIndex"},outputs:{change:"change"},features:[r.Ab([$w]),r.zb],ngContentSelectors:aw,decls:5,vars:27,consts:[[3,"ngClass"],["type","checkbox",1,"custom-control-input",3,"ngClass","id","checked","disabled","required","indeterminate","tabIndex","blur","click","change"],["input",""]],template:function(t,e){1&t&&(r.dc(),r.Sb(0,"div",0),r.Sb(1,"input",1,2),r.Zb("blur",function(){return e.onBlur()})("click",function(t){return e.onCheckboxClick(t)})("change",function(t){return e.onCheckboxChange(t)}),r.Rb(),r.Sb(3,"label",0),r.cc(4),r.Rb(),r.Rb()),2&t&&(r.ec("ngClass",r.jc(12,lw,e.default,!e.default,e.inline,e.inline&&!e.default)),r.Bb(1),r.ec("ngClass",r.ic(17,hw,e.filledIn||e.rounded,e.default,!e.default))("id",e.id)("checked",e.checked)("disabled",e.disabled)("required",e.required)("indeterminate",e.indeterminate)("tabIndex",e.tabIndex),r.Cb("name",e.name)("value",e.value),r.Bb(2),r.ec("ngClass",r.kc(21,dw,e.default,!e.default,"right"===e.checkboxPosition,e.rounded,e.disabled)),r.Cb("for",e.id))},directives:[I],styles:[".form-check-label.label-before:after,.form-check-label.label-before:before{top:0!important;right:0!important;left:auto!important}.custom-control-label.label-before:after,.custom-control-label.label-before:before{top:.25rem!important;right:0!important;left:auto!important}.custom-control-label.label-before{position:absolute}.custom-control-inline .label-before{position:relative}.form-check-label.label-before{padding-left:0!important;padding-right:35px}.custom-control-label.label-before{padding-left:0!important;padding-right:25px!important}.form-check-input[type=checkbox]:checked+.label-before:before,label.btn input[type=checkbox]:checked+.label-before:before{top:-4px!important;right:10px!important;left:auto!important}.form-check-input[type=checkbox]:indeterminate+.label-before:before,label.btn input[type=checkbox]:indeterminate+.label-before:before{top:-11px!important;right:16px!important;left:auto!important}.form-check-input[type=checkbox].filled-in+.label-before:before,.form-check-input[type=checkbox].filled-in:checked+.label-before:before,label.btn input[type=checkbox].filled-in+.label-before:before,label.btn input[type=checkbox].filled-in:checked+.label-before:before{top:0!important;right:10px!important;left:auto!important}.form-check-input[type=checkbox].filled-in+.label-before:after,label.btn input[type=checkbox].filled-in+.label-before:after{top:0!important;left:auto!important}.checkbox-rounded:after{border-radius:50%!important}mdb-checkbox .form-check{padding-left:0!important}"],encapsulation:2,changeDetection:0}),t})(),Zw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[L,w_]]}),t})(),Jw=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({}),t})();class Xw{constructor(t,e){this.open=t,this.close=e||t}isManual(){return"manual"===this.open||"manual"===this.close}}const tS={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};"undefined"!=typeof window&&window,"undefined"==typeof console||console;class eS{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}class nS{constructor(t,e,n,i,o,s,a,u){this._viewContainerRef=t,this._renderer=e,this._elementRef=n,this._injector=i,this._componentFactoryResolver=o,this._ngZone=s,this._applicationRef=a,this._posService=u,this.onBeforeShow=new r.n,this.onShown=new r.n,this.onBeforeHide=new r.n,this.onHidden=new r.n,this.shown=new r.n,this.hidden=new r.n,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(t){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(t),this}to(t){return this.container=t||this.container,this}position(t){return this.attachment=t.attachment||this.attachment,this._elementRef=t.target||this._elementRef,this}provide(t){return this._providers.push(t),this}show(t={}){if(this._subscribePositioning(),this._innerComponent=null,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(t.content,t.data);const e=r.s.create({providers:this._providers,parent:this._injector});if(this._componentRef=this._componentFactory.create(e,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,t),this.container instanceof r.l&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&"undefined"!=typeof document){const t=document.querySelector(this.container)||document.querySelector(this.containerDefaultSelector);t&&t.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(){if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const t=this._componentRef.location.nativeElement;return t.parentNode.removeChild(t),this._contentRef.componentRef&&this._contentRef.componentRef.destroy(),this._componentRef.destroy(),this._viewContainerRef&&this._contentRef.viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._contentRef=null,this._componentRef=null,this._removeGlobalListener(),this.onHidden.emit(),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(t){this.triggers=t.triggers||this.triggers,this._listenOpts.outsideClick=t.outsideClick,this._listenOpts.outsideEsc=t.outsideEsc,t.target=t.target||this._elementRef.nativeElement;const e=this._listenOpts.hide=()=>t.hide?t.hide():void this.hide(),n=this._listenOpts.show=e=>{t.show?t.show(e):this.show(e),e()};return this._unregisterListenersFn=function(t,e){const n=function(t,e=tS){const n=(t||"").trim();if(0===n.length)return[];const r=n.split(/\s+/).map(t=>t.split(":")).map(t=>{const n=e[t[0]]||t;return new Xw(n[0],n[1])}),i=r.filter(t=>t.isManual());if(i.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===i.length&&r.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return r}(e.triggers),r=e.target;if(1===n.length&&n[0].isManual())return Function.prototype;const i=[],o=[],s=()=>{o.forEach(t=>i.push(t())),o.length=0};return n.forEach(n=>{const a=n.open===n.close,u=a?e.toggle:e.show;a||o.push(()=>t.listen(r,n.close,e.hide)),i.push(t.listen(r,n.open,()=>u(s)))}),()=>{i.forEach(t=>t())}}(this._renderer,{target:t.target,triggers:t.triggers,show:n,hide:e,toggle:t=>{this.isShown?e():n(t)}}),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=null)}attachInline(t,e){return this._inlineViewRef=t.createEmbeddedView(e),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts&&this._listenOpts.outsideClick){const t=this._componentRef.location.nativeElement;setTimeout(()=>{var e;this._globalListener=(e={targets:[t,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide()}).outsideClick?this._renderer.listen("document","click",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(e=>e.contains(t.target))||e.hide()}):Function.prototype})}var t;this._listenOpts.outsideEsc&&(this._globalListener=(t={targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide()}).outsideEsc?this._renderer.listen("document","keyup.esc",e=>{t.target&&t.target.contains(e.target)||t.targets&&t.targets.some(t=>t.contains(e.target))||t.hide()}):Function.prototype)}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){!this._zoneSubscription&&this.attachment&&(this.onShown.subscribe(()=>{this._posService.position({element:this._componentRef.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{this._componentRef&&this._posService.calcPosition()}))}_unsubscribePositioning(){this._zoneSubscription&&(this._zoneSubscription.unsubscribe(),this._zoneSubscription=null)}_getContentRef(t,e){if(!t)return new eS([]);if(t instanceof r.M){if(this._viewContainerRef){const e=this._viewContainerRef.createEmbeddedView(t);return e.markForCheck(),new eS([e.rootNodes],e)}const e=t.createEmbeddedView({});return this._applicationRef.attachView(e),new eS([e.rootNodes],e)}if("function"==typeof t){const n=this._componentFactoryResolver.resolveComponentFactory(t),i=r.s.create({providers:this._providers,parent:this._injector}),o=n.create(i);return Object.assign(o.instance,e),this._applicationRef.attachView(o.hostView),new eS([[o.location.nativeElement]],o.hostView,o)}return new eS([[this._renderer.createText(`${t}`)]])}}function rS(t,e){if(1!==t.nodeType)return[];const n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function iS(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function oS(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}const{overflow:e,overflowX:n,overflowY:r}=rS(t);return/(auto|scroll|overlay)/.test(String(e)+String(r)+String(n))?t:oS(iS(t))}const sS="undefined"!=typeof window&&"undefined"!=typeof document,aS=sS&&!(!window.MSInputMethodContext||!document.documentMode),uS=sS&&!(!window.MSInputMethodContext||!/MSIE 10/.test(navigator.userAgent));function cS(t){return 11===t?aS:10===t?uS:aS||uS}function lS(t){if(!t)return document.documentElement;const e=cS(10)?document.body:null;let n,r=t.offsetParent||null;for(;r===e&&t.nextElementSibling&&"BODY"!==t.nodeName;)n=t.nextElementSibling,r=n.offsetParent;const i=r&&r.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(r.nodeName)&&"static"===rS(r,"position")?lS(r):r:n?n.ownerDocument.documentElement:document.documentElement}function hS(t){return null!==t.parentNode?hS(t.parentNode):t}function dS(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;const n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,i=n?e:t,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);const{commonAncestorContainer:s}=o;if(t!==s&&e!==s||r.contains(i))return function(t){const{nodeName:e}=t;return"BODY"!==e&&("HTML"===e||lS(t.firstElementChild)===t)}(s)?s:lS(s);const a=hS(t);return a.host?dS(a.host,e):dS(t,hS(e).host)}function fS(t,e){const n="x"===e?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(t[`border${n}Width`])+parseFloat(t[`border${r}Width`])}function pS(t,e,n,r){return Math.max(e[`offset${t}`],e[`scroll${t}`],n[`client${t}`],n[`offset${t}`],n[`scroll${t}`],cS(10)?parseInt(n[`offset${t}`],10)+parseInt(r["margin"+("Height"===t?"Top":"Left")],10)+parseInt(r["margin"+("Height"===t?"Bottom":"Right")],10):0)}function mS(t){const e=t.body,n=t.documentElement,r=cS(10)&&getComputedStyle(n);return{height:pS("Height",e,n,r),width:pS("Width",e,n,r)}}function gS(t,e="top"){const n="top"===e?"scrollTop":"scrollLeft",r=t.nodeName;if("BODY"===r||"HTML"===r){const e=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||e)[n]}return t[n]}function yS(t){return Object.assign(Object.assign({},t),{right:t.left+t.width,bottom:t.top+t.height})}function bS(t){let e={};try{if(cS(10)){e=t.getBoundingClientRect();const n=gS(t,"top"),r=gS(t,"left");e.top+=n,e.left+=r,e.bottom+=n,e.right+=r}else e=t.getBoundingClientRect()}catch(Vb){return}const n={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===t.nodeName?mS(t.ownerDocument):{};let i=t.offsetWidth-(r.width||t.clientWidth||n.right-n.left),o=t.offsetHeight-(r.height||t.clientHeight||n.bottom-n.top);if(i||o){const e=rS(t);i-=fS(e,"x"),o-=fS(e,"y"),n.width-=i,n.height-=o}return yS(n)}function vS(t,e,n=!1){const r=cS(10),i="HTML"===e.nodeName,o=bS(t),s=bS(e),a=oS(t),u=rS(e),c=parseFloat(u.borderTopWidth),l=parseFloat(u.borderLeftWidth);n&&i&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));let h=yS({top:o.top-s.top-c,left:o.left-s.left-l,width:o.width,height:o.height});if(h.marginTop=0,h.marginLeft=0,!r&&i){const t=parseFloat(u.marginTop),e=parseFloat(u.marginLeft);h.top-=c-t,h.bottom-=c-t,h.left-=l-e,h.right-=l-e,h.marginTop=t,h.marginLeft=e}return(r&&!n?e.contains(a):e===a&&"BODY"!==a.nodeName)&&(h=function(t,e,n=!1){const r=gS(e,"top"),i=gS(e,"left"),o=n?-1:1;return t.top+=r*o,t.bottom+=r*o,t.left+=i*o,t.right+=i*o,t}(h,e)),h}function _S(t){const e=t.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===rS(t,"position")||_S(iS(t)))}function wS(t){if(!t||!t.parentElement||cS())return document.documentElement;let e=t.parentElement;for(;e&&"none"===rS(e,"transform");)e=e.parentElement;return e||document.documentElement}function SS(t,e,n=0,r,i=!1){let o={top:0,left:0};const s=i?wS(t):dS(t,e);if("viewport"===r)o=function(t,e=!1){const n=t.ownerDocument.documentElement,r=vS(t,n),i=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),s=e?0:gS(n),a=e?0:gS(n,"left");return yS({top:s-Number(r.top)+Number(r.marginTop),left:a-Number(r.left)+Number(r.marginLeft),width:i,height:o})}(s,i);else{let n;"scrollParent"===r?(n=oS(iS(e)),"BODY"===n.nodeName&&(n=t.ownerDocument.documentElement)):n="window"===r?t.ownerDocument.documentElement:r;const a=vS(n,s,i);if("HTML"!==n.nodeName||_S(s))o=a;else{const{height:e,width:n}=mS(t.ownerDocument);o.top+=a.top-a.marginTop,o.bottom=Number(e)+Number(a.top),o.left+=a.left-a.marginLeft,o.right=Number(n)+Number(a.left)}}return o.left+=n,o.top+=n,o.right-=n,o.bottom-=n,o}function CS({width:t,height:e}){return t*e}function ES(t,e,n,r,i=["top","left","bottom","right"],o="viewport",s=0){if(-1===t.indexOf("auto"))return t;const a=SS(n,r,s,o),u={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},c=Object.keys(u).map(t=>Object.assign(Object.assign({key:t},u[t]),{area:CS(u[t])})).sort((t,e)=>e.area-t.area);let l=c.filter(({width:t,height:e})=>t>=n.clientWidth&&e>=n.clientHeight);l=i.reduce((t,e)=>Object.assign(Object.assign({},t),{[e]:l[e]}),{});const h=l.length>0?l[0].key:c[0].key,d=t.split(" ")[1];return n.className=n.className.replace(/auto/g,h),h+(d?`-${d}`:"")}function OS(t){const e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),r=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:Number(t.offsetWidth)+r,height:Number(t.offsetHeight)+n}}function TS(t,e,n=null){return vS(e,n?wS(t):dS(t,e),n)}function xS(t,e,n){const r=n.split(" ")[0],i=OS(t),o={width:i.width,height:i.height},s=-1!==["right","left"].indexOf(r),a=s?"top":"left",u=s?"left":"top",c=s?"height":"width",l=s?"width":"height";return o[a]=e[a]+e[c]/2-i[c]/2,o[u]=r===u?e[u]-i[l]:e[function(t){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,t=>e[t])}(u)],o}function IS(t,e){return t&&t.modifiers&&t.modifiers[e]&&t.modifiers[e].enabled}function kS(t,e,n){Object.keys(e).forEach(r=>{let i="";var o;-1!==["width","height","top","right","bottom","left"].indexOf(r)&&""!==(o=e[r])&&!isNaN(parseFloat(o))&&isFinite(o)&&(i="px"),n?n.setStyle(t,r,`${String(e[r])}${i}`):t.style[r]=String(e[r])+i})}function AS(t){let e=t.offsets.target;const n=t.instance.target.querySelector(".arrow");if(!n)return t;const r=-1!==["left","right"].indexOf(t.placement),i=r?"height":"width",o=r?"Top":"Left",s=o.toLowerCase(),a=r?"left":"top",u=r?"bottom":"right",c=OS(n)[i];t.offsets.host[u]-c<e[s]&&(e[s]-=e[s]-(t.offsets.host[u]-c)),Number(t.offsets.host[s])+Number(c)>e[u]&&(e[s]+=Number(t.offsets.host[s])+Number(c)-Number(e[u])),e=yS(e);const l=Number(t.offsets.host[s])+Number(t.offsets.host[i]/2-c/2),h=rS(t.instance.target),d=parseFloat(h[`margin${o}`]),f=parseFloat(h[`border${o}Width`]);let p=l-e[s]-d-f;return p=Math.max(Math.min(e[i]-c,p),0),t.offsets.arrow={[s]:Math.round(p),[a]:""},t.instance.arrow=n,t}function RS(t){if(t.offsets.target=yS(t.offsets.target),!IS(t.options,"flip"))return t.offsets.target=Object.assign(Object.assign({},t.offsets.target),xS(t.instance.target,t.offsets.host,t.placement)),t;const e=SS(t.instance.target,t.instance.host,0,"viewport",!1);let n=t.placement.split(" ")[0],r=t.placement.split(" ")[1]||"";const i=t.offsets.host,o=t.instance.target,s=t.instance.host,a=r?ES("auto",i,o,s,["top","bottom"]):ES("auto",i,o,s),u=[n,a];return u.forEach((i,o)=>{if(n!==i||u.length===o+1)return t;n=t.placement.split(" ")[0];const s="left"===n&&Math.floor(t.offsets.target.right)>Math.floor(t.offsets.host.left)||"right"===n&&Math.floor(t.offsets.target.left)<Math.floor(t.offsets.host.right)||"top"===n&&Math.floor(t.offsets.target.bottom)>Math.floor(t.offsets.host.top)||"bottom"===n&&Math.floor(t.offsets.target.top)<Math.floor(t.offsets.host.bottom),a=Math.floor(t.offsets.target.left)<Math.floor(e.left),c=Math.floor(t.offsets.target.right)>Math.floor(e.right),l=Math.floor(t.offsets.target.top)<Math.floor(e.top),h=Math.floor(t.offsets.target.bottom)>Math.floor(e.bottom),d="left"===n&&a||"right"===n&&c||"top"===n&&l||"bottom"===n&&h,f=-1!==["top","bottom"].indexOf(n),p=f&&"left"===r&&a||f&&"right"===r&&c||!f&&"left"===r&&l||!f&&"right"===r&&h;(s||d||p)&&((s||d)&&(n=u[o+1]),p&&(r=function(t){return"right"===t?"left":"left"===t?"right":t}(r)),t.placement=n+(r?` ${r}`:""),t.offsets.target=Object.assign(Object.assign({},t.offsets.target),xS(t.instance.target,t.offsets.host,t.placement)))}),t}function jS(t){if(!IS(t.options,"preventOverflow"))return t;const e="transform",n=t.instance.target.style,{top:r,left:i,[e]:o}=n;n.top="",n.left="",n[e]="";const s=SS(t.instance.target,t.instance.host,0,"scrollParent",!1);n.top=r,n.left=i,n[e]=o;const a={primary(e){let n=t.offsets.target[e];return t.offsets.target[e]<s[e]&&(n=Math.max(t.offsets.target[e],s[e])),{[e]:n}},secondary(e){const n="right"===e?"left":"top";let r=t.offsets.target[n];return t.offsets.target[e]>s[e]&&(r=Math.min(t.offsets.target[n],s[e]-("right"===e?t.offsets.target.width:t.offsets.target.height))),{[n]:r}}};let u;return["left","right","top","bottom"].forEach(e=>{u=-1!==["left","top"].indexOf(e)?"primary":"secondary",t.offsets.target=Object.assign(Object.assign({},t.offsets.target),a[u](e))}),t}function NS(t){const e=t.placement,n=e.split(" ")[0],r=e.split(" ")[1];if(r){const{host:e,target:i}=t.offsets,o=-1!==["bottom","top"].indexOf(n),s=o?"left":"top",a=o?"width":"height",u={left:{[s]:e[s]},right:{[s]:e[s]+e[a]-e[a]}};t.offsets.target=Object.assign(Object.assign({},i),u[r])}return t}const PS=new class{position(t,e){return this.offset(t,e)}offset(t,e){return TS(e,t)}positionElements(t,e,n,r,i){return[RS,NS,jS,AS].reduce((t,e)=>e(t),function(t,e,n,r){const i=TS(t,e),o=!!n.match(/auto/g);let s=n.match(/auto\s(left|right|top|bottom)/g)?n.split(" ")[1]||"":n;const a=xS(t,i,s);return s=ES(s,i,t,e),{options:r,instance:{target:t,host:e,arrow:null},offsets:{target:a,host:i,arrow:null},positionFixed:!1,placement:s,placementAuto:o}}(e,t,n,i))}};let DS=(()=>{class t{constructor(t,e,n){this._ngZone=n,this.update$$=new vt.a,this.positionElements=new Map,M(e)&&this._ngZone.runOutsideAngular(()=>{Object(Wb.a)(A_(window,"scroll"),A_(window,"resize"),Object(bt.a)(0,L_),this.update$$).subscribe(()=>{this.positionElements.forEach(e=>{var n,r,i,o,s,a;n=LS(e.target),r=LS(e.element),i=e.attachment,o=e.appendToBody,s=this.options,a=t.createRenderer(null,null),function(t,e){const n=t.instance.target,r=function(t){return{width:t.offsets.target.width,height:t.offsets.target.height,left:Math.floor(t.offsets.target.left),top:Math.round(t.offsets.target.top),bottom:Math.round(t.offsets.target.bottom),right:Math.floor(t.offsets.target.right)}}(t);kS(n,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${r.left}px, ${r.top}px, 0px)`},e),t.instance.arrow&&kS(t.instance.arrow,t.offsets.arrow,e),t.placementAuto&&(e?(e.setAttribute(n,"class",n.className.replace(/bs-popover-auto/g,`bs-popover-${t.placement}`)),e.setAttribute(n,"class",n.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${t.placement}`)),e.setAttribute(n,"class",n.className.replace(/\sauto/g,`s${t.placement}`)),n.className.match(/popover/g)&&e.addClass(n,"popover-auto"),n.className.match(/tooltip/g)&&e.addClass(n,"tooltip-auto")):(n.className=n.className.replace(/bs-popover-auto/g,`bs-popover-${t.placement}`),n.className=n.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${t.placement}`),n.className=n.className.replace(/\sauto/g,`s${t.placement}`),n.className.match(/popover/g)&&n.classList.add("popover-auto"),n.className.match(/tooltip/g)&&n.classList.add("tooltip-auto"))),e?e.setAttribute(n,"class",n.className.replace(/left|right|top|bottom/g,`${t.placement.split(" ")[0]}`)):n.className=n.className.replace(/left|right|top|bottom/g,`${t.placement.split(" ")[0]}`)}(PS.positionElements(n,r,i,o,s),a)})})})}position(t){this.addPositionElement(t)}addPositionElement(t){this.positionElements.set(LS(t.element),t)}calcPosition(){this.update$$.next()}deletePositionElement(t){this.positionElements.delete(LS(t))}setOptions(t){this.options=t}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(r.G),r.Wb(r.C),r.Wb(r.A))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();function LS(t){return t&&"string"==typeof t?document.querySelector(t):t instanceof r.l?t.nativeElement:t}let MS=(()=>{class t{constructor(t,e,n,r,i){this._componentFactoryResolver=t,this._ngZone=e,this._injector=n,this._posService=r,this._applicationRef=i}createLoader(t,e,n){return new nS(e,n,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService)}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(r.j),r.Wb(r.A),r.Wb(r.s),r.Wb(DS),r.Wb(r.g))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),FS=(()=>{class t{constructor(){this.autoClose=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),VS=(()=>{class t{constructor(){this.direction="down",this.isOpenChange=new r.n,this.isDisabledChange=new r.n,this.toggleClick=new r.n,this.dropdownMenu=new Promise(t=>{this.resolveDropdownMenu=t})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),qS=(()=>{class t{constructor(t){this._state=t,this.isOpen=!1,this.display="block",this.position="absolute",this._subscription=t.isOpenChange.subscribe(t=>{this.isOpen=t})}get direction(){return this._state.direction}ngOnDestroy(){this._subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(VS))},t.\u0275cmp=r.Jb({type:t,selectors:[["mdb-dropdown-container"]],hostVars:4,hostBindings:function(t,e){2&t&&r.sc("display",e.display)("position",e.position)},ngContentSelectors:aw,decls:2,vars:8,template:function(t,e){1&t&&(r.dc(),r.Sb(0,"div"),r.cc(1),r.Rb()),2&t&&r.Hb("dropup","up"===e.direction)("dropdown","down"===e.direction)("show",e.isOpen)("open",e.isOpen)},directives:function(){return[US]},encapsulation:2,changeDetection:0}),t})(),US=(()=>{class t{constructor(t,e,n,r,i,o,s){this._elementRef=t,this._renderer=e,this._viewContainerRef=n,this._cis=r,this._config=i,this._state=o,this.cdRef=s,this.dropupDefault=!1,this.dynamicPosition=!1,this._destroy$=new vt.a,this._isInlineOpen=!1,this._subscriptions=[],this._isInited=!1,this._dropdown=this._cis.createLoader(this._elementRef,this._viewContainerRef,this._renderer).provide({provide:VS,useValue:this._state}),this.onShown=this._dropdown.onShown,this.shown=this._dropdown.shown,this.onHidden=this._dropdown.onHidden,this.hidden=this._dropdown.hidden,this.isOpenChange=this._state.isOpenChange,this._state.autoClose=this._config.autoClose}get isDropup(){return this.dropup?(this._isDropupDefault=!1,this.dropup):this.dropupDefault?(this._isDropupDefault=!0,this.dropupDefault):this.dropupDefault&&this.dropup?(this._isDropupDefault=!1,this.dropup):void 0}set autoClose(t){"boolean"==typeof t&&(this._state.autoClose=t)}get autoClose(){return this._state.autoClose}set isDisabled(t){this._isDisabled=t,this._state.isDisabledChange.emit(t),t&&this.hide()}get isDisabled(){return this._isDisabled}get isOpen(){return this._showInline?this._isInlineOpen:this._dropdown.isShown}set isOpen(t){t?this.show():this.hide()}get isBs4(){return!Hw()}ngOnInit(){this._isInited||(this._isInited=!0,this._showInline=!this.container,this._dropup=this.dropup,this._dropdown.listen({triggers:this.triggers,show:()=>this.show()}),this._state.toggleClick.pipe(C_(this._destroy$)).subscribe(t=>this.toggle(t)),this._state.isDisabledChange.pipe(C_(this._destroy$)).subscribe(t=>{!0===t&&this.hide()}),this._showInline&&this._state.dropdownMenu.then(t=>{this._inlinedMenu=t.viewContainer.createEmbeddedView(t.templateRef)}),this._state.isOpenChange.pipe(C_(this._destroy$)).subscribe(()=>{setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector(".dropdown-menu"),e=t.getBoundingClientRect().left;t.classList.contains("dropdown-menu-right")&&e<=t.clientWidth&&this._renderer.setStyle(t,"right",e<0?e+"px":"0")},0)}))}show(){if(this.isOpen||this.isDisabled)return;const t=this._elementRef.nativeElement.children[0],e=this._elementRef.nativeElement.querySelector(".dropdown-menu");if(e.parentNode.classList.contains("btn-group")||e.parentNode.classList.contains("dropdown")||this._isDropupDefault||e.parentNode.classList.add("dropdown"),this.dropup&&!this._isDropupDefault&&e.parentNode.classList.add("dropup-material"),"BUTTON"!==t.tagName?e.classList.add("A"===t.tagName?"a-various-dropdown":"various-dropdown"):(t.classList.contains("btn-sm")&&e.classList.add("small-dropdown"),t.classList.contains("btn-md")&&e.classList.add("medium-dropdown"),t.classList.contains("btn-lg")&&e.classList.add("large-dropdown")),setTimeout(()=>{if(e.classList.add("fadeInDropdown"),this.dynamicPosition){const t=e.getBoundingClientRect(),n={top:t.top<0,bottom:t.bottom>(window.innerHeight||document.documentElement.clientHeight)};this.dropup&&n.top?this.dropup=!1:!this.dropup&&n.bottom&&(this.dropup=!0)}},0),this._showInline)return this._isInlineOpen=!0,e.parentNode.classList.contains("dropdown")||e.parentNode.classList.contains("dropup-material")?setTimeout(()=>{this.onShown.emit(!0),this.shown.emit(!0)},560):setTimeout(()=>{this.onShown.emit(!0),this.shown.emit(!0)},0),void this._state.isOpenChange.emit(!0);this._state.dropdownMenu.then(t=>{const e=!0===this.dropup||!0===this.dropupDefault;this._state.direction=e?"up":"down";const n=this.placement||(e?"top left":"bottom left");this._dropdown.attach(qS).to(this.container).position({attachment:n}).show({content:t.templateRef,placement:n}),this._state.isOpenChange.emit(!0)})}hide(){if(!this.isOpen)return;this.dropup!==this._dropup&&(this.dropup=this._dropup);const t=this._elementRef.nativeElement.querySelector(".dropdown-menu");t.classList.remove("fadeInDropdown"),t.parentNode.classList.contains("dropdown")||t.parentNode.classList.contains("dropup-material")?setTimeout(()=>{this._showInline?(this._isInlineOpen=!1,this.onHidden.emit(!0),this.hidden.emit(!0),this.cdRef.markForCheck()):this._dropdown.hide(),this._state.isOpenChange.emit(!1)},560):setTimeout(()=>{this._showInline?(this._isInlineOpen=!1,this.onHidden.emit(!0),this.hidden.emit(!0),this.cdRef.markForCheck()):this._dropdown.hide(),this._state.isOpenChange.emit(!1)},0)}toggle(t){return this.isOpen||!1===t?this.hide():this.show()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._dropdown.dispose()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(r.F),r.Pb(r.R),r.Pb(MS),r.Pb(FS),r.Pb(VS),r.Pb(r.h))},t.\u0275cmp=r.Jb({type:t,selectors:[["","mdbDropdown",""],["","dropdown",""]],hostVars:6,hostBindings:function(t,e){2&t&&r.Hb("dropup",e.isDropup)("open",e.isOpen)("show",e.isOpen)},inputs:{dropupDefault:"dropupDefault",dynamicPosition:"dynamicPosition",autoClose:"autoClose",isDisabled:"isDisabled",isOpen:"isOpen",dropup:"dropup",placement:"placement",triggers:"triggers",container:"container"},outputs:{onShown:"onShown",shown:"shown",onHidden:"onHidden",hidden:"hidden",isOpenChange:"isOpenChange"},exportAs:["bs-dropdown"],features:[r.Ab([VS])],attrs:fw,ngContentSelectors:aw,decls:1,vars:0,template:function(t,e){1&t&&(r.dc(),r.cc(0))},styles:[".dropdown-menu .dropdown-item:active{background-color:#757575}.show>.dropdown-menu{display:block}.show>a{outline:0}.dropdown-menu{margin-top:5px}.various-dropdown{transform:translate3d(0,21px,0)!important}.a-various-dropdown{transform:translate3d(0,29px,0)!important}.medium-dropdown{transform:translate3d(0,36px,0)!important}.small-dropdown{transform:translate3d(5px,34px,0)!important}.large-dropdown{transform:translate3d(5px,57px,0)!important}.btn-group>.dropdown-menu{transform:translate3d(0,43px,0)}.dropup>.dropdown-menu{display:none;transform:translate3d(117px,0,0)!important;will-change:transform}.dropup.show .dropdown-menu{display:block;opacity:0}.dropup.show .fadeInDropdown{opacity:1}.dropup-material.show .dropdown-menu{transition:.55s}.dropdown-menu{display:none;position:absolute;transform:translate3d(6px,49px,0);top:0;left:0;will-change:transform}.dropdown.show .dropdown-menu{display:block;opacity:0;transition:.55s}.dropdown.show .fadeInDropdown{opacity:1}"],encapsulation:2}),t})(),BS=(()=>{class t{constructor(t,e,n){t.resolveDropdownMenu({templateRef:n,viewContainer:e})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(VS),r.Pb(r.R),r.Pb(r.M))},t.\u0275dir=r.Kb({type:t,selectors:[["","mdbDropdownMenu",""],["","dropdownMenu",""]],exportAs:["bs-dropdown-menu"]}),t})(),HS=(()=>{class t{constructor(t,e,n,r){this._state=t,this._element=e,this._renderer=n,this._cdRef=r,this._subscriptions=[],this.ariaHaspopup=!0,this.isDisabled=null,this._state.isOpenChange.subscribe(t=>{this.isOpen=t,t?(this._documentClickListener=this._renderer.listen("document","click",t=>{this._state.autoClose&&2!==t.button&&!this._element.nativeElement.contains(t.target)&&(this._state.toggleClick.emit(!1),this._cdRef.detectChanges())}),this._escKeyUpListener=this._renderer.listen(this._element.nativeElement,"keyup.esc",()=>{this._state.autoClose&&(this._state.toggleClick.emit(!1),this._cdRef.detectChanges())})):(this._documentClickListener(),this._escKeyUpListener())}),this._subscriptions.push(this._state.isDisabledChange.subscribe(t=>this.isDisabled=t||null))}onClick(){this.isDisabled||this._state.toggleClick.emit()}ngOnDestroy(){this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener();for(const t of this._subscriptions)t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(VS),r.Pb(r.l),r.Pb(r.F),r.Pb(r.h))},t.\u0275dir=r.Kb({type:t,selectors:[["","mdbDropdownToggle",""],["","dropdownToggle",""]],hostVars:3,hostBindings:function(t,e){1&t&&r.Zb("click",function(){return e.onClick()}),2&t&&r.Cb("aria-haspopup",e.ariaHaspopup)("disabled",e.isDisabled)("aria-expanded",e.isOpen)},exportAs:["bs-dropdown-toggle"]}),t})(),WS=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[MS,DS,VS,{provide:FS,useValue:e||{autoClose:!0}}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({}),t})();class zS{constructor(){}static reflow(t){}static getStyles(t){let e=t.ownerDocument.defaultView;return e&&e.opener||(e=Uw),e.getComputedStyle(t)}focusTrapModal(t,e){let n,r,i;n=e.nativeElement.querySelectorAll("a[href], button, textarea, input, select, form, mdb-select, mdb-auto-completer, mdb-checkbox, mdb-range-input"),r=n[0],i=n[n.length-1],"Tab"!==t.key&&9!==t.keyCode||(t.shiftKey?Bw&&Bw.activeElement===r&&(i.focus(),t.preventDefault()):Bw&&Bw.activeElement===i&&(r.focus(),t.preventDefault()))}getClosestEl(t,e){for(;t&&t!==Bw;t=t.parentNode)if(t.matches&&t.matches(e))return t;return null}getCoords(t){const e=t.getBoundingClientRect(),n=Bw.body,r=Bw.documentElement,i=e.left+(Uw.pageXOffset||r.scrollLeft||n.scrollLeft)-(r.clientLeft||n.clientLeft||0);return{top:Math.round(e.top+(Uw.pageYOffset||r.scrollTop||n.scrollTop)-(r.clientTop||n.clientTop||0)),left:Math.round(i)}}}let KS=(()=>{class t{constructor(t,e){this._el=t,this._renderer=e,this.fab=!1,this.far=!1,this.fal=!1,this.fad=!1,this.fas=!0,this.sizeClass="",this.utils=new zS}ngOnInit(){this.size&&(this.sizeClass=`fa-${this.size}`);const t=this._el.nativeElement.classList;this.fab=t.contains("fab"),this.far=t.contains("far"),this.fas=t.contains("fas"),this.fal=t.contains("fal"),this.fad=t.contains("fad");const e=this.utils.getClosestEl(this._el.nativeElement,".md-form")||this.utils.getClosestEl(this._el.nativeElement,".md-outline");e&&e.childNodes.forEach(t=>{this._renderer.listen(t,"focus",()=>{this._renderer.addClass(this._el.nativeElement,"active")}),this._renderer.listen(t,"blur",()=>{this._renderer.removeClass(this._el.nativeElement,"active")})})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(r.F))},t.\u0275cmp=r.Jb({type:t,selectors:[["mdb-icon"]],inputs:{icon:"icon",size:"size",class:"class",classInside:"classInside"},decls:1,vars:13,consts:[[3,"ngClass"]],template:function(t,e){1&t&&r.Qb(0,"i",0),2&t&&(r.Gb("fa-",e.icon," ",e.class," ",e.classInside," ",e.sizeClass,""),r.ec("ngClass",r.kc(7,pw,e.fas,e.far,e.fab,e.fal,e.fad)))},directives:[I],encapsulation:2,changeDetection:0}),t})(),$S=(()=>{class t{constructor(t,e){this._el=t,this._r=e,this._r.addClass(this._el.nativeElement,"fas")}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(r.F))},t.\u0275dir=r.Kb({type:t,selectors:[["","fas",""],["","solid",""]]}),t})(),QS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[L]]}),t})(),GS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[L]]}),t})(),YS=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({}),t})(),ZS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),JS=(()=>{class t{hide(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();const XS={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,scroll:!1,data:{}},tC="modal-open",eC="in",nC="show";let rC=(()=>{class t{constructor(t,e){this.element=t,this.renderer=e,this.classNameBackDrop=!0,this._isShown=!1}get isAnimated(){return this._isAnimated}set isAnimated(t){this._isAnimated=t}get isShown(){return this._isShown}set isShown(t){this._isShown=t,t?(this.renderer.addClass(this.element.nativeElement,"in"),Hw()||this.renderer.addClass(this.element.nativeElement,"show")):(this.renderer.removeClass(this.element.nativeElement,"in"),Hw()||this.renderer.removeClass(this.element.nativeElement,"show"))}ngOnInit(){this.renderer.addClass(this.element.nativeElement,"fade"),zS.reflow(this.element.nativeElement),this.isShown=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l),r.Pb(r.F))},t.\u0275cmp=r.Jb({type:t,selectors:[["mdb-modal-backdrop"]],hostVars:2,hostBindings:function(t,e){2&t&&r.Hb("modal-backdrop",e.classNameBackDrop)},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),iC=(()=>{class t{constructor(t,e,n){this._renderer=n,this.modalClass="modal",this.tabindex=-1,this.role="dialog",this.modal=!0,this.isShown=!1,this.isModalHiding=!1,this._element=e,this.config=Object.assign({},t)}onClick(t){this.config.ignoreBackdropClick||"static"===this.config.backdrop||t.target!==this._element.nativeElement||(this.mdbModalService.setDismissReason("backdrop-click"),this.hide())}onEsc(){this.config.keyboard&&this.level===this.mdbModalService.getModalsCount()&&(this.mdbModalService.setDismissReason("esc"),this.hide())}ngOnInit(){this.config.animated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),window&&-1!==window.navigator.userAgent.indexOf("Edge")&&this.config&&-1===this.config.toString().indexOf("side-modal")||window&&-1!==window.navigator.userAgent.indexOf("Edge")&&this.config&&-1===this.config.toString().indexOf("modal-full-height")?(this.isShown=!0,this._renderer.addClass(this._element.nativeElement,Hw()?eC:nC),this._renderer.setStyle(this._element.nativeElement,"transition","transform 0.3s ease-out"),this._renderer.setStyle(this._element.nativeElement,"transform","translate(0, 25px)")):setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,Hw()?eC:nC)},this.isAnimated?150:0),document&&document.body&&(1===this.mdbModalService.getModalsCount()&&(this.mdbModalService.checkScrollbar(),this.mdbModalService.setScrollbar()),this._renderer.addClass(document.body,tC)),this.config.containerClass&&this.updateContainerClass(),this.config.scroll&&this._renderer.setStyle(this._element.nativeElement,"overflow-y","auto")}focusModalElement(){this.config.focus&&this._element.nativeElement.focus()}updateContainerClass(){if(this.config.containerClass){const t=this.config.containerClass.split(" ");for(let e=0;e<t.length;e++)this._renderer.addClass(this._element.nativeElement,t[e])}}ngOnDestroy(){this.isShown&&this.hide()}hide(){if(this.isModalHiding||!this.isShown)return;this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,Hw()?eC:nC);const t=Array.from(this._element.nativeElement.querySelectorAll("iframe")),e=Array.from(this._element.nativeElement.querySelectorAll("video"));t.forEach(t=>{const e=t.getAttribute("src");this._renderer.setAttribute(t,"src",e)}),e.forEach(t=>{t.pause()}),setTimeout(()=>{this.isShown=!1,document&&document.body&&1===this.mdbModalService.getModalsCount()&&this._renderer.removeClass(document.body,tC),this.mdbModalService.hide(this.level),this.isModalHiding=!1},this.isAnimated?300:0)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(ZS),r.Pb(r.l),r.Pb(r.F))},t.\u0275cmp=r.Jb({type:t,selectors:[["mdb-modal-container"]],hostVars:4,hostBindings:function(t,e){1&t&&r.Zb("click",function(t){return e.onClick(t)})("keydown.esc",function(){return e.onEsc()},!1,r.oc),2&t&&(r.Vb("tabindex",e.tabindex),r.Cb("role",e.role),r.Hb("modal",e.modal))},ngContentSelectors:aw,decls:3,vars:2,consts:[["role","document","cdkTrapFocus",""],[1,"modal-content","modal-dynamic"]],template:function(t,e){1&t&&(r.dc(),r.Sb(0,"div",0),r.Sb(1,"div",1),r.cc(2),r.Rb(),r.Rb()),2&t&&r.Db("modal-dialog"+(e.config.class?" "+e.config.class:""))},directives:[ew],styles:[".img-fluid,.modal-dialog.cascading-modal.modal-avatar .modal-header,.video-fluid{max-width:100%;height:auto}.flex-center{display:flex;justify-content:center;align-items:center;height:100%}.flex-center p{margin:0}.flex-center ul{text-align:center}.flex-center ul li{margin-bottom:1rem}.flex-center ul li:last-of-type{margin-bottom:0}.hr-light{border-top:1px solid #fff}.hr-dark{border-top:1px solid #666}.w-responsive{width:75%}@media (max-width:740px){.w-responsive{width:100%}}.collapsible-body{display:none}.jumbotron{box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12);border-radius:.125rem;background-color:#fff}.bg-primary{background-color:#4285f4!important}a.bg-primary:focus,a.bg-primary:hover,button.bg-primary:focus,button.bg-primary:hover{background-color:#1266f1!important}.border-primary{border-color:#4285f4!important}.bg-danger{background-color:#ff3547!important}a.bg-danger:focus,a.bg-danger:hover,button.bg-danger:focus,button.bg-danger:hover{background-color:#ff0219!important}.border-danger{border-color:#ff3547!important}.bg-warning{background-color:#fb3!important}a.bg-warning:focus,a.bg-warning:hover,button.bg-warning:focus,button.bg-warning:hover{background-color:#fa0!important}.border-warning{border-color:#fb3!important}.bg-success{background-color:#00c851!important}a.bg-success:focus,a.bg-success:hover,button.bg-success:focus,button.bg-success:hover{background-color:#00953c!important}.border-success{border-color:#00c851!important}.bg-info{background-color:#33b5e5!important}a.bg-info:focus,a.bg-info:hover,button.bg-info:focus,button.bg-info:hover{background-color:#1a9bcb!important}.border-info{border-color:#33b5e5!important}.bg-default{background-color:#2bbbad!important}a.bg-default:focus,a.bg-default:hover,button.bg-default:focus,button.bg-default:hover{background-color:#219287!important}.border-default{border-color:#2bbbad!important}.bg-secondary{background-color:#a6c!important}a.bg-secondary:focus,a.bg-secondary:hover,button.bg-secondary:focus,button.bg-secondary:hover{background-color:#9540bf!important}.border-secondary{border-color:#a6c!important}.bg-dark{background-color:#212121!important}a.bg-dark:focus,a.bg-dark:hover,button.bg-dark:focus,button.bg-dark:hover{background-color:#080808!important}.border-dark{border-color:#212121!important}.bg-light{background-color:#e0e0e0!important}a.bg-light:focus,a.bg-light:hover,button.bg-light:focus,button.bg-light:hover{background-color:#c7c7c7!important}.border-light{border-color:#e0e0e0!important}.card-img-100{width:100px;height:100px}.card-img-64{width:64px;height:64px}.mml-1{margin-left:-.25rem!important}.flex-1{flex:1}body.modal-open{overflow:auto}.modal-dialog .modal-content{box-shadow:0 5px 11px 0 rgba(0,0,0,.18),0 4px 15px 0 rgba(0,0,0,.15);border-radius:.125rem}.modal-dialog .modal-content .modal-header{border-top-left-radius:.125rem;border-top-right-radius:.125rem}.modal-dialog.cascading-modal .close{opacity:1;text-shadow:none;color:#fff;outline:0}.modal-dialog.cascading-modal .modal-header{box-shadow:0 5px 11px 0 rgba(0,0,0,.18),0 4px 15px 0 rgba(0,0,0,.15);border-radius:.125rem}.modal-dialog.cascading-modal .modal-header .close{margin-right:1rem}.modal-dialog.cascading-modal .modal-header .title .fab,.modal-dialog.cascading-modal .modal-header .title .far,.modal-dialog.cascading-modal .modal-header .title .fas{margin-right:9px}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs{box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12);display:flex}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs li{flex:1}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs li a{text-align:center}.modal-dialog.cascading-modal .modal-c-tabs .tab-content{box-shadow:unset}.modal-dialog.cascading-modal.modal-avatar .modal-header{box-shadow:none;margin:-6rem 0 -1rem}.modal-dialog.cascading-modal.modal-avatar .modal-header img{box-shadow:0 8px 17px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);margin-left:auto;margin-right:auto}.modal-dialog.modal-notify .modal-header{box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12)}.modal-dialog.modal-notify.modal-primary .modal-header{background-color:#4285f4}.modal-dialog.modal-notify.modal-primary .fab,.modal-dialog.modal-notify.modal-primary .far,.modal-dialog.modal-notify.modal-primary .fas{color:#4285f4}.modal-dialog.modal-notify.modal-primary .badge{background-color:#4285f4}.modal-dialog.modal-notify.modal-primary .btn .fab,.modal-dialog.modal-notify.modal-primary .btn .far,.modal-dialog.modal-notify.modal-primary .btn .fas{color:#fff}.modal-dialog.modal-notify.modal-primary .btn.btn-outline-primary .fab,.modal-dialog.modal-notify.modal-primary .btn.btn-outline-primary .far,.modal-dialog.modal-notify.modal-primary .btn.btn-outline-primary .fas{color:#4285f4}.modal-dialog.modal-notify.modal-danger .modal-header{background-color:#ff3547}.modal-dialog.modal-notify.modal-danger .fab,.modal-dialog.modal-notify.modal-danger .far,.modal-dialog.modal-notify.modal-danger .fas{color:#ff3547}.modal-dialog.modal-notify.modal-danger .badge{background-color:#ff3547}.modal-dialog.modal-notify.modal-danger .btn .fab,.modal-dialog.modal-notify.modal-danger .btn .far,.modal-dialog.modal-notify.modal-danger .btn .fas{color:#fff}.modal-dialog.modal-notify.modal-danger .btn.btn-outline-danger .fab,.modal-dialog.modal-notify.modal-danger .btn.btn-outline-danger .far,.modal-dialog.modal-notify.modal-danger .btn.btn-outline-danger .fas{color:#ff3547}.modal-dialog.modal-notify.modal-warning .modal-header{background-color:#fb3}.modal-dialog.modal-notify.modal-warning .fab,.modal-dialog.modal-notify.modal-warning .far,.modal-dialog.modal-notify.modal-warning .fas{color:#fb3}.modal-dialog.modal-notify.modal-warning .badge{background-color:#fb3}.modal-dialog.modal-notify.modal-warning .btn .fab,.modal-dialog.modal-notify.modal-warning .btn .far,.modal-dialog.modal-notify.modal-warning .btn .fas{color:#fff}.modal-dialog.modal-notify.modal-warning .btn.btn-outline-warning .fab,.modal-dialog.modal-notify.modal-warning .btn.btn-outline-warning .far,.modal-dialog.modal-notify.modal-warning .btn.btn-outline-warning .fas{color:#fb3}.modal-dialog.modal-notify.modal-success .modal-header{background-color:#00c851}.modal-dialog.modal-notify.modal-success .fab,.modal-dialog.modal-notify.modal-success .far,.modal-dialog.modal-notify.modal-success .fas{color:#00c851}.modal-dialog.modal-notify.modal-success .badge{background-color:#00c851}.modal-dialog.modal-notify.modal-success .btn .fab,.modal-dialog.modal-notify.modal-success .btn .far,.modal-dialog.modal-notify.modal-success .btn .fas{color:#fff}.modal-dialog.modal-notify.modal-success .btn.btn-outline-success .fab,.modal-dialog.modal-notify.modal-success .btn.btn-outline-success .far,.modal-dialog.modal-notify.modal-success .btn.btn-outline-success .fas{color:#00c851}.modal-dialog.modal-notify.modal-info .modal-header{background-color:#33b5e5}.modal-dialog.modal-notify.modal-info .fab,.modal-dialog.modal-notify.modal-info .far,.modal-dialog.modal-notify.modal-info .fas{color:#33b5e5}.modal-dialog.modal-notify.modal-info .badge{background-color:#33b5e5}.modal-dialog.modal-notify.modal-info .btn .fab,.modal-dialog.modal-notify.modal-info .btn .far,.modal-dialog.modal-notify.modal-info .btn .fas{color:#fff}.modal-dialog.modal-notify.modal-info .btn.btn-outline-info .fab,.modal-dialog.modal-notify.modal-info .btn.btn-outline-info .far,.modal-dialog.modal-notify.modal-info .btn.btn-outline-info .fas{color:#33b5e5}@media (min-width:768px){.modal .modal-dialog.modal-top{top:0}.modal .modal-dialog.modal-left{left:0}.modal .modal-dialog.modal-right{right:0}.modal .modal-dialog.modal-bottom{bottom:0}.modal .modal-dialog.modal-top-left{top:10px;left:10px}.modal .modal-dialog.modal-top-right{top:10px;right:10px}.modal .modal-dialog.modal-bottom-left{bottom:10px;left:10px}.modal .modal-dialog.modal-bottom-right{bottom:10px;right:10px}}@media (min-width:992px){.modal.modal-scrolling{position:relative}.modal.modal-scrolling .modal-dialog{position:fixed;z-index:1050}.modal.modal-content-clickable{top:auto;bottom:auto}.modal.modal-content-clickable .modal-dialog{position:fixed}.modal .modal-fluid{width:100%;max-width:100%}.modal .modal-fluid .modal-content{width:100%}.modal .modal-frame{position:absolute;margin:0!important;width:100%;max-width:100%!important}.modal .modal-frame.modal-bottom{bottom:0}.modal .modal-frame.modal-dialog{height:inherit}.modal .modal-full-height{position:absolute;display:flex;margin:0;width:400px;height:auto;min-height:100%;top:0;right:0}.modal .modal-full-height.modal-bottom,.modal .modal-full-height.modal-top{display:block;width:100%;max-width:100%;height:auto}.modal .modal-full-height.modal-top{bottom:auto}.modal .modal-full-height.modal-bottom{min-height:0;top:auto}.modal .modal-full-height .modal-content{width:100%}.modal .modal-full-height.modal-lg{width:90%;max-width:90%}}@media (min-width:992px) and (min-width:992px){.modal .modal-full-height.modal-lg{width:800px;max-width:800px}}@media (min-width:992px) and (min-width:1200px){.modal .modal-full-height.modal-lg{width:1000px;max-width:1000px}}@media (min-width:992px){.modal .modal-side{position:absolute;bottom:10px;right:10px;margin:0;width:400px}}body.scrollable{overflow-y:auto}.modal-dialog .modal-content{border:0}.modal{padding-right:0!important}@media (min-width:768px){.modal .modal-dialog.modal-top{top:0;left:0;right:0}.modal .modal-dialog.modal-left{left:0}.modal .modal-dialog.modal-right{right:0}.modal .modal-dialog.modal-bottom>.modal-content{position:absolute;bottom:0}.modal .modal-dialog.modal-top-left{top:10px;left:10px}.modal .modal-dialog.modal-top-right{top:10px;right:10px}.modal .modal-dialog.modal-bottom-left{left:10px;bottom:10px}.modal .modal-dialog.modal-bottom-right{right:10px;bottom:10px}}.modal .modal-side.modal-top{top:0}.modal .modal-side.modal-left{left:0}.modal .modal-side.modal-right{right:0}.modal .modal-side.modal-bottom{bottom:0}.modal .modal-side.modal-top-left{top:10px;left:10px}.modal .modal-side.modal-top-right{top:10px;right:10px}.modal .modal-side.modal-bottom-left{left:10px;bottom:10px}.modal .modal-side.modal-bottom-right{right:10px;bottom:10px}.modal.fade.top:not(.show) .modal-dialog{transform:translate3d(0,-25%,0)}.modal.fade.left:not(.show) .modal-dialog{transform:translate3d(-25%,0,0)}.modal.fade.right:not(.show) .modal-dialog{transform:translate3d(25%,0,0)}.modal.fade.bottom:not(.show) .modal-dialog{transform:translate3d(0,25%,0)}.modal.fade.in{opacity:1}.modal.fade.in .modal-dialog{transform:translate(0)}.modal.fade.in .modal-dialog .relative{display:inline-block}.modal.modal-scrolling{position:relative}.modal.modal-scrolling .modal-dialog{position:fixed;z-index:1050}.modal.modal-content-clickable{top:auto;bottom:auto}.modal.modal-content-clickable .modal-dialog{position:fixed}.modal .modal-fluid{width:100%;max-width:100%}.modal .modal-fluid .modal-content{width:100%}.modal .modal-frame{position:absolute;width:100%;max-width:100%;margin:0}@media (max-width:767px){.modal .modal-frame{padding:.5rem}}.modal .modal-frame.modal-bottom{bottom:0}.modal .modal-full-height{display:flex;position:absolute;width:400px;min-height:100%;margin:0;top:0;right:0}@media (max-width:576px){.modal .modal-full-height{width:100%;padding:.5rem}}@media (max-width:992px){.modal .modal-full-height{width:100%;height:unset;position:unset}}@media (max-width:992px){.modal .modal-full-height.modal-left,.modal .modal-full-height.modal-right,.modal .modal-full-height.modal-top{margin:1.75rem auto;min-height:unset}}@media (max-width:768px){.modal .modal-full-height.modal-bottom{margin-top:1.75rem}}@media (min-width:768px) and (max-width:992px){.modal .modal-full-height.modal-bottom{margin-bottom:1.75rem}.modal .modal-full-height.modal-bottom .modal-content{bottom:1rem}}@media (max-width:992px){.modal .modal-full-height.modal-bottom,.modal .modal-full-height.modal-left,.modal .modal-full-height.modal-right,.modal .modal-full-height.modal-top{margin-left:auto;margin-right:auto}}.modal .modal-full-height.modal-bottom,.modal .modal-full-height.modal-top{display:block;width:100%;height:auto}.modal .modal-full-height.modal-top{bottom:auto}.modal .modal-full-height.modal-bottom{bottom:0}.modal .modal-full-height .modal-content{width:100%}.modal .modal-full-height.modal-lg{max-width:90%;width:90%}@media (min-width:992px){.modal .modal-full-height.modal-lg{max-width:800px;width:800px}}@media (min-width:1200px){.modal .modal-full-height.modal-lg{max-width:1000px;width:1000px}}.modal .modal-side{position:absolute;right:10px;bottom:10px;margin:0;min-width:100px}@media (max-width:768px){.modal .modal-side{padding-left:.5rem}}.modal-dialog.cascading-modal{margin-top:10%}.modal-dialog.cascading-modal .modal-header{text-align:center;margin:-2rem 1rem 1rem;padding:1.5rem;border:none;flex-direction:column}.modal-dialog.cascading-modal .modal-header .close{margin-right:2.5rem}.modal-dialog.cascading-modal .modal-header.white-text .close{color:#fff;opacity:1}.modal-dialog.cascading-modal .modal-header .title{width:100%;margin-bottom:0;font-size:1.25rem}.modal-dialog.cascading-modal .modal-header .title .fa{margin-right:9px}.modal-dialog.cascading-modal .modal-header .social-buttons{margin-top:1.5rem}.modal-dialog.cascading-modal .modal-header .social-buttons a{font-size:1rem}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs{margin:-1.5rem 1rem 0}.modal-dialog.cascading-modal .modal-c-tabs .tab-content{padding:1.7rem 0 0}.modal-dialog.cascading-modal .modal-body,.modal-dialog.cascading-modal .modal-footer{color:#616161;padding-right:2rem;padding-left:2rem}.modal-dialog.cascading-modal .modal-body .additional-option,.modal-dialog.cascading-modal .modal-footer .additional-option{text-align:center;margin-top:1rem}.modal-dialog.cascading-modal.modal-avatar{margin-top:6rem}.modal-dialog.cascading-modal.modal-avatar .modal-header{margin:-6rem 2rem -1rem}.modal-dialog.cascading-modal.modal-avatar .modal-header img{width:130px}.modal-dialog.modal-notify .heading{margin:0;padding:.3rem;color:#fff;font-size:1.15rem}.modal-dialog.modal-notify .modal-header{border:0}.modal-dialog.modal-notify .close{opacity:1}.modal-dialog.modal-notify .modal-body{padding:1.5rem;color:#616161}.modal-dialog.modal-notify .btn-outline-secondary-modal{background-color:transparent}.modal-dialog.modal-notify.modal-info .modal-header{background-color:#5394ff}.modal-dialog.modal-notify.modal-info .fa{color:#5394ff}.modal-dialog.modal-notify.modal-info .badge{background-color:#5394ff}.modal-dialog.modal-notify.modal-info .btn-primary-modal{background:#5394ff}.modal-dialog.modal-notify.modal-info .btn-primary-modal:active,.modal-dialog.modal-notify.modal-info .btn-primary-modal:focus,.modal-dialog.modal-notify.modal-info .btn-primary-modal:hover{background-color:#6da4ff!important}.modal-dialog.modal-notify.modal-info .btn-primary-modal.active{background-color:#0059ec!important}.modal-dialog.modal-notify.modal-info .btn-outline-secondary-modal{border:2px solid #5394ff;color:#5394ff!important}.modal-dialog.modal-notify.modal-warning .modal-header{background-color:#ff8e38}.modal-dialog.modal-notify.modal-warning .fa{color:#ff8e38}.modal-dialog.modal-notify.modal-warning .badge{background-color:#ff8e38}.modal-dialog.modal-notify.modal-warning .btn-primary-modal{background:#ff8e38}.modal-dialog.modal-notify.modal-warning .btn-primary-modal:active,.modal-dialog.modal-notify.modal-warning .btn-primary-modal:focus,.modal-dialog.modal-notify.modal-warning .btn-primary-modal:hover{background-color:#ff9c52!important}.modal-dialog.modal-notify.modal-warning .btn-primary-modal.active{background-color:#d15a00!important}.modal-dialog.modal-notify.modal-warning .btn-outline-secondary-modal{border:2px solid #ff8e38;color:#ff8e38!important}.modal-dialog.modal-notify.modal-success .modal-header{background-color:#01d36b}.modal-dialog.modal-notify.modal-success .fa{color:#01d36b}.modal-dialog.modal-notify.modal-success .badge{background-color:#01d36b}.modal-dialog.modal-notify.modal-success .btn-primary-modal{background:#01d36b}.modal-dialog.modal-notify.modal-success .btn-primary-modal:active,.modal-dialog.modal-notify.modal-success .btn-primary-modal:focus,.modal-dialog.modal-notify.modal-success .btn-primary-modal:hover{background-color:#01ec78!important}.modal-dialog.modal-notify.modal-success .btn-primary-modal.active{background-color:#016d38!important}.modal-dialog.modal-notify.modal-success .btn-outline-secondary-modal{border:2px solid #01d36b;color:#01d36b!important}.modal-dialog.modal-notify.modal-danger .modal-header{background-color:#ff4b4b}.modal-dialog.modal-notify.modal-danger .fa{color:#ff4b4b}.modal-dialog.modal-notify.modal-danger .badge{background-color:#ff4b4b}.modal-dialog.modal-notify.modal-danger .btn-primary-modal{background:#ff4b4b}.modal-dialog.modal-notify.modal-danger .btn-primary-modal:active,.modal-dialog.modal-notify.modal-danger .btn-primary-modal:focus,.modal-dialog.modal-notify.modal-danger .btn-primary-modal:hover{background-color:#ff6565!important}.modal-dialog.modal-notify.modal-danger .btn-primary-modal.active{background-color:#e40000!important}.modal-dialog.modal-notify.modal-danger .btn-outline-secondary-modal{border:2px solid #ff4b4b;color:#ff4b4b!important}.modal-sm .modal-content{margin:0 auto;max-width:300px}@media (min-width:768px){.modal-sm{max-width:300px}}.modal .modal-fluid,.modal .modal-frame{width:100%;max-width:100%}.modal-ext .modal-content .modal-header{text-align:center}.modal-ext .modal-content .options{float:left}.modal-ext .modal-content .modal-body .text-xs-center fieldset{margin-top:20px}.modal-ext .modal-content .call{margin-top:1rem}.modal-ext .modal-content .modal-body{padding:2rem 2rem 1rem}.modal-content:not(.card-image) .close{position:absolute;right:15px}.modal-cart li p{margin:5px;font-weight:400}.modal-cart li p .badge{margin-left:10px;margin-top:3px;font-weight:400;position:absolute}.modal-cart li p .quantity{font-size:16px;margin-right:7px;font-weight:300}.modal-cart .cartPageLink{margin-left:10px}.modal-cart .cartPageLink a{text-decoration:underline;color:#666}.modal-cart .total{float:right;font-weight:400}.cf-phone{margin-left:7px}.side-modal{position:fixed;width:400px;height:100%;width:100%;z-index:9999}.side-modal .modal-dialog{position:absolute;bottom:10px;right:10px;width:400px;margin:10px}@media (max-width:760px){.side-modal .modal-dialog{display:none}}.side-modal .modal-header{padding:1rem}.side-modal .modal-header .heading{margin:0;padding:0}.side-modal .modal-content{border:none}.modal-dynamic>:first-child{display:flex;flex-direction:column;height:100%}.side-modal.fade:not(.show) .modal-dialog{transform:translate3d(25%,0,0)}.transparent-bd{opacity:0!important}.modal-backdrop,.modal-backdrop.in{opacity:.5}#exampleModalScroll{overflow-x:hidden;overflow-y:auto}.modal-open .modal{overflow-x:hidden;overflow-y:hidden}.form-dark .card-image{background-size:100%}"],encapsulation:2}),t})(),oC=(()=>{class t{constructor(t,e){this.clf=e,this.config=XS,this.open=new r.n,this.opened=new r.n,this.close=new r.n,this.closed=new r.n,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.lastDismissReason="",this.loaders=[],this._backdropLoader=this.clf.createLoader(this.el,this.vcr,this.renderer),this.renderer=t.createRenderer(null,null)}show(t,e){return this.modalsCount++,this._createLoaders(),this.config=Object.assign({},XS,e),this._showBackdrop(),this.lastDismissReason=null,this._showModal(t)}hide(t){1===this.modalsCount&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(t),this.removeLoaders(t)},this.config.animated?150:0)}_showBackdrop(){const t=this.config.backdrop||"static"===this.config.backdrop,e=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),t&&e&&(this._backdropLoader.attach(rC).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(t){const e=this.loaders[this.loaders.length-1],n=new JS,r=e.provide({provide:ZS,useValue:this.config}).provide({provide:JS,useValue:n}).attach(iC).to("body").show({content:t,isAnimated:this.config.animated,data:this.config.data,mdbModalService:this});return r.instance.focusModalElement(),r.instance.level=this.getModalsCount(),n.hide=()=>{r.instance.hide()},n.content=e.getInnerComponent()||null,n}_hideModal(t){const e=this.loaders[t-1];e&&e.hide()}getModalsCount(){return this.modalsCount}setDismissReason(t){this.lastDismissReason=t}removeBackdrop(){this._backdropLoader.hide(),this.backdropRef=null}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){document&&(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10))}resetScrollbar(){document.body.style.paddingRight=this.originalBodyPadding+"px"}getScrollbarWidth(){const t=this.renderer.createElement("div");this.renderer.addClass(t,"modal-scrollbar-measure"),this.renderer.appendChild(document.body,t);const e=t.offsetWidth-t.clientWidth;return this.renderer.removeChild(document.body,t),e}_createLoaders(){const t=this.clf.createLoader(this.el,this.vcr,this.renderer);this.copyEvent(t.onBeforeShow,this.open),this.copyEvent(t.onShown,this.opened),this.copyEvent(t.onBeforeHide,this.close),this.copyEvent(t.onHidden,this.closed),this.loaders.push(t)}removeLoaders(t){this.loaders.splice(t-1,1),this.loaders.forEach((t,e)=>{t.instance.level=e+1})}copyEvent(t,e){t.subscribe(()=>{e.emit(this.lastDismissReason)})}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(r.G),r.Wb(MS))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),sC=(()=>{class t{static forRoot(){return{ngModule:t,providers:[oC,MS,DS]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[sw]]}),t})(),aC=(()=>{class t{constructor(){this.navbarLinkClicks=new vt.a}getNavbarLinkClicks(){return this.navbarLinkClicks.asObservable()}setNavbarLinkClicks(){this.navbarLinkClicks.next()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),uC=(()=>{class t{constructor(t,e){this._navbarService=t,this.renderer=e,this.linkClick=new r.n}ngAfterContentInit(){setTimeout(()=>{this.links.forEach(t=>{this.renderer.listen(t.nativeElement,"click",()=>{this._navbarService.setNavbarLinkClicks()})})},0)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(aC),r.Pb(r.F))},t.\u0275cmp=r.Jb({type:t,selectors:[["links"]],contentQueries:function(t,e,n){if(1&t&&r.Ib(n,Zr,1,r.l),2&t){let t;r.lc(t=r.ac())&&(e.links=t)}},outputs:{linkClick:"linkClick"},ngContentSelectors:aw,decls:1,vars:0,template:function(t,e){1&t&&(r.dc(),r.cc(0))},encapsulation:2}),t})(),cC=(()=>{class t{constructor(t,e,n,r,i){this.renderer=t,this._navbarService=e,this._cdRef=n,this._ngZone=r,this._document=i,this.containerInside=!0,this.collapseId="navbarCollapse",this.scrollSensitivity=120,this.scrollableNavbar=!1,this._destroy$=new vt.a,this.shown=!1,this.duration=350,this.collapse=!0,this.showClass=!1,this.collapsing=!1,this._itemsLength=0,this.ariaExpanded=!1,this._navbarService.getNavbarLinkClicks().pipe(C_(this._destroy$)).subscribe(t=>{this.closeNavbarOnClick(t)})}closeNavbarOnClick(t){this.navbarLinkClicks=t,this.showClass&&this.hide()}addTogglerIconClasses(){this.iconBackground&&(Array.isArray(this.iconBackground)?this.iconBackground.forEach(t=>{this.renderer.addClass(this.toggler.nativeElement,t)}):this.renderer.addClass(this.toggler.nativeElement,this.iconBackground))}_listenToScroll(){this._ngZone.runOutsideAngular(()=>{A_(this._document,"scroll").pipe(C_(this._destroy$)).subscribe(()=>{window.pageYOffset>this.scrollSensitivity?this.renderer.addClass(this.navbar.nativeElement,"top-nav-collapse"):this.renderer.removeClass(this.navbar.nativeElement,"top-nav-collapse")})})}ngOnInit(){const t=this.SideClass.split(" ");this.doubleNav=-1!==t.indexOf("double-nav")}ngAfterViewInit(){this.containerInside||Array.from(this.container.nativeElement.children).forEach(t=>{this.renderer.appendChild(this.navbar.nativeElement,t),this.container.nativeElement.remove()}),0===this.el.nativeElement.children.length&&this.el.nativeElement.remove(),this.addTogglerIconClasses(),this.scrollableNavbar&&this.renderer.addClass(this.el.nativeElement,"collapsed-navbar-scroll"),this.navbar.nativeElement.classList.contains("scrolling-navbar")&&this._listenToScroll()}toggle(){this.collapsing||(this.shown?this.hide():this.show())}show(){this.shown=!0,this.collapse=!1,this.collapsing=!0,this.ariaExpanded=!0,setTimeout(()=>{this.height=this.el.nativeElement.scrollHeight,this.renderer.setStyle(this.el.nativeElement,"height",this.height+"px")},0),setTimeout(()=>{this.collapsing=!1,this.collapse=!0,this.showClass=!0},this.duration),this._cdRef.markForCheck()}hide(){this.shown&&(this.shown=!1,this.collapse=!1,this.showClass=!1,this.collapsing=!0,this.ariaExpanded=!1,setTimeout(()=>{this.renderer.setStyle(this.el.nativeElement,"height","0px")},0),setTimeout(()=>{this.collapsing=!1,this.collapse=!0},this.duration)),this._cdRef.markForCheck()}get displayStyle(){return this.containerInside?"":"flex"}onResize(t){let e=0;e=this.SideClass.includes("navbar-expand-xl")?1200:this.SideClass.includes("navbar-expand-lg")?992:this.SideClass.includes("navbar-expand-md")?768:this.SideClass.includes("navbar-expand-sm")?576:t.target.innerWidth+1,t.target.innerWidth<e?this.shown||(this.collapse=!1,this.renderer.setStyle(this.el.nativeElement,"height","0px"),this.renderer.setStyle(this.el.nativeElement,"opacity","0"),setTimeout(()=>{this.height=this.el.nativeElement.scrollHeight,this.collapse=!0,this.renderer.setStyle(this.el.nativeElement,"opacity","")},4)):(this.collapsing=!1,this.shown=!1,this.showClass=!1,this.collapse=!0,this.ariaExpanded=!1,this.renderer.setStyle(this.el.nativeElement,"height",""))}ngAfterContentChecked(){this.el.nativeElement.firstElementChild&&(this._itemsLength!==this.el.nativeElement.firstElementChild.firstElementChild.children.length&&(this.height=this.el.nativeElement.firstElementChild.firstElementChild.clientHeight,this.renderer.setStyle(this.el.nativeElement,"height",this.height+"px")),this._itemsLength=this.el.nativeElement.firstElementChild.firstElementChild.children.length),this._cdRef.markForCheck()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.F),r.Pb(aC),r.Pb(r.h),r.Pb(r.A),r.Pb(s))},t.\u0275cmp=r.Jb({type:t,selectors:[["mdb-navbar"]],contentQueries:function(t,e,n){if(1&t&&r.Ib(n,uC,1),2&t){let t;r.lc(t=r.ac())&&(e.links=t.first)}},viewQuery:function(t,e){if(1&t&&(r.Ac(mw,3),r.Ac(gw,1),r.Ac(yw,3),r.Ac(bw,3),r.Ac(vw,1)),2&t){let t;r.lc(t=r.ac())&&(e.el=t.first),r.lc(t=r.ac())&&(e.mobile=t.first),r.lc(t=r.ac())&&(e.navbar=t.first),r.lc(t=r.ac())&&(e.container=t.first),r.lc(t=r.ac())&&(e.toggler=t.first)}},hostBindings:function(t,e){1&t&&r.Zb("resize",function(t){return e.onResize(t)},!1,r.oc)},inputs:{containerInside:"containerInside",collapseId:"collapseId",scrollSensitivity:"scrollSensitivity",scrollableNavbar:"scrollableNavbar",iconBackground:"iconBackground",SideClass:"SideClass"},ngContentSelectors:xw,decls:12,vars:19,consts:[["nav",""],[3,"ngClass","ngStyle"],["container",""],[4,"ngIf"],[1,"navbar-collapse","collapse",3,"ngClass"],["navbar",""],["class","navbar-toggler","type","button","aria-label","Toggle navigation","mdbWavesEffect","",3,"click",4,"ngIf"],["type","button","aria-label","Toggle navigation","mdbWavesEffect","",1,"navbar-toggler",3,"click"],["toggler",""],[1,"navbar-toggler-icon"]],template:function(t,e){1&t&&(r.dc(Cw),r.Sb(0,"nav",null,0),r.Sb(2,"div",1,2),r.cc(4),r.cc(5,1),r.cc(6,2),r.vc(7,_w,1,0,"ng-content",3),r.vc(8,Sw,2,1,"div",3),r.Sb(9,"div",4,5),r.cc(11,3),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Db(e.SideClass),r.Bb(2),r.ec("ngClass",r.gc(11,Ew,e.containerInside))("ngStyle",r.gc(13,Ow,e.displayStyle)),r.Bb(5),r.ec("ngIf",1==e.doubleNav),r.Bb(1),r.ec("ngIf",0==e.doubleNav),r.Bb(1),r.sc("height",e.height),r.ec("ngClass",r.ic(15,Tw,e.collapse,e.showClass,e.collapsing)),r.Cb("id",e.collapseId))},directives:[I,D,j],styles:[".navbar{box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12);font-weight:300}.navbar form .md-form input{margin:0 5px 1px 8px}.navbar .breadcrumb{margin:0;padding:.3rem 0 0 1rem;background-color:inherit;font-size:15px;font-weight:300}.navbar .breadcrumb .breadcrumb-item{color:#fff}.navbar .breadcrumb .breadcrumb-item.active,.navbar .breadcrumb .breadcrumb-item:before{color:hsla(0,0%,100%,.65)}.navbar .navbar-toggler{outline:0;border-width:0}.navbar .nav-flex-icons{flex-direction:row}@media (max-width:992px){.navbar .container{width:100%}.navbar .container .navbar-toggler-right{right:0}}.navbar .nav-item .nav-link{display:block}.navbar .nav-item .nav-link.disabled:active{pointer-events:none}.navbar .nav-item .nav-link .fab,.navbar .nav-item .nav-link .far,.navbar .nav-item .nav-link .fas{padding-right:3px;padding-left:3px}@media (max-width:992px){.navbar .nav-item .nav-link{padding-right:6px;padding-left:6px}}.navbar .dropdown-menu{position:absolute!important;margin-top:0}.navbar .dropdown-menu a{padding:10px;font-size:.9375rem;font-weight:300;color:#000}@media (max-width:600px){.navbar .dropdown-menu form{width:17rem}}@media (min-width:600px){.navbar .dropdown-menu form{width:22rem}}.navbar.navbar-light .navbar-nav .nav-item .nav-link.disbled,.navbar.navbar-light .navbar-nav .nav-item .nav-link.disbled:hover{color:rgba(0,0,0,.5)}.navbar.navbar-light .navbar-toggler-icon{background-image:url(\"data:image/svg+xml;charset=utf8,%3Csvg viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='rgba(0, 0, 0, 0.9)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 8h24M4 16h24M4 24h24'/%3E%3C/svg%3E\");cursor:pointer}.navbar.navbar-light .breadcrumb .nav-item .nav-link,.navbar.navbar-light .navbar-nav .nav-item .nav-link{color:#000;transition:.35s}.navbar.navbar-light .breadcrumb .nav-item .nav-link:hover,.navbar.navbar-light .navbar-nav .nav-item .nav-link:hover{color:rgba(0,0,0,.75)}.navbar.navbar-light .breadcrumb .nav-item.active>.nav-link,.navbar.navbar-light .navbar-nav .nav-item.active>.nav-link{background-color:rgba(0,0,0,.1)}.navbar.navbar-light .breadcrumb .nav-item.active>.nav-link:hover,.navbar.navbar-light .navbar-nav .nav-item.active>.nav-link:hover,.navbar.navbar-light .navbar-toggler{color:#000}.navbar.navbar-light form .md-form input{border-bottom:1px solid #000}.navbar.navbar-light form .md-form input:focus:not([readonly]){border-color:#4285f4}.navbar.navbar-light form .md-form .form-control{color:#000}.navbar.navbar-light form .md-form .form-control::-moz-placeholder{color:#000;font-weight:300}.navbar.navbar-light form .md-form .form-control:-ms-input-placeholder{color:#000;font-weight:300}.navbar.navbar-light form .md-form .form-control::placeholder{color:#000;font-weight:300}.navbar.navbar-dark .navbar-nav .nav-item .nav-link.disbled,.navbar.navbar-dark .navbar-nav .nav-item .nav-link.disbled:hover{color:hsla(0,0%,100%,.5)}.navbar.navbar-dark .navbar-toggler-icon{background-image:url(\"data:image/svg+xml;charset=utf8,%3Csvg viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='rgba(255, 255, 255, 0.9)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 8h24M4 16h24M4 24h24'/%3E%3C/svg%3E\");cursor:pointer}.navbar.navbar-dark .breadcrumb .nav-item .nav-link,.navbar.navbar-dark .navbar-nav .nav-item .nav-link{color:#fff;transition:.35s}.navbar.navbar-dark .breadcrumb .nav-item .nav-link:hover,.navbar.navbar-dark .navbar-nav .nav-item .nav-link:hover{color:hsla(0,0%,100%,.75)}.navbar.navbar-dark .breadcrumb .nav-item.active>.nav-link,.navbar.navbar-dark .navbar-nav .nav-item.active>.nav-link{background-color:hsla(0,0%,100%,.1)}.navbar.navbar-dark .breadcrumb .nav-item.active>.nav-link:hover,.navbar.navbar-dark .navbar-nav .nav-item.active>.nav-link:hover,.navbar.navbar-dark .navbar-toggler{color:#fff}.navbar.navbar-dark form .md-form input{border-bottom:1px solid #fff}.navbar.navbar-dark form .md-form input:focus:not([readonly]){border-color:#4285f4}.navbar.navbar-dark form .md-form .form-control{color:#fff}.navbar.navbar-dark form .md-form .form-control::-moz-placeholder{color:#fff;font-weight:300}.navbar.navbar-dark form .md-form .form-control:-ms-input-placeholder{color:#fff;font-weight:300}.navbar.navbar-dark form .md-form .form-control::placeholder{color:#fff;font-weight:300}@media (min-width:600px){.navbar.scrolling-navbar{transition:background .5s ease-in-out,padding .5s ease-in-out;padding-top:12px;padding-bottom:12px}.navbar.scrolling-navbar .navbar-nav>li{transition-duration:1s}.navbar.scrolling-navbar.top-nav-collapse{padding-top:5px;padding-bottom:5px}}@media (min-width:1200px){.navbar.navbar-expand-xl links,.navbar.navbar-expand-xl navlinks{display:flex;flex-direction:row;align-items:center!important;align-self:center!important;width:100%}}@media (min-width:992px){.navbar>logo>div>a img{margin-left:20px}.navbar.navbar-expand-lg links,.navbar.navbar-expand-lg navlinks{display:flex;flex-direction:row;align-items:center!important;align-self:center!important;width:100%}}@media (min-width:768px){.navbar.navbar-expand-md links,.navbar.navbar-expand-md navlinks{display:flex;flex-direction:row;width:100%}}@media (min-width:576px){.navbar.navbar-expand-sm links,.navbar.navbar-expand-sm navlinks{display:flex;flex-direction:row;width:100%}}@media (max-width:992px){.collapsed-navbar-scroll{max-height:calc(100vh - 40px);overflow-y:scroll}}.navbar-container{order:-1;width:50px!important;padding-left:5px;padding-right:5px}.navbar-nav .dropdown-menu-right.dropdown-menu{left:unset}.navbar-nav .dropdown-menu{top:100%!important;transform:translateZ(0)!important}.breadcrumbs{display:flex;padding-left:5px;padding-right:5px;order:0;align-items:center}@media (min-width:1441px){.breadcrumbs{margin-left:-.6rem}}@supports (-ms-ime-align:auto){@media (min-width:992px){.ie-nav .navbar-nav.nav-flex-icons{position:absolute;top:30%;right:0}.ie-nav .navbar-nav{position:absolute;top:30%;margin-left:88px}.ie-nav .navbar-brand>img{margin-top:-2px;padding-right:16px}}.ie-nav .navbar-toggler{position:absolute;margin-top:-40px;right:0}@media (min-width:992px){.intro-non-fixed-nav>links .navbar-collapse{display:inline-flex!important;align-items:center!important;justify-content:space-between!important}}@media (min-width:992px){.intro-fixed-nav .navbar-nav.nav-flex-icons{position:absolute;top:30%;right:0}.intro-fixed-nav .navbar-nav{position:absolute;top:30%;margin-left:88px}.intro-fixed-nav .navbar-brand img{margin-top:-2px;padding-right:16px}}.intro-fixed-nav .navbar-toggler{position:absolute;margin-top:-40px;right:0}}@media (-ms-high-contrast:active) and (min-width:992px),(-ms-high-contrast:none) and (min-width:992px){.ie-nav .navbar-nav.nav-flex-icons{position:absolute;top:30%;right:0}.ie-nav .navbar-nav{position:absolute;top:30%;margin-left:88px}.ie-nav .navbar-brand>img{margin-top:-2px;padding-right:16px}}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.ie-nav .navbar-toggler{position:absolute;margin-top:-40px;right:0}}@media (-ms-high-contrast:active) and (min-width:992px),(-ms-high-contrast:none) and (min-width:992px){.intro-non-fixed-nav>links .navbar-collapse{display:inline-flex!important;align-items:center!important;justify-content:space-between!important}}@media (-ms-high-contrast:active) and (min-width:992px),(-ms-high-contrast:none) and (min-width:992px){.intro-fixed-nav .navbar-nav.nav-flex-icons{position:absolute;top:30%;right:0}.intro-fixed-nav .navbar-nav{position:absolute;top:30%;margin-left:88px}.intro-fixed-nav .navbar-brand img{margin-top:-2px;padding-right:16px}}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.intro-fixed-nav .navbar-toggler{position:absolute;margin-top:-40px;right:0}}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:none}"],encapsulation:2,changeDetection:0}),t})(),lC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Jb({type:t,selectors:[["logo"],["mdb-navbar-brand"]],ngContentSelectors:aw,decls:1,vars:0,template:function(t,e){1&t&&(r.dc(),r.cc(0))},encapsulation:2}),t})(),hC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({providers:[aC],imports:[[L]]}),t})(),dC=(()=>{class t{constructor(){this.placement="top",this.triggers="click"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),fC=(()=>{class t{static forRoot(){return{ngModule:t,providers:[dC,MS,DS]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[L]]}),t})(),pC=(()=>{class t{constructor(){this._dataSource=[],this._dataSourceChanged=new vt.a}addRow(t){this.getDataSource().push(t)}addRowAfter(t,e){this.getDataSource().splice(t,0,e)}removeRow(t){this.getDataSource().splice(t,1)}rowRemoved(){return new It.a(t=>{t.next(!0)})}removeLastRow(){this.getDataSource().pop()}getDataSource(){return this._dataSource}setDataSource(t){this._dataSource=t,this._dataSourceChanged.next(this.getDataSource())}dataSourceChange(){return this._dataSourceChanged}filterLocalDataBy(t){return this.getDataSource().filter(e=>Object.keys(e).some(n=>{if(e[n])return e[n].toString().toLowerCase().includes(t)}))}searchLocalDataBy(t){return t?t?this.filterLocalDataBy(t.toLowerCase()):void 0:this.getDataSource()}searchDataObservable(t){return new It.a(e=>{e.next(this.searchLocalDataBy(t))})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Lb)({factory:function(){return new t},token:t,providedIn:"root"}),t})(),mC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({providers:[pC],imports:[[L]]}),t})(),gC=(()=>{class t{constructor(){this.placement="top",this.triggers="hover focus"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),yC=(()=>{class t{static forRoot(){return{ngModule:t,providers:[gC,MS,DS]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[L]]}),t})(),bC=(()=>{class t{constructor(t){this.el=t}click(t){if(!this.el.nativeElement.classList.contains("disabled")){const e=this.el.nativeElement;e.classList.contains("waves-effect")||(e.className+=" waves-effect");const n=t.clientX-e.getBoundingClientRect().left,r=t.clientY-e.getBoundingClientRect().top,i=document.createElement("div");i.className+="waves-ripple waves-rippling";const o=e.appendChild(i),s=n+"px";i.style.top=r+"px",i.style.left=s;const a="scale("+e.clientWidth/100*3+") translate(0,0)";i.style.webkitTransform=a,i.style.transform=a,i.style.opacity="1";const u=750;i.style.webkitTransitionDuration=u+"ms",i.style.transitionDuration=u+"ms",this.removeRipple(e,o)}}removeRipple(t,e){e.classList.remove("waves-rippling"),setTimeout(()=>{e.style.opacity="0",setTimeout(()=>{t.removeChild(e)},750)},200)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.l))},t.\u0275dir=r.Kb({type:t,selectors:[["","mdbWavesEffect",""]],hostBindings:function(t,e){1&t&&r.Zb("click",function(t){return e.click(t)})}}),t})(),vC=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({}),t})(),_C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[L]]}),t})(),wC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[Pw,vC.forRoot(),YS.forRoot(),hC,WS.forRoot(),zw.forRoot(),Kw,Jw.forRoot(),sC.forRoot(),yC.forRoot(),fC.forRoot(),QS,qw.forRoot(),Zw,mC,Iw,kw,GS,_C],Pw,qw,vC,YS,hC,WS,zw,Kw,Jw,sC,yC,fC,QS,Zw,mC,Iw,kw,GS,_C]}),t})(),SC=(()=>{class t{static forRoot(){return{ngModule:wC}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[Pw,qw,vC,YS,hC,WS,zw,Kw,Jw,sC,yC,fC,QS,Zw,mC,Iw,kw,GS,_C]}),t})();function CC(t,e){1&t&&(r.Sb(0,"div"),r.wc(1,"\xa0"),r.Rb())}function EC(t,e){1&t&&(r.Sb(0,"div",26),r.Sb(1,"a",27),r.wc(2,"Log out"),r.Rb(),r.Rb())}function OC(t,e){if(1&t){const t=r.Tb();r.Sb(0,"tr",28),r.Zb("click",function(){r.pc(t);const n=e.$implicit;return r.bc().selectProducto(n)}),r.Sb(1,"td"),r.wc(2),r.Rb(),r.Sb(3,"td"),r.wc(4),r.Rb(),r.Sb(5,"td"),r.wc(6),r.Rb(),r.Sb(7,"td"),r.wc(8),r.Rb(),r.Sb(9,"td"),r.wc(10),r.Rb(),r.Sb(11,"td"),r.wc(12),r.Rb(),r.Sb(13,"td"),r.wc(14),r.Rb(),r.Sb(15,"td"),r.Qb(16,"img",29),r.Rb(),r.Rb()}if(2&t){const t=e.$implicit;r.Bb(2),r.xc(t.name),r.Bb(2),r.xc(t.description),r.Bb(2),r.xc(t.material),r.Bb(2),r.xc(t.medidas),r.Bb(2),r.xc(t.modelo),r.Bb(2),r.xc(t.costo),r.Bb(2),r.xc(t.categoria),r.Bb(2),r.fc("src",t.urlPhoto,r.qc)}}let TC=(()=>{class t{constructor(t,e){this.categoriaService=t,this.authService=e,this.producto=new kv,this.categoria=new Av}getCategorias(){this.categoriaService.getCategorias().subscribe(t=>{this.categorias=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data()))})}ngOnInit(){this.categoriaService.getProductos().subscribe(t=>{this.productos=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())),this.getCategorias()})}create(){this.categoriaService.createProducto(this.producto),this.producto=new kv}selectProducto(t){this.producto=t}update(){this.categoriaService.updateProducto(this.producto),this.producto=new kv}delete(t){this.categoriaService.deleteProducto(t),this.producto=new kv}limpiar(){this.producto=new kv}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Rv),r.Pb(Sv))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-lista-productos"]],decls:102,vars:13,consts:[[4,"ngIf"],["SideClass","navbar navbar-expand-lg navbar-dark purple lighten-1 ",3,"containerInside"],["href","#",1,"navbar-brand"],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],["mdbWavesEffect","",1,"nav-link","waves-light",3,"routerLink"],[1,"sr-only"],[1,"nav-item"],[1,"navbar-nav","ml-auto","nav-flex-icons"],["dropdown","",1,"nav-item","avatar","dropdown"],["dropdownToggle","","mdbWavesEffect","","type","button","mdbWavesEffect","",1,"nav-link","dropdown-toggle","waves-light"],["src","","alt","",1,"img-fluid","rounded-circle","z-depth-0"],["class","dropdown-menu dropdown-menu-right dropdown dropdown-primary","role","menu",4,"dropdownMenu"],[1,"navbar","navbar-light","bg-light"],[1,"navbar-brand","mb-0","h1"],[1,"row","justify-content-center"],[1,"col-sm-4"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,""],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"col-sm-6"],[1,"table"],[3,"click",4,"ngFor","ngForOf"],["role","menu",1,"dropdown-menu","dropdown-menu-right","dropdown","dropdown-primary"],["mdbWavesEffect","","href","authService.cerrarSesion()",1,"dropdown-item","waves-light"],[3,"click"],["width","80","height","80",3,"src"]],template:function(t,e){1&t&&(r.Sb(0,"div"),r.wc(1,"\xa0"),r.Rb(),r.vc(2,CC,2,0,"div",0),r.Sb(3,"mdb-navbar",1),r.Sb(4,"mdb-navbar-brand"),r.Sb(5,"a",2),r.wc(6,"DASHBOARD "),r.Rb(),r.Rb(),r.Sb(7,"links"),r.Sb(8,"ul",3),r.Sb(9,"li",4),r.Sb(10,"a",5),r.wc(11,"Productos"),r.Sb(12,"span",6),r.wc(13,"(current)"),r.Rb(),r.Rb(),r.Rb(),r.Sb(14,"li",7),r.Sb(15,"a",5),r.wc(16,"Categorias"),r.Rb(),r.Rb(),r.Rb(),r.Sb(17,"ul",8),r.Sb(18,"li",9),r.Sb(19,"a",10),r.Qb(20,"img",11),r.Rb(),r.vc(21,EC,3,0,"div",12),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Sb(22,"nav",13),r.Sb(23,"span",14),r.wc(24,"SECCION DE PRODUCTOS"),r.Rb(),r.Rb(),r.Sb(25,"div"),r.wc(26,"\xa0"),r.Rb(),r.Sb(27,"div",15),r.Sb(28,"div",16),r.Sb(29,"h4"),r.wc(30,"Alta de Producto"),r.Rb(),r.Sb(31,"p"),r.Sb(32,"label"),r.wc(33,"Nombre"),r.Rb(),r.Sb(34,"input",17),r.Zb("ngModelChange",function(t){return e.producto.name=t}),r.Rb(),r.Rb(),r.Sb(35,"p"),r.Sb(36,"label"),r.wc(37,"Descripcion"),r.Rb(),r.Sb(38,"input",17),r.Zb("ngModelChange",function(t){return e.producto.description=t}),r.Rb(),r.Rb(),r.Sb(39,"p"),r.Sb(40,"label"),r.wc(41,"Material"),r.Rb(),r.Sb(42,"input",17),r.Zb("ngModelChange",function(t){return e.producto.material=t}),r.Rb(),r.Rb(),r.Sb(43,"p"),r.Sb(44,"label"),r.wc(45,"Medidas"),r.Rb(),r.Sb(46,"input",17),r.Zb("ngModelChange",function(t){return e.producto.medidas=t}),r.Rb(),r.Rb(),r.Sb(47,"p"),r.Sb(48,"label"),r.wc(49,"Modelo"),r.Rb(),r.Sb(50,"input",17),r.Zb("ngModelChange",function(t){return e.producto.modelo=t}),r.Rb(),r.Rb(),r.Sb(51,"p"),r.Sb(52,"label"),r.wc(53,"Costo"),r.Rb(),r.Sb(54,"input",17),r.Zb("ngModelChange",function(t){return e.producto.costo=t}),r.Rb(),r.Rb(),r.Sb(55,"p"),r.Sb(56,"label"),r.wc(57,"URL PHOTO"),r.Rb(),r.Sb(58,"input",17),r.Zb("ngModelChange",function(t){return e.producto.urlPhoto=t}),r.Rb(),r.Rb(),r.Sb(59,"p"),r.Sb(60,"label"),r.wc(61,"Categoria: 1: Quirurgicos, 2: Empresarial, 3: Deportivos "),r.Rb(),r.Sb(62,"input",17),r.Zb("ngModelChange",function(t){return e.producto.categoria=t}),r.Rb(),r.Rb(),r.Sb(63,"table",18),r.Sb(64,"tr"),r.Sb(65,"td"),r.Sb(66,"button",19),r.Zb("click",function(){return e.create()}),r.wc(67," Insertar "),r.Rb(),r.Rb(),r.Sb(68,"td"),r.Sb(69,"button",20),r.Zb("click",function(){return e.update()}),r.wc(70," Modificar "),r.Rb(),r.Rb(),r.Sb(71,"td"),r.Sb(72,"button",21),r.Zb("click",function(){return e.delete(e.producto.id)}),r.wc(73," Eliminar "),r.Rb(),r.Rb(),r.Sb(74,"td"),r.Sb(75,"button",22),r.Zb("click",function(){return e.limpiar()}),r.wc(76," Limpiar "),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Sb(77,"div",23),r.Sb(78,"h4"),r.wc(79,"Lista Laptos"),r.Rb(),r.Sb(80,"div"),r.wc(81,"\xa0"),r.Rb(),r.Sb(82,"table",24),r.Sb(83,"thead"),r.Sb(84,"th"),r.wc(85,"Nombre"),r.Rb(),r.Sb(86,"th"),r.wc(87,"Descripcion"),r.Rb(),r.Sb(88,"th"),r.wc(89,"Material"),r.Rb(),r.Sb(90,"th"),r.wc(91,"Medidas"),r.Rb(),r.Sb(92,"th"),r.wc(93,"Modelo"),r.Rb(),r.Sb(94,"th"),r.wc(95,"Costo"),r.Rb(),r.Sb(96,"th"),r.wc(97,"Categoria"),r.Rb(),r.Sb(98,"th"),r.wc(99,"Imagen"),r.Rb(),r.Rb(),r.Sb(100,"tbody"),r.vc(101,OC,17,8,"tr",25),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Bb(2),r.ec("ngIf",e.authService.userState),r.Bb(1),r.ec("containerInside",!1),r.Bb(7),r.ec("routerLink","/listaProductos"),r.Bb(5),r.ec("routerLink","/listaCategorias"),r.Bb(19),r.ec("ngModel",e.producto.name),r.Bb(4),r.ec("ngModel",e.producto.description),r.Bb(4),r.ec("ngModel",e.producto.material),r.Bb(4),r.ec("ngModel",e.producto.medidas),r.Bb(4),r.ec("ngModel",e.producto.modelo),r.Bb(4),r.ec("ngModel",e.producto.costo),r.Bb(4),r.ec("ngModel",e.producto.urlPhoto),r.Bb(4),r.ec("ngModel",e.producto.categoria),r.Bb(39),r.ec("ngForOf",e.productos))},directives:[j,cC,lC,uC,Zr,bC,US,HS,BS,Mv,Jv,y_,A],styles:[""]}),t})(),xC=(()=>{class t{constructor(){this.title="angularbootstrap"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Jb({type:t,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Qb(0,"router-outlet"),r.Qb(1,"app-lista-productos"))},directives:[Xr,TC],styles:["body[_ngcontent-%COMP%]{overflow-x:hidden}#sidebar-wrapper[_ngcontent-%COMP%]{min-height:100vh;margin-left:-15rem;transition:margin .25s ease-out}#sidebar-wrapper[_ngcontent-%COMP%]   .sidebar-heading[_ngcontent-%COMP%]{padding:.875rem 1.25rem;font-size:1.2rem}#sidebar-wrapper[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]{width:15rem}#page-content-wrapper[_ngcontent-%COMP%]{min-width:100vw}#wrapper.toggled[_ngcontent-%COMP%]   #sidebar-wrapper[_ngcontent-%COMP%]{margin-left:0}@media (min-width:768px){#sidebar-wrapper[_ngcontent-%COMP%]{margin-left:0}#page-content-wrapper[_ngcontent-%COMP%]{min-width:0;width:100%}#wrapper.toggled[_ngcontent-%COMP%]   #sidebar-wrapper[_ngcontent-%COMP%]{margin-left:-15rem}}"]}),t})();function IC(t,e){1&t&&(r.Sb(0,"div"),r.wc(1," \xa0"),r.Rb())}function kC(t,e){1&t&&(r.Sb(0,"div",25),r.Sb(1,"a",26),r.wc(2,"Log out"),r.Rb(),r.Rb())}function AC(t,e){if(1&t){const t=r.Tb();r.Sb(0,"tr",27),r.Zb("click",function(){r.pc(t);const n=e.$implicit;return r.bc().selectCategoria(n)}),r.Sb(1,"td"),r.wc(2),r.Rb(),r.Sb(3,"td"),r.wc(4),r.Rb(),r.Sb(5,"td"),r.wc(6),r.Rb(),r.Rb()}if(2&t){const t=e.$implicit;r.Bb(2),r.xc(t.nombre),r.Bb(2),r.xc(t.descripcion),r.Bb(2),r.xc(t.idCat)}}let RC=(()=>{class t{constructor(t,e){this.categoriaService=t,this.authService=e,this.categoria=new Av}ngOnInit(){this.categoriaService.getCategorias().subscribe(t=>{this.categorias=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data()))})}create(){this.categoriaService.createCategoria(this.categoria),this.categoria=new Av}selectCategoria(t){this.categoria=t}update(){this.categoriaService.updateCategoria(this.categoria),this.categoria=new Av}delete(t){this.categoriaService.deleteCategoria(t),this.categoria=new Av}limpiar(){this.categoria=new Av}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Rv),r.Pb(Sv))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-lista-categorias"]],decls:76,vars:9,consts:[[4,"ngIf"],["SideClass","navbar navbar-expand-lg navbar-dark purple lighten-1 ",3,"containerInside"],[1,"navbar-brand"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["mdbWavesEffect","",1,"nav-link","waves-light",3,"routerLink"],[1,"sr-only"],[1,"navbar-nav","ml-auto","nav-flex-icons"],["dropdown","",1,"nav-item","avatar","dropdown"],["dropdownToggle","","mdbWavesEffect","","type","button","mdbWavesEffect","",1,"nav-link","dropdown-toggle","waves-light"],["src","","alt","",1,"img-fluid","rounded-circle","z-depth-0"],["class","dropdown-menu dropdown-menu-right dropdown dropdown-primary","role","menu",4,"dropdownMenu"],[1,"navbar","navbar-light","bg-light"],[1,"navbar-brand","mb-0","h1"],[1,"row","justify-content-center"],[1,"col-sm-4"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,""],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"col-sm-6"],[1,"table"],[3,"click",4,"ngFor","ngForOf"],["role","menu",1,"dropdown-menu","dropdown-menu-right","dropdown","dropdown-primary"],["mdbWavesEffect","","href","authService.cerrarSesion()",1,"dropdown-item","waves-light"],[3,"click"]],template:function(t,e){1&t&&(r.Sb(0,"div"),r.wc(1,"\xa0"),r.Rb(),r.vc(2,IC,2,0,"div",0),r.Sb(3,"mdb-navbar",1),r.Sb(4,"mdb-navbar-brand"),r.Sb(5,"a",2),r.wc(6,"DASHBOARD "),r.Rb(),r.Rb(),r.Sb(7,"links"),r.Sb(8,"ul",3),r.Sb(9,"li",4),r.Sb(10,"a",5),r.wc(11,"Productos"),r.Sb(12,"span",6),r.wc(13,"(current)"),r.Rb(),r.Rb(),r.Rb(),r.Sb(14,"li",4),r.Sb(15,"a",5),r.wc(16,"Categorias"),r.Rb(),r.Rb(),r.Rb(),r.Sb(17,"ul",7),r.Sb(18,"li",8),r.Sb(19,"a",9),r.Qb(20,"img",10),r.Rb(),r.vc(21,kC,3,0,"div",11),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Sb(22,"nav",12),r.Sb(23,"span",13),r.wc(24,"SECCION DE CATEGORIAS"),r.Rb(),r.Rb(),r.Sb(25,"div"),r.wc(26,"\xa0"),r.Rb(),r.Sb(27,"div",14),r.Sb(28,"div",15),r.Sb(29,"h4"),r.wc(30,"Alta de Categorias"),r.Rb(),r.Sb(31,"p"),r.Sb(32,"label"),r.wc(33,"Nombre"),r.Rb(),r.Sb(34,"input",16),r.Zb("ngModelChange",function(t){return e.categoria.nombre=t}),r.Rb(),r.Rb(),r.Sb(35,"p"),r.Sb(36,"label"),r.wc(37,"Descripcion"),r.Rb(),r.Sb(38,"input",16),r.Zb("ngModelChange",function(t){return e.categoria.descripcion=t}),r.Rb(),r.Rb(),r.Sb(39,"p"),r.Sb(40,"label"),r.wc(41,"Url Foto"),r.Rb(),r.Sb(42,"input",16),r.Zb("ngModelChange",function(t){return e.categoria.urlPhoto=t}),r.Rb(),r.Rb(),r.Sb(43,"p"),r.Sb(44,"label"),r.wc(45,"Id de la Categoria"),r.Rb(),r.Sb(46,"input",16),r.Zb("ngModelChange",function(t){return e.categoria.idCat=t}),r.Rb(),r.Rb(),r.Sb(47,"table",17),r.Sb(48,"tr"),r.Sb(49,"td"),r.Sb(50,"button",18),r.Zb("click",function(){return e.create()}),r.wc(51," Insertar "),r.Rb(),r.Rb(),r.Sb(52,"td"),r.Sb(53,"button",19),r.Zb("click",function(){return e.update()}),r.wc(54," Modificar "),r.Rb(),r.Rb(),r.Sb(55,"td"),r.Sb(56,"button",20),r.Zb("click",function(){return e.delete(e.categoria.id)}),r.wc(57," Eliminar "),r.Rb(),r.Rb(),r.Sb(58,"td"),r.Sb(59,"button",21),r.Zb("click",function(){return e.limpiar()}),r.wc(60," Limpiar "),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Sb(61,"div",22),r.Sb(62,"h4"),r.wc(63,"Lista Laptos"),r.Rb(),r.Sb(64,"div"),r.wc(65,"\xa0"),r.Rb(),r.Sb(66,"table",23),r.Sb(67,"thead"),r.Sb(68,"th"),r.wc(69,"Nombre"),r.Rb(),r.Sb(70,"th"),r.wc(71,"Descripcion"),r.Rb(),r.Sb(72,"th"),r.wc(73,"ID de la Categoria"),r.Rb(),r.Rb(),r.Sb(74,"tbody"),r.vc(75,AC,7,3,"tr",24),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Bb(2),r.ec("ngIf",e.authService.userState),r.Bb(1),r.ec("containerInside",!1),r.Bb(7),r.ec("routerLink","/listaProductos"),r.Bb(5),r.ec("routerLink","/listaCategorias"),r.Bb(19),r.ec("ngModel",e.categoria.nombre),r.Bb(4),r.ec("ngModel",e.categoria.descripcion),r.Bb(4),r.ec("ngModel",e.categoria.urlPhoto),r.Bb(4),r.ec("ngModel",e.categoria.idCat),r.Bb(29),r.ec("ngForOf",e.categorias))},directives:[j,cC,lC,uC,Zr,bC,US,HS,BS,Mv,Jv,y_,A],styles:[""]}),t})();const jC=function(t){return["/prodCategoria",t]};function NC(t,e){if(1&t&&(r.Sb(0,"div",6),r.Sb(1,"mdb-card"),r.Qb(2,"mdb-card-img",7),r.Sb(3,"mdb-card-body"),r.Sb(4,"mdb-card-title"),r.Sb(5,"h4"),r.wc(6),r.Rb(),r.Rb(),r.Sb(7,"mdb-card-text"),r.wc(8),r.Rb(),r.Sb(9,"a",8),r.wc(10,"Vamos!"),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t){const t=e.$implicit;r.Bb(2),r.ec("src",t.urlPhoto),r.Bb(4),r.xc(t.nombre),r.Bb(2),r.yc(" ",t.descripcion," "),r.Bb(1),r.ec("routerLink",r.gc(4,jC,t.idCat))}}let PC=(()=>{class t{constructor(t){this.categoriaService=t,this.categoria=new Av}ngOnInit(){this.categoriaService.getCategorias().subscribe(t=>{this.categorias=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data()))})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Rv))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-categorias"]],decls:10,vars:1,consts:[[1,"row","display-4"],[1,"row"],[1,"col","text-center"],[1,"display-4"],[1,"container"],["class","col-md-3 mx-auto my-5",4,"ngFor","ngForOf"],[1,"col-md-3","mx-auto","my-5"],["alt","Card image cap",3,"src"],[1,"btn","btn-primary",3,"routerLink"]],template:function(t,e){1&t&&(r.Sb(0,"div",0),r.wc(1," \xa0 "),r.Rb(),r.Sb(2,"div",1),r.Sb(3,"div",2),r.Sb(4,"h1",3),r.Sb(5,"small"),r.wc(6,"Conoce Nuestros Productos !"),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Sb(7,"div",4),r.Sb(8,"div",1),r.vc(9,NC,11,6,"div",5),r.Rb(),r.Rb()),2&t&&(r.Bb(9),r.ec("ngForOf",e.categorias))},directives:[A,Fw,Vw,Mw,Dw,Lw,Zr],styles:[""]}),t})(),DC=(()=>{class t{constructor(t,e){this.route=t,this.categoriaService=e,this.producto=new kv,this.idProd=this.route.snapshot.paramMap.get("idProd"),console.log(this.idProd)}getProduct(t){this.categoriaService.getProducto(t).subscribe(t=>{this.nombre=t.payload.data().name,this.descripcion=t.payload.data().description,this.urlPhoto=t.payload.data().urlPhoto,this.material=t.payload.data().material,this.medidas=t.payload.data().medidas,this.modelo=t.payload.data().modelo,this.costo=t.payload.data().costo})}ngOnInit(){this.getProduct(this.idProd)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(An),r.Pb(Rv))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-detail-product"]],decls:34,vars:7,consts:[[1,"container"],[1,"row"],[1,"col","sm-6"],["width","380","height","500",3,"src"],[1,"col","text-center"],[1,"display-4"],[1,"card","text-center"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,e){1&t&&(r.Sb(0,"p"),r.wc(1,"\xa0"),r.Rb(),r.Sb(2,"p"),r.wc(3,"\xa0"),r.Rb(),r.Sb(4,"div",0),r.Sb(5,"div",1),r.Sb(6,"div",2),r.Qb(7,"img",3),r.Rb(),r.Sb(8,"div",2),r.Sb(9,"div",4),r.Sb(10,"h1",5),r.Sb(11,"small"),r.wc(12),r.Rb(),r.Rb(),r.Rb(),r.Sb(13,"div",6),r.Sb(14,"div",7),r.wc(15),r.Rb(),r.Sb(16,"div",8),r.Sb(17,"h5",9),r.wc(18,"Descripcion"),r.Rb(),r.Sb(19,"p",10),r.wc(20),r.Rb(),r.Sb(21,"h5",9),r.wc(22,"Modelo"),r.Rb(),r.Sb(23,"p",10),r.wc(24),r.Rb(),r.Sb(25,"h5",9),r.wc(26,"Medidas"),r.Rb(),r.Sb(27,"p",10),r.wc(28),r.Rb(),r.Sb(29,"h5",9),r.wc(30,"Material"),r.Rb(),r.Sb(31,"p",10),r.wc(32),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Qb(33,"h1")),2&t&&(r.Bb(7),r.fc("src",e.urlPhoto,r.qc),r.Bb(5),r.xc(e.nombre),r.Bb(3),r.yc("$",e.costo,""),r.Bb(5),r.yc(" ",e.descripcion," "),r.Bb(4),r.yc(" ",e.modelo," "),r.Bb(4),r.yc(" ",e.medidas," "),r.Bb(4),r.yc(" ",e.material," "))},styles:[""]}),t})();const LC=function(t){return["/detailProduct",t]};function MC(t,e){if(1&t&&(r.Sb(0,"mdb-card"),r.Qb(1,"mdb-card-img",8),r.Sb(2,"mdb-card-body"),r.Sb(3,"mdb-card-title"),r.Sb(4,"h4"),r.wc(5),r.Rb(),r.Rb(),r.Sb(6,"mdb-card-text"),r.wc(7),r.Rb(),r.Sb(8,"a",9),r.wc(9,"Vamos!"),r.Rb(),r.Rb(),r.Rb()),2&t){const t=r.bc().$implicit;r.Bb(1),r.ec("src",t.urlPhoto),r.Bb(4),r.xc(t.name),r.Bb(2),r.yc(" ",t.description," "),r.Bb(1),r.ec("routerLink",r.gc(4,LC,t.id))}}function FC(t,e){if(1&t&&(r.Sb(0,"div",6),r.vc(1,MC,10,6,"mdb-card",7),r.Rb()),2&t){const t=e.$implicit,n=r.bc();r.Bb(1),r.ec("ngIf",n.idCat==t.categoria)}}const VC=[{path:"",redirectTo:"/categorias",pathMatch:"full"},{path:"categorias",component:PC},{path:"home",component:PC},{path:"prodCategoria/:idCat",component:(()=>{class t{constructor(t,e){this.route=t,this.categoriaService=e,this.categoria=new kv,this.idCat=this.route.snapshot.paramMap.get("idCat"),console.log(this.idCat)}ngOnInit(){this.categoriaService.getProdCat().subscribe(t=>{this.prouctos=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data()))})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(An),r.Pb(Rv))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-prod-categoria"]],decls:10,vars:1,consts:[[1,"row","display-4"],[1,"row"],[1,"col","text-center"],[1,"display-4"],[1,"container"],["class","col-md-3 mx-auto my-5",4,"ngFor","ngForOf"],[1,"col-md-3","mx-auto","my-5"],[4,"ngIf"],["alt","Card image cap",3,"src"],[1,"btn","btn-primary",3,"routerLink"]],template:function(t,e){1&t&&(r.Sb(0,"div",0),r.wc(1," \xa0 "),r.Rb(),r.Sb(2,"div",1),r.Sb(3,"div",2),r.Sb(4,"h1",3),r.Sb(5,"small"),r.wc(6,"Conoce Nuestros Productos !"),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Sb(7,"div",4),r.Sb(8,"div",1),r.vc(9,FC,2,1,"div",5),r.Rb(),r.Rb()),2&t&&(r.Bb(9),r.ec("ngForOf",e.prouctos))},directives:[A,j,Fw,Vw,Mw,Dw,Lw,Zr],styles:[""]}),t})()},{path:"detailProduct/:idProd",component:DC},{path:"dashboard",component:xC,canActivate:[Iv]},{path:"listaProductos",component:TC,canActivate:[Iv]},{path:"listaCategorias",component:RC,canActivate:[Iv]},{path:"registro",component:Ov},{path:"forgot-password",component:Cv},{path:"verificar-email",component:xv},{path:"login",component:Ev},{path:"**",redirectTo:"/categorias"}];let qC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[ci.forRoot(VC)],ci]}),t})(),UC=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Jb({type:t,selectors:[["app-navbar"]],decls:18,vars:4,consts:[["SideClass","navbar navbar-expand-lg navbar-light blue-grey lighten-5 unique-color fixed-top",3,"containerInside"],[1,"navbar-brand",3,"routerLink"],["src","https://res.cloudinary.com/univeralclothing/image/upload/v1617747055/imagesUniveral/Logo_fcjian.jpg","width","70","height","30","alt",""],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],["mdbWavesEffect","",1,"nav-link","waves-light",3,"routerLink"],[1,"sr-only"],[1,"navbar-nav","ml-auto","nav-flex-icons"],[1,"nav-item"],[1,"nav-link"],["mdbDropdown","",1,"btn-group"],["fas","","icon","user","mdbDropdownToggle",""],[1,"dropdown-menu","dropdown-menu-right","dropdown-primary"],[1,"btn",3,"routerLink"]],template:function(t,e){1&t&&(r.Sb(0,"mdb-navbar",0),r.Sb(1,"a",1),r.Qb(2,"img",2),r.Rb(),r.Sb(3,"links"),r.Sb(4,"ul",3),r.Sb(5,"li",4),r.Sb(6,"a",5),r.wc(7,"Home"),r.Sb(8,"span",6),r.wc(9,"(current)"),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Sb(10,"ul",7),r.Sb(11,"li",8),r.Sb(12,"a",9),r.Sb(13,"div",10),r.Qb(14,"mdb-icon",11),r.Sb(15,"div",12),r.Sb(16,"button",13),r.wc(17,"Login"),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.ec("containerInside",!1),r.Bb(1),r.ec("routerLink","/home"),r.Bb(5),r.ec("routerLink","/home"),r.Bb(10),r.ec("routerLink","/login"))},directives:[cC,Zr,uC,bC,US,KS,$S,HS,Yr],styles:[""]}),t})(),BC=(()=>{class t{constructor(){this.title="univeralClothing"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Jb({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Qb(0,"app-navbar"),r.Qb(1,"router-outlet"))},directives:[UC,Xr],styles:[""]}),t})();function HC(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function WC(t){switch(t.length){case 0:return new B_;case 1:return t[0];default:return new H_(t)}}function zC(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case F_:a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function KC(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&$C(n,"start",t)));break;case"done":t.onDone(()=>r(n&&$C(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&$C(n,"destroy",t)))}}function $C(t,e,n){const r=n.totalTime,i=QC(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function QC(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function GC(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function YC(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let ZC=(t,e)=>!1,JC=(t,e)=>!1,XC=(t,e,n)=>[];const tE=HC();(tE||"undefined"!=typeof Element)&&(ZC=(t,e)=>t.contains(e),JC=(()=>{if(tE||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):JC}})(),XC=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let eE=null,nE=!1;function rE(t){eE||(eE=("undefined"!=typeof document?document.body:null)||{},nE=!!eE.style&&"WebkitAppearance"in eE.style);let e=!0;return eE.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in eE.style,!e&&nE)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in eE.style),e}const iE=JC,oE=ZC,sE=XC;function aE(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let uE=(()=>{class t{validateStyleProperty(t){return rE(t)}matchesElement(t,e){return iE(t,e)}containsElement(t,e){return oE(t,e)}query(t,e,n){return sE(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new B_(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})(),cE=(()=>{class t{}return t.NOOP=new uE,t})();const lE="ng-enter",hE="ng-leave",dE="ng-trigger",fE=".ng-trigger",pE="ng-animating",mE=".ng-animating";function gE(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:yE(parseFloat(e[1]),e[2])}function yE(t,e){switch(e){case"s":return 1e3*t;default:return t}}function bE(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=yE(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=yE(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function vE(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function _E(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else vE(t,n);return n}function wE(t,e,n){return n?e+":"+n+";":""}function SE(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=wE(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=wE(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function CE(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=RE(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),HC()&&SE(t))}function EE(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=RE(e);t.style[n]=""}),HC()&&SE(t))}function OE(t){return Array.isArray(t)?1==t.length?t[0]:V_(t):t}const TE=new RegExp("{{\\s*(.+?)\\s*}}","g");function xE(t){let e=[];if("string"==typeof t){let n;for(;n=TE.exec(t);)e.push(n[1]);TE.lastIndex=0}return e}function IE(t,e,n){const r=t.toString(),i=r.replace(TE,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function kE(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const AE=/-+([a-z0-9])/g;function RE(t){return t.replace(AE,(...t)=>t[1].toUpperCase())}function jE(t,e){return 0===t||0===e}function NE(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach(function(e){n[e]=DE(t,e)})}}return e}function PE(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function DE(t,e){return window.getComputedStyle(t)[e]}const LE="*";function ME(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(qE(i,s)),"<"!=o[0]||i==LE&&s==LE||e.push(qE(s,i))}(t,n,e)):n.push(t),n}const FE=new Set(["true","1"]),VE=new Set(["false","0"]);function qE(t,e){const n=FE.has(t)||VE.has(t),r=FE.has(e)||VE.has(e);return(i,o)=>{let s=t==LE||t==i,a=e==LE||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?FE.has(t):VE.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?FE.has(e):VE.has(e)),s&&a}}const UE=new RegExp("s*:selfs*,?","g");function BE(t,e,n){return new HE(t).build(e,n)}class HE{constructor(t){this._driver=t}build(t,e){const n=new WE(e);return this._resetContextStyleTimingState(n),PE(this,OE(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(zE(t)){const e=t;Object.keys(e).forEach(t=>{xE(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=kE(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=PE(this,OE(t.animation),e);return{type:1,matchers:ME(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:KE(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>PE(this,t,e)),options:KE(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=PE(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:KE(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return $E(bE(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=$E(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||bE(r,e),$E(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:q_({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=q_(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==F_?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(zE(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=xE(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(zE(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(zE(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=d+f.delay+s,f.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:PE(this,OE(t.animation),e),options:KE(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:KE(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:KE(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(UE,"")),[t=t.replace(/@\*/g,fE).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,mE),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,GC(e.collectedStyles,e.currentQuerySelector,{});const s=PE(this,OE(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:KE(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:bE(t.timings,e.errors,!0);return{type:12,animation:PE(this,OE(t.animation),e),timings:n,options:null}}}class WE{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function zE(t){return!Array.isArray(t)&&"object"==typeof t}function KE(t){var e;return t?(t=vE(t)).params&&(t.params=(e=t.params)?vE(e):null):t={},t}function $E(t,e,n){return{duration:t,delay:e,easing:n}}function QE(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class GE{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const YE=new RegExp(":enter","g"),ZE=new RegExp(":leave","g");function JE(t,e,n,r,i,o={},s={},a,u,c=[]){return(new XE).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class XE{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new GE;const l=new eO(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),PE(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[QE(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?gE(n.duration):null,o=null!=n.delay?gE(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),PE(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=tO);const t=gE(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>PE(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?gE(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),PE(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return bE(e.params?IE(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?gE(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=tO);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),PE(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;PE(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const tO={};class eO{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=tO,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new nO(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=gE(n.duration)),null!=n.delay&&(r.delay=gE(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=IE(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new eO(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=tO,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new rO(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(YE,"."+this._enterClassName)).replace(ZE,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class nO{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new nO(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||F_,this._currentKeyframe[t]=F_}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=F_})):_E(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=IE(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:F_),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=_E(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):r==F_&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?kE(t.values()):[],o=e.size?kE(e.values()):[];if(n){const t=r[0],e=vE(t);t.offset=0,e.offset=1,r=[t,e]}return QE(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class rO extends nO{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=_E(t[0],!1);a.offset=0,i.push(a);const u=_E(t[0],!1);u.offset=iO(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=_E(t[r],!1);s.offset=iO((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return QE(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function iO(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class oO{}class sO extends oO{normalizePropertyName(t,e){return RE(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(aO[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const aO=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function uO(t,e,n,r,i,o,s,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const cO={};class lO{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||cO,d=this.buildStyles(n,s&&s.params||cO,l),f=a&&a.params||cO,p=this.buildStyles(r,f,l),m=new Set,g=new Map,y=new Map,b="void"===r,v={params:Object.assign(Object.assign({},h),f)},_=c?[]:JE(t,e,this.ast.animation,i,o,d,p,v,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return uO(e,this._triggerName,n,r,b,d,p,[],[],g,y,w,l);_.forEach(t=>{const n=t.element,r=GC(g,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=GC(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&m.add(n)});const S=kE(m.values());return uO(e,this._triggerName,n,r,b,d,p,_,S,g,y,w)}}class hO{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=vE(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=IE(o,r,e)),n[t]=o})}}),n}}class dO{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new hO(t.style,t.options&&t.options.params||{})}),fO(this.states,"true","1"),fO(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new lO(t,e,this.states))}),this.fallbackTransition=new lO(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function fO(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const pO=new GE;class mO{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=BE(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=zC(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=JE(this._driver,e,i,lE,hE,{},{},n,pO,r),o.forEach(t=>{const e=GC(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,F_)})});const a=WC(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=QC(e,"","","");return KC(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const gO="ng-animate-queued",yO="ng-animate-disabled",bO=".ng-animate-disabled",vO=[],_O={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},wO={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class SO{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=vE(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const CO="void",EO=new SO(CO);class OO{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,jO(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=GC(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=GC(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(jO(t,dE),jO(t,"ng-trigger-"+e),a[e]=EO),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new xO(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(jO(t,dE),jO(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new SO(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=EO),u.value!==CO&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{EE(t,n),CE(t,r)})}return}const c=GC(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(jO(t,gO),o.onStart(()=>{NO(t,gO)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,fE,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,CO,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&WC(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const o=this._triggers[i].fallbackTransition,s=n[i]||EO,a=new SO(CO),u=new xO(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:o,fromState:s,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==_O||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){jO(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=QC(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,KC(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class TO{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new OO(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(IO(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!IO(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),jO(t,yO)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),NO(t,yO))}removeNode(t,e,n,r){if(IO(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return IO(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,fE,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,mE,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return WC(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=_O,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,bO)&&this.markElementAsDisabled(t,!1),this.driver.query(t,bO,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)jO(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?WC(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new GE,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=RO(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=lE+p++;f.set(e,n),t.forEach(t=>jO(t,n))});const m=[],g=new Set,y=new Set;for(let A=0;A<this.collectedLeaveElements.length;A++){const t=this.collectedLeaveElements[A],e=t.__ng_removed;e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):y.add(t))}const b=new Map,v=RO(h,Array.from(g));v.forEach((t,e)=>{const n=hE+p++;b.set(e,n),t.forEach(t=>jO(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>NO(t,n))}),v.forEach((t,e)=>{const n=b.get(e);t.forEach(t=>NO(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let A=this._namespaceList.length-1;A>=0;A--)this._namespaceList[A].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=b.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>EE(i,p.fromStyles)),e.onDestroy(()=>CE(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>EE(i,p.fromStyles)),e.onDestroy(()=>CE(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>GC(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const S=new Map,C=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,S))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{GC(S,e,[]).push(t),t.destroy()})});const E=m.filter(t=>LO(t,a,u)),O=new Map;AO(O,this.driver,y,u,F_).forEach(t=>{LO(t,a,u)&&E.push(t)});const T=new Map;d.forEach((t,e)=>{AO(T,this.driver,new Set(t),a,"!")}),E.forEach(t=>{const e=O.get(t),n=T.get(t);O.set(t,Object.assign(Object.assign({},e),n))});const x=[],I=[],k={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>CE(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=k;if(C.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=C.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>C.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,S,i,T,O);if(o.setRealPlayer(n),t===k)x.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=WC(e)),r.push(o)}}else EE(e,s.fromStyles),o.onDestroy(()=>CE(e,s.toStyles)),I.push(o),c.has(e)&&r.push(o)}),I.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=WC(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let A=0;A<m.length;A++){const t=m[A],e=t.__ng_removed;if(NO(t,hE),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,mE,!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?PO(this,t,r):this.processLeaveNode(t)}return m.length=0,x.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),x}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==CO;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=GC(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}EE(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new B_(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return DO(t,e),e}((n.get(h)||vO).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=i.get(h),g=o.get(h),y=zC(0,this._normalizer,0,e.keyframes,m,g),b=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new xO(t,s,h);e.setRealPlayer(b),u.push(e)}return b});u.forEach(t=>{GC(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>jO(t,pE));const d=WC(h);return d.onDestroy(()=>{c.forEach(t=>NO(t,pE)),CE(a,e.toStyles)}),l.forEach(t=>{GC(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new B_(t.duration,t.delay)}}class xO{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new B_,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>KC(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){GC(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function IO(t){return t&&1===t.nodeType}function kO(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function AO(t,e,n,r,i){const o=[];n.forEach(t=>o.push(kO(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=wO,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>kO(t,o[a++])),s}function RO(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function jO(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function NO(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function PO(t,e,n){WC(n).onDone(()=>t.processLeaveNode(e))}function DO(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof H_?DO(r.players,e):e.push(r)}}function LO(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class MO{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new TO(t,e,n),this._timelineEngine=new mO(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=BE(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new dO(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=YC(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=YC(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function FO(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=qO(e[0]),e.length>1&&(r=qO(e[e.length-1]))):e&&(n=qO(e)),n||r?new VO(t,n,r):null}let VO=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&CE(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(CE(this._element,this._initialStyles),this._endStyles&&(CE(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(EE(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(EE(this._element,this._endStyles),this._endStyles=null),CE(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function qO(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];UO(i)&&(e=e||{},e[i]=t[i])}return e}function UO(t){return"display"===t||"position"===t}const BO="animation",HO="animationend";class WO{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=YO(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),GO(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),QO(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){zO(this._element,this._name,"paused")}resume(){zO(this._element,this._name,"running")}setPosition(t){const e=KO(this._element,this._name);this._position=t*this._duration,GO(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),QO(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=YO(t,"").split(","),r=$O(n,e);r>=0&&(n.splice(r,1),GO(t,"",n.join(",")))}(this._element,this._name))}}function zO(t,e,n){GO(t,"PlayState",n,KO(t,e))}function KO(t,e){const n=YO(t,"");return n.indexOf(",")>0?$O(n.split(","),e):$O([n],e)}function $O(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function QO(t,e,n){n?t.removeEventListener(HO,e):t.addEventListener(HO,e)}function GO(t,e,n,r){const i=BO+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function YO(t,e){return t.style[BO+e]||""}class ZO{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new WO(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:DE(this.element,n))})}this.currentSnapshot=t}}class JO extends B_{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=aE(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class XO{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(t){return rE(t)}matchesElement(t,e){return iE(t,e)}containsElement(t,e){return oE(t,e)}query(t,e,n){return sE(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>aE(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){const a=o.filter(t=>t instanceof ZO),u={};jE(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=NE(t,e,u));if(0==n)return new JO(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const d=FO(t,e),f=new ZO(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class tT{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:DE(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class eT{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(nT().toString()),this._cssKeyframesDriver=new XO}validateStyleProperty(t){return rE(t)}matchesElement(t,e){return iE(t,e)}containsElement(t,e){return oE(t,e)}query(t,e,n){return sE(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof tT);jE(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=FO(t,e=NE(t,e=e.map(t=>_E(t,!1)),u));return new tT(t,e,a,l)}}function nT(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let rT=(()=>{class t extends M_{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.S.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?V_(t):t;return sT(this._renderer,null,e,"register",[n]),new iT(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(r.G),r.Wb(s))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();class iT extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new oT(this._id,t,e||{},this._renderer)}}class oT{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return sT(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function sT(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const aT="@",uT="@.disabled";let cT=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new lT("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new hT(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(r.G),r.Wb(MO),r.Wb(r.A))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();class lT{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==aT&&e==uT?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class hT extends lT{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==aT?"."==e.charAt(1)&&e==uT?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==aT){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return i.charAt(0)!=aT&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let dT=(()=>{class t extends MO{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(s),r.Wb(cE),r.Wb(oO))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();const fT=[{provide:cE,useFactory:function(){return"function"==typeof nT()?new eT:new XO}},{provide:new r.r("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:M_,useClass:rT},{provide:oO,useFactory:function(){return new sO}},{provide:MO,useClass:dT},{provide:r.G,useFactory:function(t,e,n){return new cT(t,e,n)},deps:[rt,MO,r.A]}];let pT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({providers:fT,imports:[gt]}),t})();const mT={apiKey:"AIzaSyAXo-I1ZqLwsylXZYcZknqtmMDfBIWXdf8",authDomain:"univeralclothingmx.firebaseapp.com",projectId:"univeralclothingmx",storageBucket:"univeralclothingmx.appspot.com",messagingSenderId:"228859050003",appId:"1:228859050003:web:25d5aa6e98b02c69fae7e6"};class gT{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new yT(t,this.observables,this.project))}}class yT extends Ot{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(kt(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class bT{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new vT(t,this.predicate))}}class vT extends Et.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function _T(t){return null==t}function wT(t){return"function"==typeof t.set}function ST(t,e){return wT(e)?e:t.ref(e)}function CT(t,e){if("string"==typeof t)return e.stringCase();if(wT(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function ET(t,e,n="on",r=vi.b){return new It.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(qt.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(T_.a)())}function OT(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function TT(t,e){const{payload:n,prevKey:r,key:i}=e,o=OT(t,i),s=function(t,e){if(_T(e))return 0;{const n=OT(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function xT(t){return(_T(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function IT(t,e,n){return function(t,e,n){return ET(t,"value","once",n).pipe(Bt(r=>{const i=[Object(bt.a)(r)];return e.forEach(e=>i.push(ET(t,e,"on",n))),Object(Wb.a)(...i).pipe(Yt(TT,[]))}),Ci())}(t,e=xT(e),n)}function kT(t,e,n){const r=(e=xT(e)).map(e=>ET(t,e,"on",n));return Object(Wb.a)(...r)}function AT(t,e){return function(n,r){return CT(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function RT(t,e){return function(){return ET(t,"value","on",e)}}n("6Uf2");const jT=new r.r("angularfire2.realtimeDatabaseURL"),NT=new r.r("angularfire2.database.use-emulator");let PT=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new xi.d(i),this.keepUnstableUntilFirst=Object(xi.h)(this.schedulers);const a=o,u=Object(xi.g)(t,i,e);!bi.a.auth&&s&&Object(xi.j)(),this.database=Object(xi.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>ST(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:AT(r,"update"),set:AT(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?CT(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>IT(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>kT(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return ET(t,"value","on",e).pipe(Object(qt.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new gT(t,n))}}(e),Object(qt.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new bT(r))),Object(qt.a)(t=>t.actions));var r}(t,kT(t,e).pipe(Yt((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>IT(t,r,n).pipe(Object(qt.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>ST(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>RT(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>RT(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(qt.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(xi.c),r.Wb(xi.b,8),r.Wb(jT,8),r.Wb(r.C),r.Wb(r.A),r.Wb(NT,8),r.Wb(Jb,8))},t.\u0275prov=Object(r.Lb)({factory:function(){return new t(Object(r.Wb)(xi.c),Object(r.Wb)(xi.b,8),Object(r.Wb)(jT,8),Object(r.Wb)(r.C),Object(r.Wb)(r.A),Object(r.Wb)(NT,8),Object(r.Wb)(Jb,8))},token:t,providedIn:"any"}),t})(),DT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({providers:[PT]}),t})(),LT=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({imports:[[L]]}),t})(),MT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Nb({type:t,bootstrap:[BC]}),t.\u0275inj=r.Mb({providers:[Sv,Rv],imports:[[gt,qC,w_,SC.forRoot(),pT,S_,xi.a.initializeApp(mT),DT,LT,ov,wv]]}),t})();Object(r.U)(),pt().bootstrapModule(MT).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);